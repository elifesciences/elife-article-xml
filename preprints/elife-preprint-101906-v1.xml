<?xml version="1.0" ?><!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD v1.3 20210610//EN"  "JATS-archivearticle1-mathml3.dtd"><article xmlns:ali="http://www.niso.org/schemas/ali/1.0/" xmlns:xlink="http://www.w3.org/1999/xlink" article-type="research-article" dtd-version="1.3" xml:lang="en">
<front>
<journal-meta>
<journal-id journal-id-type="nlm-ta">elife</journal-id>
<journal-id journal-id-type="publisher-id">eLife</journal-id>
<journal-title-group>
<journal-title>eLife</journal-title>
</journal-title-group>
<issn publication-format="electronic" pub-type="epub">2050-084X</issn>
<publisher>
<publisher-name>eLife Sciences Publications, Ltd</publisher-name>
</publisher>
</journal-meta>
<article-meta>
<article-id pub-id-type="publisher-id">101906</article-id>
<article-id pub-id-type="doi">10.7554/eLife.101906</article-id>
<article-id pub-id-type="doi" specific-use="version">10.7554/eLife.101906.1</article-id>
<article-version-alternatives>
<article-version article-version-type="publication-state">reviewed preprint</article-version>
<article-version article-version-type="preprint-version">1.1</article-version>
</article-version-alternatives>
<article-categories>
<subj-group subj-group-type="heading">
<subject>Ecology</subject>
</subj-group>
</article-categories>
<title-group>
<article-title>Full factorial construction of synthetic microbial communities</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author" equal-contrib="yes">
<contrib-id contrib-id-type="orcid">http://orcid.org/0000-0001-8995-4529</contrib-id>
<name>
<surname>Diaz-Colunga</surname>
<given-names>Juan</given-names>
</name>
<xref ref-type="aff" rid="a1">1</xref>
<xref ref-type="aff" rid="a2">2</xref>
<xref ref-type="author-notes" rid="n1">*</xref>
</contrib>
<contrib contrib-type="author" equal-contrib="yes">
<contrib-id contrib-id-type="orcid">http://orcid.org/0000-0003-2826-4684</contrib-id>
<name>
<surname>Catalan</surname>
<given-names>Pablo</given-names>
</name>
<xref ref-type="aff" rid="a3">3</xref>
<xref ref-type="author-notes" rid="n1">*</xref>
</contrib>
<contrib contrib-type="author" equal-contrib="yes">
<name>
<surname>San Roman</surname>
<given-names>Magdalena</given-names>
</name>
<xref ref-type="aff" rid="a1">1</xref>
<xref ref-type="aff" rid="a2">2</xref>
<xref ref-type="author-notes" rid="n1">*</xref>
</contrib>
<contrib contrib-type="author" equal-contrib="yes">
<name>
<surname>Arrabal</surname>
<given-names>Andrea</given-names>
</name>
<xref ref-type="aff" rid="a1">1</xref>
<xref ref-type="aff" rid="a2">2</xref>
<xref ref-type="author-notes" rid="n1">*</xref>
</contrib>
<contrib contrib-type="author" equal-contrib="yes" corresp="yes">
<contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-2292-5608</contrib-id>
<name>
<surname>Sanchez</surname>
<given-names>Alvaro</given-names>
</name>
<xref ref-type="aff" rid="a1">1</xref>
<xref ref-type="aff" rid="a2">2</xref>
<xref ref-type="author-notes" rid="n1">*</xref>
<xref ref-type="author-notes" rid="n2">✉</xref>
<email>alvaro.sanchez@usal.es</email>
</contrib>
<aff id="a1"><label>1</label><institution>Instituto de Biología Funcional y Genómica (IBFG), CSIC &amp; Universidad de Salamanca</institution>, 37007 Salamanca, <country>Spain</country></aff>
<aff id="a2"><label>2</label><institution>Centro Nacional de Biotecnologia (CNB), CSIC</institution>, 28049 Madrid, <country>Spain</country></aff>
<aff id="a3"><label>3</label><institution>Grupo Interdisciplinar de Sistemas Complejos (GISC), Departamento de Matemáticas, Universidad Carlos III de Madrid</institution>, 28911 Leganés, <country>Spain</country></aff>
</contrib-group>
<contrib-group content-type="section">
<contrib contrib-type="editor">
<name>
<surname>Amir</surname>
<given-names>Ariel</given-names>
</name>
<role>Reviewing Editor</role>
<aff>
<institution-wrap>
<institution>Weizmann Institute of Science</institution>
</institution-wrap>
<city>Rehovot</city>
<country>Israel</country>
</aff>
</contrib>
<contrib contrib-type="senior_editor">
<name>
<surname>Garrett</surname>
<given-names>Wendy S</given-names>
</name>
<role>Senior Editor</role>
<aff>
<institution-wrap>
<institution>Harvard T.H. Chan School of Public Health</institution>
</institution-wrap>
<city>Boston</city>
<country>United States of America</country>
</aff>
</contrib>
</contrib-group>
<author-notes>
<fn id="n1" fn-type="equal"><label>*</label><p>All authors contributed equally.</p></fn>
<fn id="n2" fn-type="others"><label>✉</label><p><email>alvaro.sanchez@usal.es</email></p></fn>
</author-notes>
<pub-date date-type="original-publication" iso-8601-date="2024-09-30">
<day>30</day>
<month>09</month>
<year>2024</year>
</pub-date>
<volume>13</volume>
<elocation-id>RP101906</elocation-id>
<history>
<date date-type="sent-for-review" iso-8601-date="2024-07-27">
<day>27</day>
<month>07</month>
<year>2024</year>
</date>
</history>
<pub-history>
<event>
<event-desc>Preprint posted</event-desc>
<date date-type="preprint" iso-8601-date="2024-05-05">
<day>05</day>
<month>05</month>
<year>2024</year>
</date>
<self-uri content-type="preprint" xlink:href="https://doi.org/10.1101/2024.05.03.592148"/>
</event>
</pub-history>
<permissions>
<copyright-statement>© 2024, Diaz-Colunga et al</copyright-statement>
<copyright-year>2024</copyright-year>
<copyright-holder>Diaz-Colunga et al</copyright-holder>
<ali:free_to_read/>
<license xlink:href="https://creativecommons.org/licenses/by/4.0/">
<ali:license_ref>https://creativecommons.org/licenses/by/4.0/</ali:license_ref>
<license-p>This article is distributed under the terms of the <ext-link ext-link-type="uri" xlink:href="https://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution License</ext-link>, which permits unrestricted use and redistribution provided that the original author and source are credited.</license-p>
</license>
</permissions>
<self-uri content-type="pdf" xlink:href="elife-preprint-101906-v1.pdf"/>
<abstract>
<title>Abstract</title>
<p>Constructing combinatorially complete species assemblages is often necessary to dissect the complexity of microbial interactions and to find optimal microbial consortia. At the moment, this is accomplished through either painstaking, labor intensive liquid handling procedures, or through the use of state-of-the-art microfluidic devices. Here we present a simple, rapid, low-cost, and highly accessible liquid handling methodology for assembling all possible combinations of a library of microbial strains, which can be implemented with basic laboratory equipment. To demonstrate the usefulness of this methodology, we construct a combinatorially complete set of consortia from a library of eight <italic>Pseudomonas aeruginosa</italic> strains, and empirically measure the community-function landscape of biomass productivity, identify the highest yield community, and dissect the interactions that lead to its optimal function. This easy to implement, inexpensive methodology will make the assembly of combinatorially complete microbial consortia easily accessible for all laboratories.</p>
</abstract>
<custom-meta-group>
<custom-meta specific-use="meta-only">
<meta-name>publishing-route</meta-name>
<meta-value>prc</meta-value>
</custom-meta>
</custom-meta-group>
</article-meta>
<notes>
<notes notes-type="competing-interest-statement">
<title>Competing Interest Statement</title><p>The authors have declared no competing interest.</p></notes>
<fn-group content-type="external-links">
<fn fn-type="dataset"><p>
<ext-link ext-link-type="uri" xlink:href="https://github.com/jdiazc9/full_factorial_design">https://github.com/jdiazc9/full_factorial_design</ext-link>
</p></fn>
</fn-group>
</notes>
</front>
<body>
<sec id="s1">
<title>Introduction</title>
<p>Microbial consortia are playing a growingly important role in biotechnology. They possess substantial potential advantages over monocultures, including larger metabolic capabilities, division of labor, and a potentially higher ecological and evolutionary stability. <sup><xref ref-type="bibr" rid="c1">1</xref></sup> Synthetic microbial communities are being engineered for goals as diverse as degrading pollutants, <sup><xref ref-type="bibr" rid="c2">2</xref></sup> producing high-value molecules such as biofuels, <sup><xref ref-type="bibr" rid="c3">3</xref>,<xref ref-type="bibr" rid="c4">4</xref></sup> vitamins, <sup><xref ref-type="bibr" rid="c5">5</xref>,<xref ref-type="bibr" rid="c6">6</xref></sup> and flavonoids, <sup><xref ref-type="bibr" rid="c7">7</xref>,<xref ref-type="bibr" rid="c8">8</xref></sup> and preventing the invasion of pathogens. <sup><xref ref-type="bibr" rid="c9">9</xref></sup></p>
<p>To fully realize the promise of microbial consortia in biotechnology we must develop tools for their optimization. Given a library of candidate strains, which consortia should we form if we wish to maximize a function of interest? <sup><xref ref-type="bibr" rid="c10">10</xref></sup> One way to address this question is purely empirical, following a full factorial design in which we form every possible assemblage and simply select whichever one is best. <sup><xref ref-type="bibr" rid="c11">11</xref>–<xref ref-type="bibr" rid="c15">15</xref></sup> Even for candidate libraries of small size (less than 10 species) the combinatorial nature of this strategy makes the assembly of all possible communities painstaking and tedious, limiting the scale and replicability of full factorial design. The number of unique liquid handling events required to form all possible combinations of <italic>m</italic> species scales as <italic>m</italic>2<sup><italic>m</italic>−1</sup>, as each of the <italic>m</italic> species needs to be added to each of the 2<sup><italic>m</italic>−1</sup> consortia where it is present. Manually making all combinations is therefore draining, slow, and prone to human error. Because of the long time required to complete such a task, the risk of contamination is high, and replication is constrained. Perhaps for this reason, studies reporting full factorial construction of microbial consortia are very rare, <sup><xref ref-type="bibr" rid="c11">11</xref>,<xref ref-type="bibr" rid="c13">13</xref>,<xref ref-type="bibr" rid="c14">14</xref>,<xref ref-type="bibr" rid="c16">16</xref></sup> and the field has largely relied on fractional factorial design, where only a subset of representative species combinations are constructed. <sup><xref ref-type="bibr" rid="c10">10</xref>,<xref ref-type="bibr" rid="c17">17</xref>–<xref ref-type="bibr" rid="c19">19</xref></sup></p>
<p>The ability to form full factorial combinations of a library of species would have benefits beyond biotechnology. In ecology, forming every possible species assemblage is required if we wish to investigate the complex, combinatorial nature of microbial interactions <sup><xref ref-type="bibr" rid="c16">16</xref>,<xref ref-type="bibr" rid="c20">20</xref>–<xref ref-type="bibr" rid="c25">25</xref></sup> and the role that high-order interactions play in the function and dynamics of microbial communities. <sup><xref ref-type="bibr" rid="c19">19</xref>,<xref ref-type="bibr" rid="c24">24</xref>,<xref ref-type="bibr" rid="c26">26</xref>–<xref ref-type="bibr" rid="c30">30</xref></sup> In sum, the quantitative understanding of high-order microbial interactions, the empirical mapping of community assembly networks, the quantitative exploration of community-function landscapes, and the development of predictive models of microbial community assembly and function all require us to be able to reliably assemble communities of growing complexity. <sup><xref ref-type="bibr" rid="c15">15</xref>,<xref ref-type="bibr" rid="c18">18</xref>,<xref ref-type="bibr" rid="c30">30</xref></sup></p>
<p>Robotic liquid handlers can facilitate the task of assembling a full combinatorial set of microbial communities. <sup><xref ref-type="bibr" rid="c11">11</xref></sup> While this alleviates some of the challenges associated to combinatorial liquid handling, particularly those associated with human error, others remain: the execution of hundreds or thousands of pipetting events is still inevitably slow, and as a result additional equipment (i.e., a HEPA filter) is required to avoid contamination. Robotic liquid handlers are also expensive, technically sophisticated equipment and they are not routinely available. As an alternative to deal with the combinatorial complexity of community assembly, Blainey et al. have introduced a droplet-based microfluidic system (kChip) that is capable of forming hundreds of thou-sands of species assemblages, <sup><xref ref-type="bibr" rid="c27">27</xref>,<xref ref-type="bibr" rid="c31">31</xref></sup> facilitating their full factorial construction. Notwithstanding their power and unparalleled high-throughput, microdroplet-based approaches such as kChip and others <sup><xref ref-type="bibr" rid="c32">32</xref></sup> are still state-of-the-art experimental methods, requiring specialized equipment and training that are not yet available to the vast majority of research groups worldwide.</p>
<p>In this paper, we describe a simple, rapid, inexpensive, and highly accessible liquid handling methodology for the full factorial design of microbial consortia and inocula, which requires only basic laboratory equipment and which can be easily implemented by the vast majority of research laboratories. Using a standard multichannel pipette, a single user can manually assemble all possible combinations of up to 10 species in less than one hour, a timescale that is shorter than the replication time of most bacteria in minimal media. Higher-dimensional designs are possible too, with the only limitation being the plasticware that is required. In addition to providing detailed protocols for a specific set of conditions (e.g., volume of the culture, density of the bacteria, etc.) we provide an R script to help the user tailor the protocol to their needs. To illustrate the usefulness of this approach, we apply it to empirically characterize the full, combinatorially complete community-function landscape of a model microbial consortium consisting of eight <italic>Pseudomonas aeruginosa</italic> strains. We characterize the full absorption spectrum of all consortia and, as a model function, we determine their total biomass. We show that the implementation of our protocol, enabling the full factorial assembly of all strain combinations, allows us to quantitatively determine the relationship between community diversity and function, identify optimal strain combinations, and characterize all pairwise and higher-order interactions among all members of the consortia. We expect this methodology will rapidly expand the number of factorially constructed microbial consortia in the literature.</p>
</sec>
<sec id="s2">
<title>Methods</title>
<p>In what follows, we describe the reasoning behind our protocol in full detail. Readers interested in the practical implementation of this logic are referred to the “Full protocol description” section of the Supplementary Methods, where we provide a step-by-step guide for the assembly of all consortia from a particular example, consisting of a library of eight microbial isolates. In addition, we provide an R script which can be used to generate similar step-by-step guides for different numbers of species and pipetting volumes.</p>
<sec id="s2a">
<title>Logic of the assembly protocol</title>
<p>The mathematical basis of our method lies in identifying each microbial consortia by a unique binary number. For a set of <italic>m</italic> species, we can represent any consortium (which we generically call <italic>c</italic>) as
<disp-formula id="eqn1">
<graphic xlink:href="592148v1_eqn1.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
where <italic>x</italic><sub><italic>k</italic></sub> = 0, 1 represents the absence (0) or presence (1) of species <italic>k</italic> in the consortium (<xref rid="fig1" ref-type="fig">Figure 1A</xref>). For example, for <italic>m</italic> = 6 species, the consortium where only species 1, 2, and 3 are present would be represented as 000111.</p>
<fig id="fig1" position="float" fig-type="figure">
<label>Figure 1.</label>
<caption><title>Logic of the assembly protocol.</title>
<p>(<bold>A</bold>) We consider a set of <italic>m</italic> species (in this illustration, <italic>m</italic> = 8), and we identify each of the 2<sup><italic>m</italic></sup> consortia that can be formed with them by the binary number <italic>c</italic> = <italic>x</italic><sub><italic>m</italic></sub><italic>x</italic><sub><italic>m</italic>−1</sub>· · · <italic>x</italic><sub>2</sub><italic>x</italic><sub>1</sub> (with <italic>x</italic><sub><italic>k</italic></sub> = 1, 0 representing the presence/absence of species <italic>k</italic>, respectively; see <xref ref-type="disp-formula" rid="eqn1">equation 1</xref>). (<bold>B</bold>) Our protocol is based on the idea that one could assemble each of the 2<sup><xref ref-type="bibr" rid="c3">3</xref></sup> = 8 combinations of species 1 to 3 in the first column of a 96-well plate. Iteratively duplicating these consortia and adding species 4 to <italic>m</italic> to them would eventually result in all 2<sup><italic>m</italic></sup> combinations of species, as described in the main text. (<bold>C</bold>) Each of the <italic>m</italic> species would be present in the indicated wells (see <xref ref-type="disp-formula" rid="eqn2">equation 2</xref>). (<bold>D</bold>) Positioning of the 2<sup><italic>m</italic></sup> consortia within the 96-well plates used in the protocol.</p></caption>
<graphic xlink:href="592148v1_fig1.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<p>Binary numbers are the natural way to denote combina-stance, tions in mathematics, and indeed the correspondence between the two sets is often <inline-formula><inline-graphic xlink:href="592148v1_inline1.gif" mime-subtype="gif" mimetype="image"/></inline-formula> used in combinatorics. For inof <italic>m</italic> species. The same number counts how many binary strings of length <italic>m</italic> contain <italic>n</italic> ones (equivalently, <italic>n</italic> zeros).</p>
<p>Now, the most important aspect of this notation is that merging two disjoint consortia becomes a simple addition: if we combine consortium 110000 with consortium 000011, the resulting consortium is represented by the binary number 110011, which is the sum of the binary representations of the initial consortia: 110000 + 000011 = 110011. Note, however, that this operation only works for disjoint consortia. If we add two consortia sharing one or more species, binary addition is no longer a good representation: combining consortium 100001 with consortium 000001 should result in the first consortium again, 100001 (we are for now ignoring potential differences in species abundances/densities, but will address this issue later in the text). Yet, the addition of the two binary representations leads to 100010, which does not represent the appropriate consortium (remember that in binary addition 01 + 01 = 10). As we will see in what follows, our protocol minimizes the number of liquid handling events by making extensive use of this addition property, but only for disjoint consortia.</p>
<p>The second property that we will use to our advantage is that 96-well plates have 8 rows, which is a power of 2 (2<sup><xref ref-type="bibr" rid="c3">3</xref></sup> = 8). This allows us to form all combinations from a 3-species set (say, species 1, 2, and 3) in one column of the plate. It is convenient to arrange these 8 consortia following the order of their binary representation: the empty consortium (000) in the first well, followed by 001, 010, 011, 100, 101, 110, and 111; corresponding to the decimal numbers from 0 to 7 in increasing order.</p>
<p>We can now duplicate these eight consortia, pipetting them into the second column of the 96-well plate, and then pipette species 4 (1000) into all wells of this second column using a multichannel pipette (<xref rid="fig1" ref-type="fig">Figure 1B</xref>). This operation is equivalent to the binary addition of consortium 1000 (species 4 alone) with each of the starting eight consortia, and results in all 2<sup><xref ref-type="bibr" rid="c4">4</xref></sup> = 16 consortia which can be assembled with species 1 to 4: in the first column, as explained before, we have 0000, 0001, 0010, 0011, 0100, 0101, 0110, and 0111 (decimal numbers 0 to 7); while in the second column we now have 1000, 1001, 1010, 1011, 1100, 1101, 1110, and 1111 (decimal numbers 8 to 15, <xref rid="fig1" ref-type="fig">Figure 1B</xref>). We can next duplicate each of these 16 consortia, pipetting the first and second columns of the plate into the third and fourth columns, respectively. If we then add species 5 (10000) to each of the duplicated consortia, we generate all 2<sup><xref ref-type="bibr" rid="c5">5</xref></sup> = 32 combinations of species 1 to 5 (<xref rid="fig1" ref-type="fig">Figure 1B</xref>).</p>
<p>In what follows, we will describe how this logic can be implemented most efficiently in practice, but hopefully the reader can already intuit how to generalize this algorithm for consortia with more species. Note that for more than 6 species, multiple 96-well plates will be required: for instance, with <italic>m</italic> = 7 one could form 2<sup><xref ref-type="bibr" rid="c7">7</xref></sup> = 128 potential consortia, more than what a single 96-well plate can fit. Although we will not make use of them here, the algorithm is also generalizable for 384-well plates, as these have 16 rows. In this case, we would use the first column to assemble all consortia made up by species 1 to 4, and then proceed as described above for all subsequent species.</p>
</sec>
<sec id="s2b">
<title>Plate arrangement</title>
<p>Following the logic we just discussed, it is straightforward to notice that species 4 will be present in all wells of columns 2, 4, 6, 8… of the 96-well plate. In turn, species 5 will be present in alternating pairs of columns: 3, 4, 7, 8, 11, 12… Species 6 will be present in alternating sets of 4 columns: 5, 6, 7, 8, 13, 14, 15, 16… (<xref rid="fig1" ref-type="fig">Figure 1C</xref>). Note that 96-well plates only have 12 columns: what we here call columns 13 to 24 would in practice be columns 1 to 12 of a second 96-well plate, columns 25 to 36 would correspond to a third plate, and so on. By a similar reasoning, species 1 to 3 will be present in alternating sets of 1, 2, and 4 rows (instead of columns) respectively (<xref rid="fig1" ref-type="fig">Figure 1C</xref>). In summary, we have that species <italic>k</italic> will be present in:</p>
<p>Species <italic>k</italic> present in:
<disp-formula id="eqn2">
<graphic xlink:href="592148v1_eqn2.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
Conveniently, this arrangement makes it so consortia are located in order from top to bottom and from left to right within the plate(s): the first column contains the consortia corresponding to the binary representations of decimal integers 0 (00000) to 7 (00111), the second column corresponds to decimal integers 8 (01000) to 15 (01111), the third column to decimal integers 16 (10000) to 23 (10111), and so on.</p>
</sec>
<sec id="s2c">
<title>Homogenizing species’ densities across consortia</title>
<p>As we just saw, it would be possible to form all combinations of <italic>m</italic> species simply by pipetting each one of them rowwise (for species 1 to 3) or column-wise (for species 4 to <italic>m</italic>) in their corresponding positions (<xref ref-type="disp-formula" rid="eqn2">equation 2</xref>) with the aid of multichannel pipettes. There is, however, one important caveat: if we pipette equal volumes of each species’ monocultures, we will end up with variable volumes across wells. As an example, if we pipette a volume <italic>v</italic><sub>0</sub> of each monoculture, we will have a volume of 2<italic>v</italic><sub>0</sub> in well D01 of the 96-well plate (where consortium 011 is located), but a volume of 3<italic>v</italic><sub>0</sub> in well H01 (where consortium 111 is located). Species 1 is present in both of these example consortia at the same total population size, but at different population densities differing by a factor of 2/3.</p>
<p>Often, we may want the density of each species to be consistent across consortia. To achieve this, we can pipette additional liquid (sterile water, growth medium, saline buffer…) into each well in order to compensate for the differences in volume. Note that, prior to this density homogenization step, the maximum volume in a well would be <italic>mv</italic><sub>0</sub>, corresponding to the consortium with all <italic>m</italic> species. This naturally also corresponds to the consortium where each of the individual species is present at the lowest population density. In every other consortium (say, consortium <italic>c</italic>), the volume of buffer (which we denote <italic>v</italic><sub>B</sub> (<italic>c</italic>)) that we would need to add in order to reach this minimum population density is given by
<disp-formula id="eqn3">
<graphic xlink:href="592148v1_eqn3.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
where <italic>H</italic> (<italic>c</italic>) represents the Hamming weight of the binary representation of consortium <italic>c</italic>. The Hamming weight of a binary number is the number of ones in its representation, for instance, <italic>H</italic> (0000) = 0, <italic>H</italic> (0010) = 1, <italic>H</italic> (1111) = 4, etc. Thus, <italic>H</italic> (<italic>c</italic>) simply counts the number of species present in consortium <italic>c</italic>.</p>
<p>In practice, we do not need to manually pipette the buffer well-by-well. The convenient arrangement of the plate allows us to streamline this process. In what follows, we use <italic>i</italic> and <italic>j</italic> as the row and column indexes of the plate (from top to bottom and from left to right, respectively). For instance, well C02 (containing consortium 1010) would correspond to <italic>i</italic> = 3 and <italic>j</italic> = 2. As a reminder, we are considering that <italic>j</italic> = 13 to 24 correspond to columns 1-12 of a second 96-well plate, <italic>j</italic> = 25 to 36 correspond to a third plate, etc.</p>
<p>In order to streamline the pipetting of buffer, it would be convenient to find an expression for <italic>H</italic> (<italic>c</italic>) in terms of the positional indexes <italic>i</italic> and <italic>j</italic>. Now, due to the particular arrangement of consortia in the plate, we can divide the binary representation of a consortium <italic>c</italic> into two. First, the right-most three bits of <italic>c</italic> are determined by the row in which it is located. For instance, all consortia in row 7 will always have a binary representation ending in 110, independently of the column in which they appear. In general, the three rightmost digits of <italic>c</italic> will be equal to <italic>B</italic> (<italic>i</italic> − 1), the binary representation of <italic>I</italic> − 1 with <italic>i</italic> being the index of the row where consortium <italic>c</italic> is located. Similarly, the leftmost <italic>m</italic> − 3 bits of <italic>c</italic> will depend only on the column, in the following way: take a column <italic>j</italic> and ignore the three rightmost digits; then the binary representation of all consortia in that column will be the same, and equal to <italic>B</italic> (<italic>j</italic> − 1). For instance, with <italic>m</italic> = 8, the binary representation of all consortia in column 4 is 00011<italic>x</italic><sub>3</sub><italic>x</italic><sub>2</sub><italic>x</italic><sub>1</sub> — the last three bits may be 0 or 1 depending on the specific well, but the first five bits are common to all wells in the column. Therefore, in order to calculate the Hamming weight of a given consortium, we just need to sum the Hamming weight of the row and the Hamming weight of the column:
<disp-formula id="eqn4">
<graphic xlink:href="592148v1_eqn4.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
We can use <xref ref-type="disp-formula" rid="eqn4">equation 4</xref> to rewrite <xref ref-type="disp-formula" rid="eqn3">equation 3</xref> in terms of the positional indexes <italic>i</italic> and <italic>j</italic>. After some algebra, we arrive at
<disp-formula id="eqn5">
<graphic xlink:href="592148v1_eqn5.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
While terms in this equation could be arranged in a more compact form, <xref ref-type="disp-formula" rid="eqn5">equation 5</xref> as it is allows us to implement the buffer pipetting in a very efficient way: We can start by pipetting liquid buffer column-wise (a volume <italic>v</italic><sub>0</sub> [<italic>m</italic> − 3 − <italic>H</italic> (<italic>B</italic> (<italic>j</italic> −1))] into every well of column <italic>j</italic>). We can then pipette the buffer row-wise, pipetting a volume <italic>v</italic><sub>0</sub> [3 −<italic>H</italic> (<italic>B</italic> (<italic>i</italic>− 1))] into every well of row <italic>i</italic>. Furthermore, the row-wise buffer pipetting can be bypassed if we homogenize the densities of the starting consortia formed with species 1 to 3, as we explain in detail in the Supplementary Methods (section “Full protocol description for <italic>m</italic> = 8 species”).</p>
</sec>
</sec>
<sec id="s3">
<title>Results</title>
<sec id="s3a">
<title>Proof of concept: construction of colorant combinations</title>
<p>As a first demonstration of the method, and to establish its feasibility and accuracy, we used commercial food colorants and temperas to build all 256 combinations made up from eight colors. We diluted these colorants in water such that all of them had comparable maximum absorbances in the range from 380 nm to 780 nm. Each color exhibits a different absorbance spectrum in this range (<xref rid="fig2" ref-type="fig">Figure 2A</xref>).</p>
<fig id="fig2" position="float" fig-type="figure">
<label>Figure 2.</label>
<caption><title>Full factorial construction of synthetic colorant combinations.</title>
<p>(<bold>A</bold>) We consider a set of eight synthetic colorants, each of which exhibits a different absorbance spectrum in the range 380-780 nm. (<bold>B</bold>) As an example, we show the empirically measured absorbance spectrum (solid black line) for the combination of colorants 1, 3, and 8 (10000101). The dashed black line represents the additive expectation, i.e., the sum of the spectra of the three constituent colorants (colored dashed lines). (<bold>C</bold>) Relative deviation between the empirical spectrum and the additive expectation (see <xref ref-type="disp-formula" rid="eqn6">equation 6</xref>) for the example combination 10000101 (left) and for all mixtures of 2 or more colorants (right). Relative errors were only computed when the true absorbance was above 0.1 A.U..</p></caption>
<graphic xlink:href="592148v1_fig2.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<p>Using synthetic colorants to test our protocol has various advantages. First, color differences are clearly visible to the naked eye, making it easy to keep track of the location of each colorant. Second, we do not expect these colorants to interact with one another, or to do so very weakly. This means that the absorbance spectrum of any combination of colorants may be reasonably expected to match the sum of the individual spectra of each colorant. Therefore, the magnitude of the deviations between an empirical spectrum and this additive expectation (<xref rid="fig2" ref-type="fig">Figure 2B</xref>) can be used to estimate an upper bound for the pipetting error of the protocol. We can obtain an estimation of the accuracy of our protocol by examining these deviations.</p>
<p>We followed the protocol described above, setting <italic>m</italic> = 8 and <italic>v</italic><sub>0</sub> = 25 μL (a detailed step-by-step protocol for these parameters is given in the Supplementary File protocol 8species 25uL.txt), to assemble all 256 color combinations. The absorbance spectrum of each combination was quantified using a MultiSkan SkyHigh plate reader (Thermo Scientific). The implementation of the protocol required three 96-well plates, 8 Falcon tubes, an 8-channel pipette and a 12-channel pipette. Completing the whole protocol took a single experimentalist less than an hour. <xref rid="figS1" ref-type="fig">Figure S1</xref> shows the three 96-well plates at six different steps of the protocol.</p>
<p><xref rid="fig2" ref-type="fig">Figure 2B</xref> shows the absorbance spectrum for an example colorant mixture (10000101), comparing it to the additive expectation that its three constituent colorants (1, 3, and 8) do not interact. We estimated the pipetting error of the protocol as the relative deviation (denoted δ) between the empirical spectra and the additive expectations at all wavelengths (<xref rid="fig2" ref-type="fig">Figure 2B</xref>), that is:
<disp-formula id="eqn6">
<graphic xlink:href="592148v1_eqn6.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
where we have denoted <italic>Abs</italic><sub><italic>λ</italic></sub> (<italic>c</italic>) the absorbance at a wavelength <italic>λ</italic> (between 380 and 780 nm) of the colorant mixture <italic>c</italic>, and <inline-formula><inline-graphic xlink:href="592148v1_inline2.gif" mime-subtype="gif" mimetype="image"/></inline-formula> (<italic>c</italic>) the additive expectation (i.e., the sum of the absorbances of each individual constituent colorant).</p>
<p>In <xref rid="fig2" ref-type="fig">Figure 2C</xref> we show the distribution of relative deviations for the example mixture 10000101 at all wavelengths (left), as well as the distribution corresponding to all mixtures at all wavelengths (right). <xref rid="figS2" ref-type="fig">Figure S2</xref> shows the ab-solute deviations <inline-formula><inline-graphic xlink:href="592148v1_inline3.gif" mime-subtype="gif" mimetype="image"/></inline-formula> for all mixtures at all wavelengths (median absolute deviation ∼ 0.025 A.U.). We found that relative deviations were generally small (<xref rid="fig2" ref-type="fig">Figure 2C</xref>: mean ∼ 5.8 %, median ∼ 4.9 %). We also found that the magnitude of these deviations did not increase with the number of colorants in a mixture (<xref rid="figS3" ref-type="fig">Figure S3</xref>), suggesting that the precision of our protocol is not compromised by the size of the set from which mixtures are assembled. Deviations were also roughly similar in magnitude across all wavelengths (<xref rid="figS4" ref-type="fig">Figure S4</xref>).</p>
</sec>
<sec id="s3b">
<title>Full factorial design of synthetic bacterial consortia</title>
<p>To illustrate the potential applications of our protocol for finding optimal microbial consortia and quantitatively studying the complexity of microbial interactions, we adopted a collection of eight <italic>Pseudomonas aeruginosa</italic> strains obtained from a previous experiment. <sup><xref ref-type="bibr" rid="c33">33</xref>–<xref ref-type="bibr" rid="c35">35</xref></sup> Monocultures of each of these strains grown in liquid LB medium exhibit differences in their absorbance spectra (<xref rid="fig3" ref-type="fig">Figure 3A</xref>). Unlike the synthetic colorants, bacterial strains can be expected to interact with one another through a variety of potential mechanisms, including competition for limiting resources or facilitation which may lead to changes in the population sizes of different species. <sup><xref ref-type="bibr" rid="c15">15</xref>,<xref ref-type="bibr" rid="c19">19</xref></sup></p>
<fig id="fig3" position="float" fig-type="figure">
<label>Figure 3.</label>
<caption><title>Co-culturing combinations of bacterial isolates.</title>
<p>(<bold>A</bold>) We consider eight <italic>P. aeruginosa</italic> strains obtained from a previous experiment. <sup><xref ref-type="bibr" rid="c33">33</xref>–<xref ref-type="bibr" rid="c35">35</xref></sup> Here we represent the absorbance spectra of the eight monocultures of these strains. Solid lines and shaded areas represent means and standard deviations across three independent biological replicates. (<bold>B</bold>) We followed our protocol to assemble different combinations of strains (in this example, the consortium formed by strains 2, 3, and 8, represented as 10000110). Each consortium was diluted into fresh medium by a factor of 1:400 and allowed to re-grow for 40 h, after which the absorbance spectrum of the culture was measured. Solid black line: empirical spectrum of consortium 10000110 (mean of three independent biological replicates, shaded region represents the standard deviation across them). Dashed black line: additive expectation if the three strains did not interact. Dashed colored lines: monoculture spectra of the three constituent strains.</p></caption>
<graphic xlink:href="592148v1_fig3.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<p>We first cultured each strain separately by resuspending a single colony into 15 mL of LB medium in 50 mL conical Falcon tubes. Strains were allowed to grow to carrying capac-ity for 24 h at 37 °C with no agitation. Then, monocultures were fully homogenized and used to assemble all 256 strain combinations following the same protocol described before (detailed steps can be found in the Supplementary Methods, section “Full protocol description for <italic>m</italic> = 8 species”). Phosphate buffer saline (1 × PBS) was used to adjust volumes/densities as indicated in the protocol. After completing our protocol (which took a single experimentalist less than one hour), each consortium was inoculated into fresh LB medium (0.5 μL of inoculum into 200 μL of medium for a dilution factor of 1:400; note that our protocol design makes it so this is equivalent to inoculating 0.5 μL/8 = 0.0625 μL of each strain’s monoculture into the fresh medium) in 96-well plates. Samples were incubated still at 37 °C for 40 h, after which the absorbance spectrum of each sample was quantified in the same plate reader we used before.</p>
<p><xref rid="fig3" ref-type="fig">Figure 3B</xref> shows the absorbance spectrum for one example consortium after the 40 h incubation period. Consistent with our reasoning, this spectrum deviates strongly from the additive expectation (sum of each monoculture spectrum), indicating a prominent effect of interactions between strains. <xref rid="fig4" ref-type="fig">Figure 4</xref> shows the spectra for all consortia with two or more members, where deviations from the additive expectation are similarly large.</p>
<fig id="fig4" position="float" fig-type="figure">
<label>Figure 4.</label>
<caption><title>Full factorial design of synthetic microbial consortia.</title>
<p>We represent the absorbance spectra of all consortia (of 2 or more strains) that can be formed with our library of eight <italic>P. aeruginosa</italic> isolates. As in <xref rid="fig3" ref-type="fig">Figure 3B</xref>, solid black lines and shaded areas represent the mean and standard deviation of the co-culture spectrum across three biological replicates; the dashed colored lines represent the individual monoculture spectra; and dashed black lines represent the sum of these individual spectra.</p></caption>
<graphic xlink:href="592148v1_fig4.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<p>Because we have constructed all possible assemblages, we can systematically investigate the interactions between species and how they may result in different community-level properties and functions. As an illustration, we focus on the absorbance at 600 nm (<italic>Abs</italic><sub>600</sub>), a metric of total biomass in our cultures. We found a non-monotonic relationship between community biomass and community richness (number of strains), peaking at 3 strains (<xref rid="fig5" ref-type="fig">Figure 5A</xref>). Our protocol allows us not only to characterize this type of broad-scale relationships between diversity and function, but also to identify specific high-performing consortia (<xref rid="fig5" ref-type="fig">Figure 5B</xref>). In our experiment, the consortium with the highest biomass contains only three strains (consortium 00001101, containing strains 1, 3, and 4). In <xref rid="fig5" ref-type="fig">Figure 5C</xref> we represent the full map between the composition and function (biomass) of all 256 consortia in our experiment (i.e., the <italic>community structure-function landscape</italic> <sup><xref ref-type="bibr" rid="c15">15</xref>,<xref ref-type="bibr" rid="c16">16</xref>,<xref ref-type="bibr" rid="c19">19</xref>,<xref ref-type="bibr" rid="c22">22</xref></sup>).</p>
<fig id="fig5" position="float" fig-type="figure">
<label>Figure 5.</label>
<caption><title>Full factorial design of microbial consortia enables the dissection of microbial interactions.</title>
<p>We focus on the absorbance at 600 nm as a proxy for the biomass of a consortium. (<bold>A</bold>) Consortium function (biomass quantified as <italic>Abs</italic><sub>600</sub>) against the number of strains in the consortium. Dots and error bars represent the average and standard deviation across all consortia with a same number of strains. (<bold>B</bold>) Top three consortia exhibiting the highest biomass across all 2<sup><xref ref-type="bibr" rid="c8">8</xref></sup> combinations. (<bold>C</bold>) We represent the function (biomass; values shown are averages across three biological replicates) for the consortia assembled using our protocol. Nodes correspond to the different consortia, edges connect consortia that differ in the presence of a single particular strain. (<bold>D</bold>) Detail showing the effect of including strain 1, strain 2, and both, in a background consortium (in this example, the background corresponds to consortium 11001000). Red: the <italic>functional effect</italic> of strain 1 is quantified as the difference in function between the background consortium and the consortium resulting from the inclusion of that strain. Green: the <italic>functional interaction</italic> between strains 1 and 2 in this particular background is quantified as the difference between the additive expectation (dashed line) and the empirical value for the function of the consortium containing both strains, as explained in the main text. (<bold>E</bold>) Detail of the functional landscape corresponding to the three strains that are part of the overall highest-biomass consortium (00001101). Inset: functional interactions within this 3-strain consortium. Order 1 corresponds to the monoculture functions. Order 2 corresponds to pairwise species-by-species interactions as defined in panel D of this figure. Order 3 corresponds to the third-order interaction between these strains, defined as the deviation between the empirical function of the trio with respect to the null expectation from the additive and pairwise interactions. <sup><xref ref-type="bibr" rid="c19">19</xref>,<xref ref-type="bibr" rid="c29">29</xref> <xref ref-type="bibr" rid="c19">19</xref>,<xref ref-type="bibr" rid="c29">29</xref></sup> (<bold>F</bold>) Distributions of functional effects of the eight strains used in our experiments across all of the 128 backgrounds where each may be included. (<bold>G</bold>) Distributions of functional interactions between all pairs of strains across all backgrounds where both may be included. (<bold>H</bold>) Fraction of functional variance due to interactions of different orders (order 1 corresponds to the additive effects of each strain). The fractions were computed as explained in the Supplementary Methods. <sup><xref ref-type="bibr" rid="c30">30</xref></sup> Dashed line is the cumulative sum. (<bold>I</bold>) We have recently shown that the functional effect of a strain is often predictable from the function of the background consortium through simple, linear regressions. <sup><xref ref-type="bibr" rid="c10">10</xref></sup> For the eight <italic>P. aeruginosa</italic> strains in our experiment, linear regressions do an excellent job at linking these functional effects with the function of the background consortia.</p></caption>
<graphic xlink:href="592148v1_fig5.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<p>From this type of data, one can readily quantify the sign and magnitude of strain interactions with respect to the community-level function of interest, in our case total biomass. In <xref rid="fig5" ref-type="fig">Figure 5D</xref> we show that the inclusion of strain 1 in a given consortium (which we refer to as an <italic>ecological background</italic>) results in an increase in biomass, and the same is true for the inclusion of strain 2. We call the difference in function between two consortia with and without a given focal strain as the <italic>functional effect</italic> of that strain in that ecological background. <sup><xref ref-type="bibr" rid="c10">10</xref></sup> If two strains did not interact, we may expect that including both of them in a same ecological background would result in a change in function equal to the sum of their two individual functional effects (see <xref rid="fig5" ref-type="fig">Figure 5D</xref>, dashed line represents this additive expectation). If the empirical function deviates from the additive expectation, the two strains engage in a <italic>functional interaction</italic> (denoted as ϵ in <xref rid="fig5" ref-type="fig">Figure 5D</xref>) in that particular ecological background. <sup><xref ref-type="bibr" rid="c10">10</xref>,<xref ref-type="bibr" rid="c19">19</xref></sup></p>
<p>Following this definition, one could dissect the interaction structure of all eight <italic>P. aeruginosa</italic> strains in our system. As an illustration, in <xref rid="fig5" ref-type="fig">Figure 5E</xref> we show the community-function landscape corresponding to all consortia that could be formed solely with strains 1, 3, and 4, i.e., the trio that maximizes biomass yield (see <xref rid="fig5" ref-type="fig">Figure 5B-C</xref> indicating that the maximum <italic>Abs</italic><sub>600</sub> is achieved by consortium 00001101). Although pairwise interactions are negative within this consortium, the three strains engage in a positive third-order functional interaction (see inset in <xref rid="fig5" ref-type="fig">Figure 5E</xref>) which rescues the function of the trio. This observation highlights the potential of full factorial design to interrogate and generate hy-potheses with respect to the mechanisms that govern the emergence of community-level functions, particularly (but not only) in high-performing consortia.</p>
<p>Beyond this particular consortium, in <xref rid="fig5" ref-type="fig">Figure 5F</xref> we represent the distributions of functional effects of all eight strains in our library across all of the 128 ecological backgrounds where they may be included. We found that the functional effects of all eight <italic>P. aeruginosa</italic> strains exhibit large variation in sign and magnitude, indicating that the contribution of a strain to the total community biomass largely depends on the presence or absence of additional community members in the ecological background. This indicates a prominent role of inter-strain interactions in this system.</p>
<p>In <xref rid="fig5" ref-type="fig">Figure 5G</xref> we represent the magnitude of the functional interactions between all pairs of strains <italic>i</italic> and <italic>j</italic> (denoted <italic>ϵ</italic><sub><italic>ij</italic></sub>) across all the ecological backgrounds where the two may be included. We found that these pairwise interactions are highly variable across backgrounds. Pairwise interactions being sensitive to the presence or absence of additional community members can be interpreted as a signature of higher-order ecological interactions (HOIs). <sup><xref ref-type="bibr" rid="c19">19</xref>,<xref ref-type="bibr" rid="c36">36</xref>,<xref ref-type="bibr" rid="c37">37</xref></sup> By this definition, HOIs do exist in our particular experimental system (as evidenced by the variation in the pairwise interaction terms <italic>ϵ</italic><sub><italic>ij</italic></sub> shown in <xref rid="fig5" ref-type="fig">Figure 5G</xref>); however, most of the variance in community biomass can be explained by low-order interactions (<xref rid="fig5" ref-type="fig">Figure 5H</xref>, the fraction of functional variance attributed to pairwise and higher-order interactions was computed as described elsewhere; <sup><xref ref-type="bibr" rid="c30">30</xref></sup> see Supplementary Methods and <xref rid="figS5" ref-type="fig">Figure S5</xref> for details). This has also been shown to be the case for other datasets of microbial community function. <sup><xref ref-type="bibr" rid="c30">30</xref></sup></p>
<p>We have recently shown that the aggregate effect of pairwise and higher-order microbial interactions often results in emergent statistical patterns, which make it so the functional effect of a strain may be predictable from the function of the ecological background where that strain is included. <sup><xref ref-type="bibr" rid="c10">10</xref></sup> The relationships between the functional effect of a strain and the function of the background community can often be captured through simple linear models, which mirror the patterns of <italic>global epistasis</italic> commonly reported in genetics. This phenomenon is also observed in the particular set of <italic>P. aeruginosa</italic> strains that we analyzed here (<xref rid="fig5" ref-type="fig">Figure 5I</xref>, <italic>R</italic><sup><xref ref-type="bibr" rid="c2">2</xref></sup> averages 0.54), each of which exhibits a different relationship between its functional effect and the background function. Adopting the same analytical approach we used in previous work, <sup><xref ref-type="bibr" rid="c10">10</xref></sup> we find that such strong global epistasis patterns deviate from the null expectation of a random community-function landscape (<xref rid="figS6" ref-type="fig">Figure S6</xref>).</p>
<p>Together, these analyses illustrate how a full factorial construction of microbial consortia may allow us both to identify optimal assemblages and to dissect how the interplay of pairwise and higher-order interactions shape community-level properties and functions. To our knowledge, the experiments we have just reported represent one of barely a handful of datasets consisting of every potential combination from a library of strains. The fact that it was done in under an hour per replicate gives a sense of the potential our design has to dramatically expand the number of empirical community-function landscapes in the literature.</p>
</sec>
</sec>
<sec id="s4">
<title>Discussion</title>
<p>We have introduced a rapid, simple, and inexpensive protocol for assembling all possible combinations of a given set of species using basic laboratory equipment such as a multichannel pipette and 96-well plates. Our protocol enables a single individual to construct all 256 possible consortia from a pool of eight species within an hour, and can be easily expanded to even higher-diversity libraries. Even without the aid of specialized equipment such as robotic liquid handlers, this procedure will make it possible to efficiently generate all communities with up to 10-12 species.</p>
<p>For laboratories equipped with robotic liquid handlers, the protocol can be easily expanded to accommodate larger libraries, with the main limitation being the amount of plasticware that will be used. The rationale underlying our assembly protocol allows for flexible implementation depending on the specific needs of each laboratory (e.g., it is straightfor-ward to generalize for 384-well plates). Our implementation also has the advantage of keeping pipetting error minimal and independent of consortium size, as we showed by creating all 256 color combinations from eight synthetic colorants. To facilitate automation and adaptation to the needs of other groups, we provide an accompanying R script to facilitate the generation of comprehensive step-by-step protocols for any number of species and pipetting volumes.</p>
<p>We have demonstrated the utility of this protocol in synthetic microbial ecology by generating all possible communities from a collection of eight <italic>P. aeruginosa</italic> strains and quantifying the strength of pairwise and higher-order functional interactions between them. Our experiment illustrates how the full factorial design of microbial consortia enables for the full characterization of ecological community-function landscapes, which can provide valuable insights into the emergence of community-level functions (such as, but not limited to, biomass productivity, as we studied here). The entire experiment, from spreading colonies to measuring community function, could be completed from beginning to end by a single experimentalist in less than one working week, and most of that time was taken by waiting for cell growth.</p>
<p>Although initially designed for building combinations of microbial species, our protocol can be readily applied for creating combinations of any soluble (or at least homogeneously distributed) compounds beyond microorganisms. For instance, it could be employed to generate all possible media compositions from a set of resources, all possible combinations of a set of antibiotics, toxins, or even bacteriophages, as well as mixed combinations thereof. We therefore anticipate that our methodology will find extensive applications and utility across diverse fields such as microbiology, ecology, evolution, and biotechnology.</p>
</sec>
<sec id="d1e1233" sec-type="supplementary-material">
<title>Supporting information</title>
<supplementary-material id="d1e1322">
<label>Supplemental Files</label>
<media xlink:href="supplements/592148_file03.zip"/>
</supplementary-material>
</sec>
</body>
<back>
<ack>
<title>Acknowledgements</title>
<p>We thank Sara Hernando-Amado for providing the <italic>P. aeruginosa</italic> strains used in our experiment. A.S. and J.D.-C. acknowledge support from grant PID2021-125478NAI00 funded by MCIN/AEI/10.13039/501100011033 and by “ERDF: A way of making Europe.” P.C. acknowledges support from grants PID2022-142185NB-C21 and PID2022-142185NB-C22 funded by MCIN/AEI/10.13039/501100011033 and by “ERDF: A way of making Europe.” A.S. acknowledges funding by the European Union (ERC, <italic>ECOPROSPECTOR</italic>, 101088469). Views and opinions expressed are however those of the author(s) only and do not necessarily reflect those of the European Union or the European Research Council. Neither the European Union nor the granting authority can be held responsible for them.</p>
</ack>
<sec id="s5">
<title>Data and code availability</title>
<p>All original data and code for analysis is available at <ext-link ext-link-type="uri" xlink:href="http://github.com/jdiazc9/full_factorial_design">github.com/jdiazc9/full_factorial_design</ext-link>. This repository also contains the R script for the automatic generation of assembly protocols with custom parameters.</p>
</sec>
<sec id="s6">
<title>Competing interests</title>
<p>The authors declare no competing interests.</p>
</sec>
<ref-list>
<title>References</title>
<ref id="c1"><label>1.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Brenner</surname> <given-names>K</given-names></string-name>, <string-name><surname>You</surname> <given-names>L</given-names></string-name> and <string-name><surname>Arnold</surname> <given-names>FH</given-names></string-name></person-group> (<year>2008</year>). <article-title>Engineering microbial consortia: a new frontier in synthetic biology</article-title>. <source>Trends in Biotechnology</source> <volume>26</volume>(<issue>9</issue>):<fpage>483</fpage>–<lpage>489</lpage></mixed-citation></ref>
<ref id="c2"><label>2.</label><mixed-citation publication-type="preprint"><person-group person-group-type="author"><string-name><surname>Arias-Sanchez</surname> <given-names>FI</given-names></string-name>, <string-name><surname>Vessman</surname> <given-names>B</given-names></string-name>, <string-name><surname>Haym</surname> <given-names>A</given-names></string-name>, <string-name><surname>Alberti</surname> <given-names>G</given-names></string-name> and <string-name><surname>Mitri</surname> <given-names>S</given-names></string-name></person-group> (<year>2023</year>). <article-title>Artificial selection optimizes pollutant-degrading bacterial communities</article-title>. <source>bioRxiv</source> </mixed-citation></ref>
<ref id="c3"><label>3.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Minty</surname> <given-names>JJ</given-names></string-name>, <string-name><surname>Singer</surname> <given-names>ME</given-names></string-name>, <string-name><surname>Scholz</surname> <given-names>SA</given-names></string-name>, <string-name><surname>Bae</surname> <given-names>CH</given-names></string-name>, <string-name><surname>Ahn</surname> <given-names>JH</given-names></string-name>, <string-name><surname>Foster</surname> <given-names>CE</given-names></string-name>, <string-name><surname>Liao</surname> <given-names>JC</given-names></string-name> and <string-name><surname>Lin</surname> <given-names>XN</given-names></string-name></person-group> (<year>2013</year>). <article-title>Design and characterization of synthetic fungal-bacterial consortia for direct production of isobutanol from cellulosic biomass</article-title>. <source>Proceedings of the National Academy of Sciences</source> <volume>110</volume>(<issue>36</issue>):<fpage>14592</fpage>–<lpage>14597</lpage></mixed-citation></ref>
<ref id="c4"><label>4.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Senne de Oliveira Lino</surname> <given-names>F</given-names></string-name>, <string-name><surname>Bajic</surname> <given-names>D</given-names></string-name>, <string-name><surname>Vila</surname> <given-names>JCC</given-names></string-name>, <string-name><surname>Sánchez</surname> <given-names>A</given-names></string-name> and <string-name><surname>Sommer</surname> <given-names>MOA</given-names></string-name></person-group> (<year>2021</year>). <article-title>Complex yeast–bacteria interactions affect the yield of industrial ethanol fermentation</article-title>. <source>Nature Communications</source> <volume>12</volume>(<issue>1</issue>):<fpage>1498</fpage></mixed-citation></ref>
<ref id="c5"><label>5.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Wang</surname> <given-names>EX</given-names></string-name>, <string-name><surname>Ding</surname> <given-names>MZ</given-names></string-name>, <string-name><surname>Ma</surname> <given-names>Q</given-names></string-name>, <string-name><surname>Dong</surname> <given-names>XT</given-names></string-name> and <string-name><surname>Yuan</surname> <given-names>YJ</given-names></string-name></person-group> (<year>2016</year>). <article-title>Reorganization of a synthetic microbial consortium for one-step vitamin C fermentation</article-title>. <source>Microbial Cell Factories</source> <volume>15</volume>:<fpage>1</fpage>–<lpage>11</lpage></mixed-citation></ref>
<ref id="c6"><label>6.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Wang</surname> <given-names>Y</given-names></string-name>, <string-name><surname>Liu</surname> <given-names>L</given-names></string-name>, <string-name><surname>Jin</surname> <given-names>Z</given-names></string-name> and <string-name><surname>Zhang</surname> <given-names>D</given-names></string-name></person-group> (<year>2021</year>). <article-title>Microbial cell factories for green production of vitamins</article-title>. <source>Frontiers in Bioengineering and Biotechnology</source> <volume>9</volume>:<fpage>661562</fpage></mixed-citation></ref>
<ref id="c7"><label>7.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Du</surname> <given-names>Y</given-names></string-name>, <string-name><surname>Yang</surname> <given-names>B</given-names></string-name>, <string-name><surname>Yi</surname> <given-names>Z</given-names></string-name>, <string-name><surname>Hu</surname> <given-names>L</given-names></string-name> and <string-name><surname>Li</surname> <given-names>M</given-names></string-name></person-group> (<year>2020</year>). <article-title>Engineering Saccharomyces cerevisiae coculture platform for the production of flavonoids</article-title>. <source>Journal of Agricultural and Food Chemistry</source> <volume>68</volume>(<issue>7</issue>):<fpage>2146</fpage>–<lpage>2154</lpage></mixed-citation></ref>
<ref id="c8"><label>8.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Xu</surname> <given-names>P</given-names></string-name>, <string-name><surname>Marsafari</surname> <given-names>M</given-names></string-name>, <string-name><surname>Zha</surname> <given-names>J</given-names></string-name> and <string-name><surname>Koffas</surname> <given-names>M</given-names></string-name></person-group> (<year>2020</year>). <article-title>Microbial coculture for flavonoid synthesis</article-title>. <source>Trends in Biotechnology</source> <volume>38</volume>(<issue>7</issue>):<fpage>686</fpage>–<lpage>688</lpage></mixed-citation></ref>
<ref id="c9"><label>9.</label><mixed-citation publication-type="preprint"><person-group person-group-type="author"><string-name><surname>Oliveira</surname> <given-names>R</given-names></string-name>, <string-name><surname>Pandey</surname> <given-names>B</given-names></string-name>, <string-name><surname>Lee</surname> <given-names>K</given-names></string-name>, <string-name><surname>Yousef</surname> <given-names>M</given-names></string-name>, <string-name><surname>Chen</surname> <given-names>RY</given-names></string-name>, <string-name><surname>Triebold</surname> <given-names>C</given-names></string-name>, <string-name><surname>McSpadden</surname> <given-names>E</given-names></string-name>, <string-name><surname>Haro</surname> <given-names>F</given-names></string-name>, <string-name><surname>Aksianiuk</surname> <given-names>V</given-names></string-name> <etal>et al.</etal></person-group> (<year>2024</year>). <article-title>Statistical design of a synthetic microbiome that clears a multi-drug resistant gut pathogen</article-title>. <source>bioRxiv</source> </mixed-citation></ref>
<ref id="c10"><label>10.</label><mixed-citation publication-type="preprint"><person-group person-group-type="author"><string-name><surname>Diaz-Colunga</surname> <given-names>J</given-names></string-name>, <string-name><surname>Skwara</surname> <given-names>A</given-names></string-name>, <string-name><surname>Vila</surname> <given-names>J</given-names></string-name>, <string-name><surname>Bajic</surname> <given-names>D</given-names></string-name> and <string-name><surname>Sanchez</surname> <given-names>A</given-names></string-name></person-group> (<year>2022</year>). <article-title>Global epistasis and the emergence of ecological function</article-title>. <source>bioRxiv</source> </mixed-citation></ref>
<ref id="c11"><label>11.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Angeles-de Paz</surname> <given-names>G</given-names></string-name>, <string-name><surname>Ledezma-Villanueva</surname> <given-names>A</given-names></string-name>, <string-name><surname>Robledo-Mahón</surname> <given-names>T</given-names></string-name>, <string-name><surname>Pozo</surname> <given-names>C</given-names></string-name>, <string-name><surname>Calvo</surname> <given-names>C</given-names></string-name>, <string-name><surname>Aranda</surname> <given-names>E</given-names></string-name> and <string-name><surname>Purswani</surname> <given-names>J</given-names></string-name></person-group> (<year>2023</year>). <article-title>Assembled mixed co-cultures for emerging pollutant removal using native microorganisms from sewage sludge</article-title>. <source>Chemosphere</source> <volume>313</volume>:<fpage>137472</fpage></mixed-citation></ref>
<ref id="c12"><label>12.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Kuebbing</surname> <given-names>SE</given-names></string-name>, <string-name><surname>Classen</surname> <given-names>AT</given-names></string-name>, <string-name><surname>Sanders</surname> <given-names>NJ</given-names></string-name> and <string-name><surname>Simberloff</surname> <given-names>D</given-names></string-name></person-group> (<year>2015</year>). <article-title>Above-and below-ground effects of plant diversity depend on species origin: an experimental test with multiple invaders</article-title>. <source>New Phytologist</source> <volume>208</volume>(<issue>3</issue>):<fpage>727</fpage>–<lpage>735</lpage></mixed-citation></ref>
<ref id="c13"><label>13.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Langenheder</surname> <given-names>S</given-names></string-name>, <string-name><surname>Bulling</surname> <given-names>MT</given-names></string-name>, <string-name><surname>Solan</surname> <given-names>M</given-names></string-name> and <string-name><surname>Prosser</surname> <given-names>JI</given-names></string-name></person-group> (<year>2010</year>). <article-title>Bacterial biodiversity-ecosystem functioning relations are modified by environmental complexity</article-title>. <source>PLOS One</source> <volume>5</volume>(<issue>5</issue>):<fpage>e10834</fpage></mixed-citation></ref>
<ref id="c14"><label>14.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Purswani</surname> <given-names>J</given-names></string-name>, <string-name><surname>Romero-Zaliz</surname> <given-names>RC</given-names></string-name>, <string-name><surname>Martín-Platero</surname> <given-names>AM</given-names></string-name>, <string-name><surname>Guisado</surname> <given-names>IM</given-names></string-name>, <string-name><surname>González-López</surname> <given-names>J</given-names></string-name> and <string-name><surname>Pozo</surname> <given-names>C</given-names></string-name></person-group> (<year>2017</year>). <article-title>BSocial: deciphering social behaviors within mixed microbial populations</article-title>. <source>Frontiers in Microbiology</source> <volume>8</volume>:<fpage>919</fpage></mixed-citation></ref>
<ref id="c15"><label>15.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Sanchez</surname> <given-names>A</given-names></string-name>, <string-name><surname>Bajic</surname> <given-names>D</given-names></string-name>, <string-name><surname>Diaz-Colunga</surname> <given-names>J</given-names></string-name>, <string-name><surname>Skwara</surname> <given-names>A</given-names></string-name>, <string-name><surname>Vila</surname> <given-names>JC</given-names></string-name> and <string-name><surname>Kuehn</surname> <given-names>S</given-names></string-name></person-group> (<year>2023</year>). <article-title>The community-function landscape of microbial consortia</article-title>. <source>Cell Systems</source> <volume>14</volume>(<issue>2</issue>):<fpage>122</fpage>–<lpage>134</lpage></mixed-citation></ref>
<ref id="c16"><label>16.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Gould</surname> <given-names>AL</given-names></string-name>, <string-name><surname>Zhang</surname> <given-names>V</given-names></string-name>, <string-name><surname>Lamberti</surname> <given-names>L</given-names></string-name>, <string-name><surname>Jones</surname> <given-names>EW</given-names></string-name>, <string-name><surname>Obadia</surname> <given-names>B</given-names></string-name>, <string-name><surname>Korasidis</surname> <given-names>N</given-names></string-name>, <string-name><surname>Gavryushkin</surname> <given-names>A</given-names></string-name>, <string-name><surname>Carlson</surname> <given-names>JM</given-names></string-name>, <string-name><surname>Beerenwinkel</surname> <given-names>N</given-names></string-name> <etal>et al.</etal></person-group> (<year>2018</year>). <article-title>Microbiome interactions shape host fitness</article-title>. <source>Proceedings of the National Academy of Sciences</source> <volume>115</volume>(<issue>51</issue>):<fpage>E11951</fpage>–<lpage>E11960</lpage></mixed-citation></ref>
<ref id="c17"><label>17.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Clark</surname> <given-names>RL</given-names></string-name>, <string-name><surname>Connors</surname> <given-names>BM</given-names></string-name>, <string-name><surname>Stevenson</surname> <given-names>DM</given-names></string-name>, <string-name><surname>Hromada</surname> <given-names>SE</given-names></string-name>, <string-name><surname>Hamilton</surname> <given-names>JJ</given-names></string-name>, <string-name><surname>Amador-Noguez</surname> <given-names>D</given-names></string-name> and <string-name><surname>Venturelli</surname> <given-names>OS</given-names></string-name></person-group> (<year>2021</year>). <article-title>Design of synthetic human gut microbiome assembly and butyrate production</article-title>. <source>Nature Communications</source> <volume>12</volume>(<issue>1</issue>):<fpage>3254</fpage></mixed-citation></ref>
<ref id="c18"><label>18.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Eng</surname> <given-names>A</given-names></string-name> and <string-name><surname>Borenstein</surname> <given-names>E</given-names></string-name></person-group> (<year>2019</year>). <article-title>Microbial community design: methods, applications, and opportunities</article-title>. <source>Current Opinion in Biotechnology</source> <volume>58</volume>:<fpage>117</fpage>–<lpage>128</lpage></mixed-citation></ref>
<ref id="c19"><label>19.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Sanchez-Gorostiaga</surname> <given-names>A</given-names></string-name>, <string-name><surname>Bajić</surname> <given-names>D</given-names></string-name>, <string-name><surname>Osborne</surname> <given-names>ML</given-names></string-name>, <string-name><surname>Poyatos</surname> <given-names>JF</given-names></string-name> and <string-name><surname>Sanchez</surname> <given-names>A</given-names></string-name></person-group> (<year>2019</year>). <article-title>High-order interactions distort the functional landscape of microbial consortia</article-title>. <source>PLOS Biology</source> <volume>17</volume>(<issue>12</issue>):<fpage>e3000550</fpage></mixed-citation></ref>
<ref id="c20"><label>20.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Baichman-Kass</surname> <given-names>A</given-names></string-name>, <string-name><surname>Song</surname> <given-names>T</given-names></string-name> and <string-name><surname>Friedman</surname> <given-names>J</given-names></string-name></person-group> (<year>2023</year>). <article-title>Competitive interactions between culturable bacteria are highly nonadditive</article-title>. <source>eLife</source> <volume>12</volume>:<fpage>e83398</fpage></mixed-citation></ref>
<ref id="c21"><label>21.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Bergelson</surname> <given-names>J</given-names></string-name>, <string-name><surname>Kreitman</surname> <given-names>M</given-names></string-name>, <string-name><surname>Petrov</surname> <given-names>DA</given-names></string-name>, <string-name><surname>Sanchez</surname> <given-names>A</given-names></string-name> and <string-name><surname>Tikhonov</surname> <given-names>M</given-names></string-name></person-group> (<year>2021</year>). <article-title>Functional biology in its natural context: A search for emergent simplicity</article-title>. <source>eLife</source> <volume>10</volume>:<fpage>e67646</fpage></mixed-citation></ref>
<ref id="c22"><label>22.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Eble</surname> <given-names>H</given-names></string-name>, <string-name><surname>Joswig</surname> <given-names>M</given-names></string-name>, <string-name><surname>Lamberti</surname> <given-names>L</given-names></string-name> and <string-name><surname>Ludington</surname> <given-names>WB</given-names></string-name></person-group> (<year>2023</year>). <article-title>Master regulators of biological systems in higher dimensions</article-title>. <source>Proceedings of the National Academy of Sciences</source> <volume>120</volume>(<issue>51</issue>):<fpage>e2300634120</fpage></mixed-citation></ref>
<ref id="c23"><label>23.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Friedman</surname> <given-names>J</given-names></string-name>, <string-name><surname>Higgins</surname> <given-names>LM</given-names></string-name> and <string-name><surname>Gore</surname> <given-names>J</given-names></string-name></person-group> (<year>2017</year>). <article-title>Community structure follows simple assembly rules in microbial microcosms</article-title>. <source>Nature Ecology &amp; Evolution</source> <volume>1</volume>(<issue>5</issue>):<fpage>0109</fpage></mixed-citation></ref>
<ref id="c24"><label>24.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Ludington</surname> <given-names>WB</given-names></string-name></person-group> (<year>2022</year>). <article-title>Higher-order microbiome interactions and how to find them</article-title>. <source>Trends in Microbiology</source> <volume>30</volume>(<issue>7</issue>):<fpage>618</fpage>–<lpage>621</lpage></mixed-citation></ref>
<ref id="c25"><label>25.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Picot</surname> <given-names>A</given-names></string-name>, <string-name><surname>Shibasaki</surname> <given-names>S</given-names></string-name>, <string-name><surname>Meacock</surname> <given-names>OJ</given-names></string-name> and <string-name><surname>Mitri</surname> <given-names>S</given-names></string-name></person-group> (<year>2023</year>). <article-title>Microbial interactions in theory and practice: when are measurements compatible with models?</article-title> <source>Current Opinion in Microbiology</source> <volume>75</volume>:<fpage>102354</fpage></mixed-citation></ref>
<ref id="c26"><label>26.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Ansari</surname> <given-names>AF</given-names></string-name>, <string-name><surname>Acharya</surname> <given-names>NI</given-names></string-name>, <string-name><surname>Kumaran</surname> <given-names>S</given-names></string-name>, <string-name><surname>Ravindra</surname> <given-names>K</given-names></string-name>, <string-name><surname>Reddy</surname> <given-names>YB</given-names></string-name>, <string-name><surname>Dixit</surname> <given-names>NM</given-names></string-name> and <string-name><surname>Raut</surname> <given-names>J</given-names></string-name></person-group> (<year>2019</year>). <article-title>110th anniversary: high-order interactions can eclipse pairwise interactions in shaping the structure of microbial communities</article-title>. <source>Industrial &amp; Engineering Chemistry Research</source> <volume>58</volume>(<issue>51</issue>):<fpage>23508</fpage>–<lpage>23518</lpage></mixed-citation></ref>
<ref id="c27"><label>27.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Kehe</surname> <given-names>J</given-names></string-name>, <string-name><surname>Kulesa</surname> <given-names>A</given-names></string-name>, <string-name><surname>Ortiz</surname> <given-names>A</given-names></string-name>, <string-name><surname>Ackerman</surname> <given-names>CM</given-names></string-name>, <string-name><surname>Thakku</surname> <given-names>SG</given-names></string-name>, <string-name><surname>Sellers</surname> <given-names>D</given-names></string-name>, <string-name><surname>Kuehn</surname> <given-names>S</given-names></string-name>, <string-name><surname>Gore</surname> <given-names>J</given-names></string-name>, <string-name><surname>Friedman</surname> <given-names>J</given-names></string-name> <etal>et al.</etal></person-group> (<year>2019</year>). <article-title>Massively parallel screening of synthetic microbial communities</article-title>. <source>Proceedings of the National Academy of Sciences</source> <volume>116</volume>(<issue>26</issue>):<fpage>12804</fpage>–<lpage>12809</lpage></mixed-citation></ref>
<ref id="c28"><label>28.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Morin</surname> <given-names>MA</given-names></string-name>, <string-name><surname>Morrison</surname> <given-names>AJ</given-names></string-name>, <string-name><surname>Harms</surname> <given-names>MJ</given-names></string-name> and <string-name><surname>Dutton</surname> <given-names>RJ</given-names></string-name></person-group> (<year>2022</year>). <article-title>Higher-order interactions shape microbial interactions as microbial community complexity increases</article-title>. <source>Scientific Reports</source> <volume>12</volume>(<issue>1</issue>):<fpage>22640</fpage></mixed-citation></ref>
<ref id="c29"><label>29.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Sanchez</surname> <given-names>A</given-names></string-name></person-group> (<year>2019</year>). <article-title>Defining higher-order interactions in synthetic ecology: lessons from physics and quantitative genetics</article-title>. <source>Cell Systems</source> <volume>9</volume>(<issue>6</issue>):<fpage>519</fpage>–<lpage>520</lpage></mixed-citation></ref>
<ref id="c30"><label>30.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Skwara</surname> <given-names>A</given-names></string-name>, <string-name><surname>Gowda</surname> <given-names>K</given-names></string-name>, <string-name><surname>Yousef</surname> <given-names>M</given-names></string-name>, <string-name><surname>Diaz-Colunga</surname> <given-names>J</given-names></string-name>, <string-name><surname>Raman</surname> <given-names>AS</given-names></string-name>, <string-name><surname>Sanchez</surname> <given-names>A</given-names></string-name>, <string-name><surname>Tikhonov</surname> <given-names>M</given-names></string-name> and <string-name><surname>Kuehn</surname> <given-names>S</given-names></string-name></person-group> (<year>2023</year>). <article-title>Statistically learning the functional landscape of microbial communities</article-title>. <source>Nature Ecology &amp; Evolution</source> <volume>7</volume>(<issue>11</issue>):<fpage>1823</fpage>–<lpage>1833</lpage></mixed-citation></ref>
<ref id="c31"><label>31.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Kehe</surname> <given-names>J</given-names></string-name>, <string-name><surname>Ortiz</surname> <given-names>A</given-names></string-name>, <string-name><surname>Kulesa</surname> <given-names>A</given-names></string-name>, <string-name><surname>Gore</surname> <given-names>J</given-names></string-name>, <string-name><surname>Blainey</surname> <given-names>PC</given-names></string-name> and <string-name><surname>Friedman</surname> <given-names>J</given-names></string-name></person-group> (<year>2021</year>). <article-title>Positive interactions are common among culturable bacteria</article-title>. <source>Science Advances</source> <volume>7</volume>(<issue>45</issue>):<fpage>eabi7159</fpage></mixed-citation></ref>
<ref id="c32"><label>32.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Hsu</surname> <given-names>RH</given-names></string-name>, <string-name><surname>Clark</surname> <given-names>RL</given-names></string-name>, <string-name><surname>Tan</surname> <given-names>JW</given-names></string-name>, <string-name><surname>Ahn</surname> <given-names>JC</given-names></string-name>, <string-name><surname>Gupta</surname> <given-names>S</given-names></string-name>, <string-name><surname>Romero</surname> <given-names>PA</given-names></string-name> and <string-name><surname>Venturelli</surname> <given-names>OS</given-names></string-name></person-group> (<year>2019</year>). <article-title>Microbial interaction network inference in microfluidic droplets</article-title>. <source>Cell Systems</source> <volume>9</volume>(<issue>3</issue>):<fpage>229</fpage>–<lpage>242</lpage></mixed-citation></ref>
<ref id="c33"><label>33.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Hernando-Amado</surname> <given-names>S</given-names></string-name>, <string-name><surname>Sanz-García</surname> <given-names>F</given-names></string-name> and <string-name><surname>Martínez</surname> <given-names>JL</given-names></string-name></person-group> (<year>2020</year>). <article-title>Rapid and robust evolution of collateral sensitivity in Pseudomonas aeruginosa antibiotic-resistant mutants</article-title>. <source>Science Advances</source> <volume>6</volume>(<issue>32</issue>):<fpage>eaba5493</fpage></mixed-citation></ref>
<ref id="c34"><label>34.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Hernando-Amado</surname> <given-names>S</given-names></string-name>, <string-name><surname>Laborda</surname> <given-names>P</given-names></string-name>, <string-name><surname>Valverde</surname> <given-names>JR</given-names></string-name> and <string-name><surname>Martínez</surname> <given-names>JL</given-names></string-name></person-group> (<year>2022</year>). <article-title>Mutational background influences P. aeruginosa ciprofloxacin resistance evolution but preserves collateral sensitivity robustness</article-title> <source>Proceedings of the National Academy of Sciences</source> <volume>119</volume>(<issue>15</issue>):<fpage>e2109370119</fpage></mixed-citation></ref>
<ref id="c35"><label>35.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Hernando-Amado</surname> <given-names>S</given-names></string-name>, <string-name><surname>Laborda</surname> <given-names>P</given-names></string-name>, <string-name><surname>Valverde</surname> <given-names>JR</given-names></string-name> and <string-name><surname>Martínez</surname> <given-names>JL</given-names></string-name></person-group> (<year>2022</year>). <article-title>Rapid decline of ceftazidime resistance in antibioticfree and sublethal environments is contingent on genetic background</article-title>. <source>Molecular Biology and Evolution</source> <volume>39</volume>(<issue>3</issue>):<fpage>msac049</fpage></mixed-citation></ref>
<ref id="c36"><label>36.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Billick</surname> <given-names>I</given-names></string-name> and <string-name><surname>Case</surname> <given-names>TJ</given-names></string-name></person-group> (<year>1994</year>). <article-title>Higher order interactions in ecological communities: what are they and how can they be detected?</article-title> <source>Ecology</source> <volume>75</volume>(<issue>6</issue>):<fpage>1529</fpage>–<lpage>1543</lpage></mixed-citation></ref>
<ref id="c37"><label>37.</label><mixed-citation publication-type="journal"><person-group person-group-type="author"><string-name><surname>Letten</surname> <given-names>AD</given-names></string-name> and <string-name><surname>Stouffer</surname> <given-names>DB</given-names></string-name></person-group> (<year>2019</year>). <article-title>The mechanistic basis for higher-order interactions and non-additivity in competitive communities</article-title>. <source>Ecology Letters</source> <volume>22</volume>(<issue>3</issue>):<fpage>423</fpage>–<lpage>436</lpage></mixed-citation></ref>
</ref-list>
<sec id="s7">
<title>Supplementary Methods</title>
<sec id="s7a">
<title>Full protocol description for <italic>m</italic> = 8 species</title>
<p>In this section, we describe our protocol for the assembly of all consortia from a <italic>m</italic> = 8 species library in full detail. The reader will hopefully find that generalizing the protocol for larger (or smaller) library sizes is straightforward. We also provide an R script which generates complete step-by-step protocols with customizable parameters (e.g., different values of <italic>m</italic>).</p>
<sec id="s7a1">
<title>Initial considerations</title>
<p>As before, we will call <italic>v</italic><sub>0</sub> the minimum pipetting volume throughout the protocol. It is important to keep in mind that each well of the final plates will carry a volume of <italic>m v</italic><sub>0</sub>. For <italic>m</italic> = 8, we can choose <italic>v</italic><sub>0</sub> = 25 μL, a volume which can be easily handled by standard pipettes, such that every well of the plates will carry a total volume of 200 μL by the end of the assembly protocol. In what follows, we will assume that at the start of the protocol we have enough volume of each of the <italic>m</italic> = 8 individual species in monoculture. For some applications, it might be desirable to standardize the density of the monocultures, typically by diluting all cultures to the same target optical density. One should keep in mind that each species will be present in half of the 2<sup><italic>m</italic></sup> consortia, that is, we will need a minimum volume of 2<sup><italic>m</italic>−1</sup><italic>v</italic><sub>0</sub> (3.2 mL with our choices of <italic>m</italic> and <italic>v</italic><sub>0</sub>) of each monoculture. It is of course recommended to have some extra volume available.</p>
</sec>
<sec id="s7a2">
<title>Step 1: Buffer pipetting</title>
<p>We start the protocol by pipetting the necessary buffer column-wise. Making this the first step of the protocol has the advantage that all liquid buffer handling can be done using the same set of pipette tips with no risk of cross-contamination. Using an 8-channel pipette, we pipette a volume of <italic>v</italic><sub>0</sub> [<italic>m</italic> − 3 − <italic>H</italic> (<italic>B</italic> (<italic>j</italic> − 1))] (note that this corresponds to the second term of <xref ref-type="disp-formula" rid="eqn5">equation 5</xref>) into all wells of column <italic>j</italic>. We do this for every column from the first (<italic>j</italic> = 1) to the final one (<italic>j</italic> = 2<sup><italic>m</italic>−3</sup>, in our case <italic>j</italic> = 32 since we have <italic>m</italic> = 8 species). For 8 species, and with <italic>v</italic><sub>0</sub> = 25 μL, we have:</p>
<table-wrap id="utbl1" orientation="portrait" position="float">
<graphic xlink:href="592148v1_utbl1.tif" mime-subtype="tiff" mimetype="image"/>
</table-wrap>
</sec>
<sec id="s7a3">
<title>Step 2: Species 4 to <italic>m</italic></title>
<p>Using an 8-channel pipette, we now pipette a volume <italic>v</italic><sub>0</sub> = 25 μL of the monocultures of species 4 to <italic>m</italic> into all wells of their corresponding columns (see <xref ref-type="disp-formula" rid="eqn2">equation 2</xref> and <xref rid="fig1" ref-type="fig">Figure 1C</xref>):</p>
<table-wrap id="utbl2" orientation="portrait" position="float">
<graphic xlink:href="592148v1_utbl2.tif" mime-subtype="tiff" mimetype="image"/>
</table-wrap>
<p>We recommend using different pipette tips for each pipetting event to avoid cross-contamination — but note that e.g. all pipetting of species 4 could be performed with the same set of tips with no risk of cross-contamination. Similarly, species 5 could be first pipetted into all necessary odd columns, and then into all necessary even columns, with the same set of tips.</p>
</sec>
<sec id="s7a4">
<title>Step 3: Combinations of species 1 to 3</title>
<p>We next assemble all 2<sup><xref ref-type="bibr" rid="c3">3</xref></sup> = 8 combinations of species 1, 2, and 3. We recommend first assembling these consortia in large vessels, typically 15 mL or 50 mL Falcon tubes which we label as T1 to T8. We then pipette the following volumes of species 1, 2, 3 monocultures and buffer into each of the tubes:</p>
<table-wrap id="utbl3" orientation="portrait" position="float">
<graphic xlink:href="592148v1_utbl3.tif" mime-subtype="tiff" mimetype="image"/>
</table-wrap>
<p>Lastly, we pipette a volume of 3<italic>v</italic><sub>0</sub> = 75 μL per well from tubes T1 to T8 into rows <italic>i</italic> = 1 to 8 of the plates respectively, which can be easily done with the aid of a 12-channel pipette. Note that this not only places species 1 to 3 in their corresponding positions (<xref rid="fig1" ref-type="fig">Figure 1C</xref>), but also adds the necessary amount of buffer per row (see first term of <xref ref-type="disp-formula" rid="eqn5">equation 5</xref>). Also note that, since a volume of 3<italic>v</italic><sub>0</sub> per well is added from each tube to every row of the plates, a minimum volume of 3<italic>v</italic><sub>0</sub> · 2<sup><italic>m</italic>−3</sup> = 2.4 mL per tube is required — but again, some spare volume is desirable, so here we have rounded that up to 3 mL per tube.</p>
</sec>
</sec>
<sec id="s7b">
<title>Reagents and strains</title>
<p>For our experiment with synthetic colorants, we used a mix of food colorants (Dr. Oetker) and temperas, which were diluted in water until they all showed similar maximum absorbance values in the range 380-780 nm (<xref rid="fig2" ref-type="fig">Figure 2A</xref>).</p>
<p>All eight <italic>P. aeruginosa</italic> strains were kindly donated by Sara Hernando-Amado, and are described elsewhere. <sup><xref ref-type="bibr" rid="c33">33</xref>–<xref ref-type="bibr" rid="c35">35</xref></sup> Strains 1 to 8 (as labeled in the main text) correspond, in order, to mutants pAOV, PA14, NfxB, ParR-CAZ, mexZ, OrfN, NfxB-CAZ, and MDR6-CAZ in the original publications. For our experiment, strains were streaked on LB agar (Condalab) plates from frozen stocks, and a single colony of each strain was resuspended in 15 mL of LB medium (Condalab) (contained in 50 mL conical tubes, Falcon). Monocultures were allowed to grow for 24 h at 37 °C, after which we used them to assemble all 2<sup><xref ref-type="bibr" rid="c8">8</xref></sup> strain combinations as described in the main text. After assembling every combination, samples were diluted into fresh LB medium by a factor of 1:400 (0.5 μL of inoculum into 200 μL of fresh medium) in 96-well plates (Thermo Scientific). Plates were covered with transpirable seals (Excel Scientific) and cultures were incubated for 40 h at 37 °C with no agitation. After incubation, plates were transferred to a MultiSkan SkyHigh plate reader (Thermo Scientific; software version: SkanIt 7.0) to obtain the absorbance spectra.</p>
</sec>
<sec id="s7c">
<title>Quantification of pairwise functional interactions between species</title>
<p>Following recent work in microbial ecology, <sup><xref ref-type="bibr" rid="c10">10</xref>,<xref ref-type="bibr" rid="c19">19</xref>,<xref ref-type="bibr" rid="c29">29</xref></sup> we define the pairwise functional interaction between two species <italic>i</italic> and <italic>j</italic> in a background consortium <italic>B</italic> as
<disp-formula id="eqnS1">
<graphic xlink:href="592148v1_eqnS1.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
where we have called <italic>B</italic> + <italic>i, B</italic> + <italic>j</italic>, and <italic>B</italic> + <italic>i</italic> + <italic>j</italic> the consortia resulting from including species <italic>i</italic>, species <italic>j</italic>, or both, in the ecological background <italic>B</italic>. Here, <italic>F</italic> generically denotes the function of a consortium, which in our case is the absorbance at 600 nm (<italic>Abs</italic><sub>600</sub>). The terms in brackets represent the additive expectation for the function of consortium <italic>B</italic> + <italic>i</italic> + <italic>j</italic>, that is, the background function <italic>F</italic> (<italic>B</italic>) plus the two individual functional effects of species <italic>i</italic> and <italic>j</italic> in that background (denoted Δ<italic>F</italic><sub><italic>i</italic></sub> (<italic>B</italic>) and Δ<italic>F</italic><sub><italic>j</italic></sub> (<italic>B</italic>), respectively). The functional effect of species <italic>i</italic> in background <italic>B</italic>, as explained in the main text, is simply quantified as the difference in function between consortium <italic>B</italic> + <italic>i</italic> and <italic>B</italic>:
<disp-formula id="eqnS2">
<graphic xlink:href="592148v1_eqnS2.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
Thus, equation S1 can be written as
<disp-formula id="eqnS3">
<graphic xlink:href="592148v1_eqnS3.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
<xref rid="fig5" ref-type="fig">Figure 5F</xref> in the main text shows the values of the interaction coefficients ϵ<sub><italic>ij</italic></sub> for all pairs of strains <italic>i</italic> and <italic>j</italic> across all potential backgrounds <italic>B</italic>, calculated using equation S3.</p>
</sec>
<sec id="s7d">
<title>Analysis of functional variance by interaction order</title>
<p>Recent analyses of already published microbial consortia <sup><xref ref-type="bibr" rid="c30">30</xref></sup> used the following approach to quantifying interactions: instead of representing the presence/absence of a species <italic>i</italic> with a variable <italic>x</italic><sub><italic>i</italic></sub> = 1, 0, one can represent it using a variable σ<sub><italic>i</italic></sub> = +1, −1. The function (in our case, biomass quantified as <italic>Abs</italic><sub>600</sub>) of a consortium <italic>c</italic> can thus be expressed as
<disp-formula id="eqnS4">
<graphic xlink:href="592148v1_eqnS4.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
In this expression, the coefficients α<sub><italic>i</italic></sub> represent the average difference in function between two consortia differing solely on the presence or absence of species <italic>i</italic>, that is, the average functional effect (as defined in the main text) of species <italic>i</italic> across all potential ecological backgrounds where this species may be included. <sup><xref ref-type="bibr" rid="c30">30</xref></sup> Therefore, the coefficients <italic>i</italic> are the averages of the distributions shown in <xref rid="fig5" ref-type="fig">Figure 5E</xref>. In turn, the coefficients α<sub><italic>ij</italic></sub> are proportional to the average pairwise functional interaction between species <italic>i</italic> and <italic>j</italic> (in the sense that we define them in the main text, see <xref rid="fig5" ref-type="fig">Figure 5D</xref> and equation S3), i.e., the averages of the distributions in <xref rid="fig5" ref-type="fig">Figure 5F</xref>.</p>
<p>Using this representation has the advantage that the total functional variance (in our case, the total variance in <italic>Abs</italic><sub>600</sub> across all 2<sup><xref ref-type="bibr" rid="c8">8</xref></sup> consortia) can be expressed as:
<disp-formula id="eqnS5">
<graphic xlink:href="592148v1_eqnS5.gif" mime-subtype="gif" mimetype="image"/>
</disp-formula>
The variance explained by the coefficients of order <italic>k</italic> can be computed as <inline-formula><inline-graphic xlink:href="592148v1_inline4.gif" mime-subtype="gif" mimetype="image"/></inline-formula>, e.g., the functional variance explained by the first-order coefficients is <inline-formula><inline-graphic xlink:href="592148v1_inline5.gif" mime-subtype="gif" mimetype="image"/></inline-formula>, the variance explained by the second-order terms is <inline-formula><inline-graphic xlink:href="592148v1_inline6.gif" mime-subtype="gif" mimetype="image"/></inline-formula>, and so on. This allows us to calculate the fraction of variance which can be attributed to each order, represented in <xref rid="fig5" ref-type="fig">Figure 5G</xref> in the main text.</p>
</sec>
</sec>
<sec id="s8">
<title>Supplementary Figures</title>
<fig id="figS1" position="float" fig-type="figure">
<label>Figure S1.</label>
<caption><p>Plate layout at different stages of the assembly protocol for combinations of 8 colorants.</p></caption>
<graphic xlink:href="592148v1_figS1.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<fig id="figS2" position="float" fig-type="figure">
<label>Figure S2.</label>
<caption><p>Absolute deviation, |<italic>Abs</italic>(<italic>c</italic>) − <italic>Abs</italic><sup>(<italic>add</italic>)</sup>(<italic>c</italic>)|, between the spectra of the 8-colorant consortia and the additive expectations, for all consortia <italic>c</italic> of 2 or more colorants and for all wavelengths λ between 380 nm and 780 nm. Median absolute error is ∼ 0.025 A.U.</p></caption>
<graphic xlink:href="592148v1_figS2.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<fig id="figS3" position="float" fig-type="figure">
<label>Figure S3.</label>
<caption><p>Relative deviation between the empirical spectra and the respective additive expectations (<xref ref-type="disp-formula" rid="eqn6">equation 6</xref>) versus the number of colorants in the consortium. Here we represent the deviations for all wavelengths in the 380-780 nm range.</p></caption>
<graphic xlink:href="592148v1_figS3.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<fig id="figS4" position="float" fig-type="figure">
<label>Figure S4.</label>
<caption><p>Relative deviation between the empirical spectra and the respective additive expectations (<xref ref-type="disp-formula" rid="eqn6">equation 6</xref>) as a function of the wavelength. Wavelengths in the 380-780 nm range were split into ten quantiles. Within each quantile, we represent the relative deviations (<xref ref-type="disp-formula" rid="eqn6">equation 6</xref>) for all combinations of two or more colorants.</p></caption>
<graphic xlink:href="592148v1_figS4.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<fig id="figS5" position="float" fig-type="figure">
<label>Figure S5.</label>
<caption><p>Previous work has expressed the community-level function of a consortium <italic>c</italic> as <inline-formula><inline-graphic xlink:href="592148v1_inline7.gif" mime-subtype="gif" mimetype="image"/></inline-formula>. <sup><xref ref-type="bibr" rid="c30">30</xref></sup> In this expression, σ<sub><italic>i</italic></sub> takes values +1 or -1 depending on the presence or absence of strain <italic>i</italic> in the consortium, respectively (note the difference with <xref ref-type="disp-formula" rid="eqn1">equation 1</xref> in the main text, where presence/absence was denoted with 1s and 0s instead). The coefficients α<sub><italic>i</italic></sub>, α<sub><italic>ij</italic></sub>, etc. can be quantified exactly from empirical data if the full mapping between community compositions and functions is known, as is the case in our experiment with eight <italic>P. aeruginosa</italic> strains. Here we represent the magnitude of the coefficients α at all orders for that experiment. The equation above has the advantage that the total functional variance, var (<italic>F</italic>), can be computed as: <inline-formula><inline-graphic xlink:href="592148v1_inline8.gif" mime-subtype="gif" mimetype="image"/></inline-formula>, where each sum corresponds to the variance due to terms of order 1, 2, 3, and so on.</p></caption>
<graphic xlink:href="592148v1_figS5.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
<fig id="figS6" position="float" fig-type="figure">
<label>Figure S6.</label>
<caption><p>Correlations between the functional effect of a strain (Abs) and the function of the background consortium where it is included, such as those we report in <xref rid="fig5" ref-type="fig">Fig. 5I</xref>, can emerge when the mapping between community composition and function is entirely random. <sup><xref ref-type="bibr" rid="c10">10</xref></sup> (<bold>A</bold>) To test whether the empirical correlations we observe in <xref rid="fig5" ref-type="fig">Figure 5I</xref> could be attributed to this phenomenon, we randomized our empirical data 100 times. In each of these randomizations, we fit linear models linking the functional effect (Δ<italic>Abs</italic>) of each of the eight strains to the functions of their background consortia. (<bold>B</bold>) Here we compare the linear fits obtained in each of these 100 randomization controls (blue lines) with the true best fit to the empirical data (black lines). We find that the empirical fits are generally incompatible with the randomization controls.</p></caption>
<graphic xlink:href="592148v1_figS6.tif" mime-subtype="tiff" mimetype="image"/>
</fig>
</sec>
</back>
<sub-article id="sa0" article-type="editor-report">
<front-stub>
<article-id pub-id-type="doi">10.7554/eLife.101906.1.sa3</article-id>
<title-group>
<article-title>eLife Assessment</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author">
<name>
<surname>Amir</surname>
<given-names>Ariel</given-names>
</name>
<role specific-use="editor">Reviewing Editor</role>
<aff>
<institution-wrap>
<institution>Weizmann Institute of Science</institution>
</institution-wrap>
<city>Rehovot</city>
<country>Israel</country>
</aff>
</contrib>
</contrib-group>
<kwd-group kwd-group-type="evidence-strength">
<kwd>Convincing</kwd>
</kwd-group>
<kwd-group kwd-group-type="claim-importance">
<kwd>Valuable</kwd>
</kwd-group>
</front-stub>
<body>
<p>This manuscript introduces a new low-cost and accessible method for assembling combinatorially complete microbial consortia using basic laboratory equipment, which is a <bold>valuable</bold> contribution to the field of microbial ecology and biotechnology. The evidence presented is <bold>convincing</bold>, demonstrating the method's effectiveness through empirical testing on both synthetic colorants and Pseudomonas aeruginosa strains.</p>
</body>
</sub-article>
<sub-article id="sa1" article-type="referee-report">
<front-stub>
<article-id pub-id-type="doi">10.7554/eLife.101906.1.sa2</article-id>
<title-group>
<article-title>Reviewer #1 (Public review):</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author">
<anonymous/>
<role specific-use="referee">Reviewer</role>
</contrib>
</contrib-group>
</front-stub>
<body>
<p>Summary:</p>
<p>This work develops a simple, rapid, low-cost methodology for assembling combinatorially complete microbial consortia using basic laboratory equipment. The motivation behind this work is to make the study of microbial community interactions more accessible to laboratories that lack specialized equipment such as robotic liquid handlers or microfluidic devices. The method was tested on a library of Pseudomonas aeruginosa strains to demonstrate its practicality and effectiveness. It provided a means to explore the complex functional interactions within microbial communities and identify optimal consortia for specific functions, such as biomass production.</p>
<p>Strengths:</p>
<p>The primary strength of this manuscript lies in its accessibility and practicality. The method proposed by the authors allows any laboratory with standard equipment, such as multichannel pipettes and 96-well plates, to readily construct all possible combinations of microbial consortia from a given set of species. This greatly enhances access to full factorial designs, which were previously limited to labs with advanced technology.</p>
<p>Another strength of the manuscript is the measurement and analysis of the biomass of all possible combinations of 8 strains of P. aeruginosa. This analysis provides a concrete example of how the authors' new methodology can be used to identify the best-performing communities and map pairwise and higher-order functional interactions.</p>
<p>Notably, the authors do exceptionally well in providing a thorough description of the methodology, including detailed protocols and an R script for customizing the method to different experimental needs. This enhances the reproducibility and adaptability of the methodology, making it a valuable resource for researchers wishing to adopt this methodology.</p>
<p>Weaknesses:</p>
<p>While the methodology is robust and well-presented, there are some limitations that should be acknowledged more thoroughly. First, the method's scalability is an important factor. The authors indicate that it should be effective for up to 10-12 species, but there is no discussion of what sets this scale: time, amount of labor, consumables, the likelihood of error, sample volume, etc. Second, this methodology is tailored to construct communities where the abundance of each strain is identical in each combination. Therefore, combinations with a different number of strains also differ in the total initial amount of microbial cells. Second, variations in the initial proportions of the same set of strains cannot be readily explored. Third, the manuscript only discusses how to construct the combinations, and not how to assay them afterward (e.g. for community function, interspecific interactions, etc'). While details on how to achieve these goals are clearly outside the scope of this work, the use of biomass as an example function may obfuscate this caveat, which should be stated more explicitly.</p>
</body>
</sub-article>
<sub-article id="sa2" article-type="referee-report">
<front-stub>
<article-id pub-id-type="doi">10.7554/eLife.101906.1.sa1</article-id>
<title-group>
<article-title>Reviewer #2 (Public review):</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author">
<anonymous/>
<role specific-use="referee">Reviewer</role>
</contrib>
</contrib-group>
</front-stub>
<body>
<p>Summary:</p>
<p>A simple and effective method for combinatorial assembly of microbes in synthetic communities of &lt;12 species.</p>
<p>Strengths:</p>
<p>Overall this manuscript is a useful contribution. The efficiency of the method and clarity of the presentation is a strength. It is well-written and easy to follow. The figures are great, the pedagogical narrative is crisp. I can imagine the method being used in lots of other contexts too.</p>
<p>Weaknesses:</p>
<p>The authors could better clarify what HOIs mean. They could address challenges with assaying community function. However, neither of these &quot;weaknesses&quot; affects the primary goal of the paper which is methodological.</p>
</body>
</sub-article>
<sub-article id="sa3" article-type="referee-report">
<front-stub>
<article-id pub-id-type="doi">10.7554/eLife.101906.1.sa0</article-id>
<title-group>
<article-title>Reviewer #3 (Public review):</article-title>
</title-group>
<contrib-group>
<contrib contrib-type="author">
<anonymous/>
<role specific-use="referee">Reviewer</role>
</contrib>
</contrib-group>
</front-stub>
<body>
<p>The authors developed a useful methodology for generating all combinations of multiple reagents using standard lab equipment. This methodology has clear uses for studying microbial ecology as they demonstrated. The methodology will likely be useful for other types of experiments that require exhaustive testing of all possible combinations of a given set of reagents (e.g., drug-drug antagonism and synergy).</p>
<p>The authors provided a useful R script that generates a detailed experimental protocol for building the desired combination from any number of reagents. The produced document is useful and has clear instructions. The output of the computer script will be strengthened if graphical output is also provided (similar to the one provided in Figure 1C).</p>
<p>The authors show that the error rate of the method doesn't go up with the number of combinations using dyes (Figure 2).</p>
<p>The authors demonstrate the value of their methodology for studying interactions within microbial consortia by assembling all possible combinations of eight strains of Pseudomonas aeruginosa. The value of their methodology for this application is well-founded. However, it is also unclear why specific experimental choices were made for this application. It is unclear why authors continue to show the absorbance measurements of strain assemblies over the entire wavelength spectrum and not just for ABS 600 nm (Figures 3 and 4). It is also unclear why the authors provided information on the &quot;sum of the three spectra&quot; as this reference line is meaningless and not a reasonable null model for estimating how well specific strain combinations will grow together.</p>
<p>Figure 5 illustrates the various analysis types that can be performed on the data collected from growing combinations of eight Pseudomonas aeruginosa strains. It is a very informative figure since it provides a &quot;roadmap&quot; on the various ways in which the dataset produced can be explored. The information in Figures 5 and S6 will likely be very useful for a wide audience.</p>
</body>
</sub-article>
</article>