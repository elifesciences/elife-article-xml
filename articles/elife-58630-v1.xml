<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD v1.1 20151215//EN"  "JATS-archivearticle1.dtd"><article article-type="research-article" dtd-version="1.1" xmlns:ali="http://www.niso.org/schemas/ali/1.0/" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:xlink="http://www.w3.org/1999/xlink"><front><journal-meta><journal-id journal-id-type="nlm-ta">elife</journal-id><journal-id journal-id-type="publisher-id">eLife</journal-id><journal-title-group><journal-title>eLife</journal-title></journal-title-group><issn pub-type="epub" publication-format="electronic">2050-084X</issn><publisher><publisher-name>eLife Sciences Publications, Ltd</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="publisher-id">58630</article-id><article-id pub-id-type="doi">10.7554/eLife.58630</article-id><article-categories><subj-group subj-group-type="display-channel"><subject>Tools and Resources</subject></subj-group><subj-group subj-group-type="heading"><subject>Developmental Biology</subject></subj-group></article-categories><title-group><article-title>The <italic>Drosophila</italic> Individual Activity Monitoring and Detection System (DIAMonDS)</article-title></title-group><contrib-group><contrib contrib-type="author" corresp="yes" equal-contrib="yes" id="author-186776"><name><surname>Seong</surname><given-names>Ki-Hyeon</given-names></name><contrib-id authenticated="true" contrib-id-type="orcid">https://orcid.org/0000-0002-0606-8896</contrib-id><email>ki-hyeon.seong@riken.jp</email><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="aff" rid="aff2">2</xref><xref ref-type="fn" rid="equal-contrib1">†</xref><xref ref-type="other" rid="fund1"/><xref ref-type="other" rid="fund2"/><xref ref-type="other" rid="fund3"/><xref ref-type="fn" rid="con1"/><xref ref-type="fn" rid="conf1"/><xref ref-type="fn" rid="fn1">‡</xref></contrib><contrib contrib-type="author" equal-contrib="yes" id="author-190186"><name><surname>Matsumura</surname><given-names>Taishi</given-names></name><xref ref-type="aff" rid="aff3">3</xref><xref ref-type="fn" rid="equal-contrib1">†</xref><xref ref-type="fn" rid="con2"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-182434"><name><surname>Shimada-Niwa</surname><given-names>Yuko</given-names></name><contrib-id authenticated="true" contrib-id-type="orcid">http://orcid.org/0000-0001-5757-4329</contrib-id><xref ref-type="aff" rid="aff2">2</xref><xref ref-type="aff" rid="aff4">4</xref><xref ref-type="fn" rid="con3"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-190171"><name><surname>Niwa</surname><given-names>Ryusuke</given-names></name><contrib-id authenticated="true" contrib-id-type="orcid">http://orcid.org/0000-0002-1716-455X</contrib-id><xref ref-type="aff" rid="aff2">2</xref><xref ref-type="aff" rid="aff4">4</xref><xref ref-type="other" rid="fund1"/><xref ref-type="fn" rid="con4"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" corresp="yes" id="author-190187"><name><surname>Kang</surname><given-names>Siu</given-names></name><email>siu@yz.yamagata-u.ac.jp</email><xref ref-type="aff" rid="aff2">2</xref><xref ref-type="aff" rid="aff3">3</xref><xref ref-type="other" rid="fund1"/><xref ref-type="fn" rid="con5"/><xref ref-type="fn" rid="conf1"/><xref ref-type="fn" rid="fn1">‡</xref></contrib><aff id="aff1"><label>1</label><institution>RIKEN Cluster for Pioneering Research, RIKEN Tsukuba Institute</institution><addr-line><named-content content-type="city">Tsukuba</named-content></addr-line><country>Japan</country></aff><aff id="aff2"><label>2</label><institution>AMED-CREST, AMED</institution><addr-line><named-content content-type="city">Tokyo</named-content></addr-line><country>Japan</country></aff><aff id="aff3"><label>3</label><institution>Graduate School of Science and Engineering, Yamagata University, Jonan</institution><addr-line><named-content content-type="city">Yonezawa</named-content></addr-line><country>Japan</country></aff><aff id="aff4"><label>4</label><institution>Life Science Center for Survival Dynamics, University of Tsukuba</institution><addr-line><named-content content-type="city">Tsukuba</named-content></addr-line><country>Japan</country></aff></contrib-group><contrib-group content-type="section"><contrib contrib-type="editor"><name><surname>Bellen</surname><given-names>Hugo J</given-names></name><role>Reviewing Editor</role><aff><institution>Baylor College of Medicine</institution><country>United States</country></aff></contrib><contrib contrib-type="senior_editor"><name><surname>VijayRaghavan</surname><given-names>K</given-names></name><role>Senior Editor</role><aff><institution>National Centre for Biological Sciences, Tata Institute of Fundamental Research</institution><country>India</country></aff></contrib></contrib-group><author-notes><fn fn-type="other" id="fn1"><label>‡</label><p>These authors jointly supervised this work</p></fn><fn fn-type="other" id="fn2"><label>§</label><p>These authors jointly supervised this work</p></fn><fn fn-type="con" id="equal-contrib1"><label>†</label><p>These authors contributed equally to this work</p></fn></author-notes><pub-date date-type="publication" publication-format="electronic"><day>10</day><month>11</month><year>2020</year></pub-date><pub-date pub-type="collection"><year>2020</year></pub-date><volume>9</volume><elocation-id>e58630</elocation-id><history><date date-type="received" iso-8601-date="2020-05-06"><day>06</day><month>05</month><year>2020</year></date><date date-type="accepted" iso-8601-date="2020-10-04"><day>04</day><month>10</month><year>2020</year></date></history><permissions><copyright-statement>© 2020, Seong et al</copyright-statement><copyright-year>2020</copyright-year><copyright-holder>Seong et al</copyright-holder><ali:free_to_read/><license xlink:href="http://creativecommons.org/licenses/by/4.0/"><ali:license_ref>http://creativecommons.org/licenses/by/4.0/</ali:license_ref><license-p>This article is distributed under the terms of the <ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution License</ext-link>, which permits unrestricted use and redistribution provided that the original author and source are credited.</license-p></license></permissions><self-uri content-type="pdf" xlink:href="elife-58630-v1.pdf"/><abstract><p>Here, we have developed DIAMonDS (<italic>Drosophila</italic> Individual Activity Monitoring and Detection System) comprising time-lapse imaging by a charge-coupled device (CCD) flatbed scanner and Sapphire, a novel algorithm and web application. DIAMonDS automatically and sequentially identified the transition time points of multiple life cycle events such as pupariation, eclosion, and death in individual flies at high temporal resolution and on a large scale. DIAMonDS performed simultaneous multiple scans to measure individual deaths (≤1152 flies per scanner) and pupariation and eclosion timings (≤288 flies per scanner) under various chemical exposures, environmental conditions, and genetic backgrounds. DIAMonDS correctly identified 74–85% of the pupariation and eclosion events and ~ 92% of the death events within ± 10 scanning frames. This system is a powerful tool for studying the influences of genetic and environmental factors on fruit flies and efficient, high-throughput genetic and chemical screening in drug discovery.</p></abstract><kwd-group kwd-group-type="author-keywords"><kwd>pupariation</kwd><kwd>eclosion</kwd><kwd>lifespan</kwd><kwd>high-throughput</kwd><kwd>survival test</kwd><kwd><italic>Drosophila melanogaster</italic></kwd></kwd-group><kwd-group kwd-group-type="research-organism"><title>Research organism</title><kwd><italic>D. melanogaster</italic></kwd></kwd-group><funding-group><award-group id="fund1"><funding-source><institution-wrap><institution-id institution-id-type="FundRef">http://dx.doi.org/10.13039/100009619</institution-id><institution>Japan Agency for Medical Research and Development</institution></institution-wrap></funding-source><award-id>JP18gm1110001</award-id><principal-award-recipient><name><surname>Seong</surname><given-names>Ki-Hyeon</given-names></name><name><surname>Niwa</surname><given-names>Ryusuke</given-names></name><name><surname>Kang</surname><given-names>Siu</given-names></name></principal-award-recipient></award-group><award-group id="fund2"><funding-source><institution-wrap><institution-id institution-id-type="FundRef">http://dx.doi.org/10.13039/501100002241</institution-id><institution>Japan Science and Technology Agency</institution></institution-wrap></funding-source><award-id>JPMJPR12M5</award-id><principal-award-recipient><name><surname>Seong</surname><given-names>Ki-Hyeon</given-names></name></principal-award-recipient></award-group><award-group id="fund3"><funding-source><institution-wrap><institution-id institution-id-type="FundRef">http://dx.doi.org/10.13039/501100001691</institution-id><institution>Japan Society for the Promotion of Science</institution></institution-wrap></funding-source><award-id>19K06497</award-id><principal-award-recipient><name><surname>Seong</surname><given-names>Ki-Hyeon</given-names></name></principal-award-recipient></award-group><funding-statement>The funders had no role in study design, data collection and interpretation, or the decision to submit the work for publication.</funding-statement></funding-group><custom-meta-group><custom-meta specific-use="meta-only"><meta-name>Author impact statement</meta-name><meta-value>The DIAMonDS can automatically and sequentially identify time points of multiple life cycle events such as pupariation, eclosion, and death in individual flies at high temporal resolution and large scale.</meta-value></custom-meta></custom-meta-group></article-meta></front><body><sec id="s1" sec-type="intro"><title>Introduction</title><p>Animal life develops through a sequence of characteristic events and stages. Embryogenesis starts with the fertilization of an egg. Thence, the embryo transitions to the juvenile stage at a certain time point. This stage persists for a certain period, during which the animal grows and develops into the adult stage in which it reproduces, senesces, and dies. The length of each stage and the timing of each developmental transition are determined by complex interactions between genetic and environmental factors. Thus, developmental timing may be defined as a phenotype. Accurate determination of developmental timing helps elucidate the molecular and physiological bases of biological events and may uncover new factors regulating development and lifespan.</p><p>Nevertheless, it is difficult to establish the precise time points of the developmental transitions in many animals including humans. One reason is that there may be no clear boundaries between stages throughout the entire lifetime of the organism. Consequently, it has been impractical to use developmental timing as a phenotype for investigations in developmental biology. However, holometabolous insects such as the fruit fly <italic>Drosophila melanogaster</italic> are important exceptions to this rule. These animals pass through four life stages, namely embryo, larva, pupa, and adult. Transitions between these stages are accompanied by drastic morphological events and behavioral changes including hatching, pupariation, eclosion, and death. Therefore, the time point of each developmental transition can be precisely determined. <italic>Drosophila has been extensively</italic> studied in the fields of genetics and developmental biology. Accurate tracking and recording of its life cycle could significantly promote the understanding of various aspects of biology, agriculture, and medicine.</p><p>Noteworthy, no recent improvements have been made in measuring the timing of the developmental transitions in <italic>Drosophila</italic>. Until now, the timing of each developmental stage was manually determined by counting the number of flies at each stage in each vial over 2, 6, 12, or 24 hr (<xref ref-type="bibr" rid="bib4">Buhler et al., 2018</xref>; <xref ref-type="bibr" rid="bib5">Demay et al., 2014</xref>; <xref ref-type="bibr" rid="bib13">Külshammer et al., 2015</xref>; <xref ref-type="bibr" rid="bib19">Nikhil et al., 2016</xref>; <xref ref-type="bibr" rid="bib33">Yun et al., 2017</xref>); however, this technique has certain limitations. Increasing the temporal resolution is difficult as it would require intensive labor, preventing the detection of subtle changes in transition timing for each event. Moreover, manual counting is neither practicable for large-scale/high-throughput screening nor feasible for identifying multiple phenotypes in individual flies in transition events. In contrast, it does help elucidate the associations between developmental stages and the genetic and environmental factors affecting them. Recent studies reported the use of video cameras to measure developmental timing (<xref ref-type="bibr" rid="bib11">Hironaka et al., 2019</xref>). However, this method is labor-intensive, requires long analytical periods, and is unsuitable for high-throughput analysis.</p><p>Here, we present a new scalable method that automatically determines multiple transition time points, such as pupariation, eclosion, and death, of individual fruit flies implementing a basic flatbed CCD scanner. We placed a single fly in each well of a 96- or 384-well microplate, acquired time-lapse images, and analyzed the output with our novel algorithm Sapphire. This system performs automatic developmental analyses at high temporal resolution and could be used in high-throughput gene and chemical screening and analyses of the effects of genetic and environmental factors on development.</p></sec><sec id="s2" sec-type="results"><title>Results</title><sec id="s2-1"><title>Design of the <italic>Drosophila</italic> Individual Activity Monitoring and Detection System (DIAMonDS)</title><p><italic>Drosophila</italic> develops through four developmental stages (embryo, larva, pupa, and adult), subsequently finishing its own life. The static phases (embryo, pupa, and death) alternate with the dynamic phases (larva and adult; <xref ref-type="fig" rid="fig1">Figure 1A</xref>). Single-image processing between continuous images distinguishes both phases: dynamic phases are detected as positive signals while static phases simultaneously present no signal (<xref ref-type="fig" rid="fig1">Figure 1B</xref>). Therefore, we can precisely identify the transition points between phases by monitoring the static and dynamic status and separately detecting fly phases on all plates captured simultaneously in the same image.</p><fig-group><fig id="fig1" position="float"><label>Figure 1.</label><caption><title>Overview of DIAMonDS.</title><p>(<bold>A</bold>) Diagram of developmental stages and activity states in <italic>Drosophila melanogaster.</italic> (<bold>B</bold>) Schematic representation of the DIAMonDS procedure. DIAMonDS consists of: (i) microplate preparation; (ii) time-lapse imaging with CCD scanner; and (iii) data analysis by Sapphire. In step (iii), Sapphire calculates activity signal (green line) intensity via animal body detection from FCN images and subtraction processing of every two consecutive images and then determines the CF signal (purple line) from the activity signal. (<bold>C</bold>) Flowchart of Sapphire. Algorithm includes extraction of individual animals from population images (Step 1), training data preparation and augmentation (Step 2), training through data and animal body segmentation (Step 3), segmentation data signaling by subtracting labeled data and transition point detection algorithm (Step 4), event detection, signal processing, and visualization (Step 5).</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig1-v1.tif"/></fig><fig id="fig1s1" position="float" specific-use="child-fig"><label>Figure 1—figure supplement 1.</label><caption><title>Scanning surface temperature distribution.</title><p>(<bold>A</bold>) Temperature measurement points on scan surface. Temperature measured by temperature data logger (Thermochron SL type, NK Labs, Cambridge, MA, USA) in high-resolution mode. (<bold>B</bold>) Daily temperature time course under 12:12 light-dark cycle. (<bold>C,D</bold>) Temperature at each time point under light (<bold>C</bold>) and dark (<bold>D</bold>) conditions. Dark and light green bands represent mean and maximum/minimum temperature ranges, respectively.</p><p><supplementary-material id="fig1s1sdata1"><label>Figure 1—figure supplement 1—source data 1.</label><caption><title>Scanning surface temperature.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig1-figsupp1-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig1-figsupp1-v1.tif"/></fig><fig id="fig1s2" position="float" specific-use="child-fig"><label>Figure 1—figure supplement 2.</label><caption><title>Schematic representation of process of Sapphire and architecture of FCN.</title><p>(<bold>A</bold>) Automatic life event detection algorithm. Detailed procedure described in <xref ref-type="fig" rid="fig1">Figure 1C</xref>. (<bold>B</bold>) Schematic architecture of fully convolutional network (FCN) designed for animal body segmentation.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig1-figsupp2-v1.tif"/></fig><fig id="fig1s3" position="float" specific-use="child-fig"><label>Figure 1—figure supplement 3.</label><caption><title>Sapphire user interface.</title><p>(<bold>A</bold>) Under the tab 'Main', appropriate datasets, detection methods, and inference data may be selected. We can also confirm and select well images and segmented areas of two consecutive images. We may confirm the result of Sapphire analysis on the selected well (upper left graph) and change ‘signal type,’ ‘smoothing,’ and ‘weight.’ We can compare data analyzed by Sapphire with those detected manually (lower panels). (<bold>B</bold>) In tab 'Data Table', we can download the timestamp and analyzed data.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig1-figsupp3-v1.tif"/></fig></fig-group><p>DIAMonDS consists of an automated time-lapse imaging system and our novel image analysis software named ‘Sapphire’ (<xref ref-type="fig" rid="fig1">Figure 1B</xref>). We used a combination of a flatbed CCD scanner and VueScan software (<ext-link ext-link-type="uri" xlink:href="https://www.hamrick.com">https://www.hamrick.com</ext-link>), which enables multiple scanner units to capture images continuously at certain intervals (<xref ref-type="bibr" rid="bib28">Smith et al., 2014</xref>). To identify the phase change time points for each fly event, single flies are inserted into each well of a 96- or 384-well microplate containing suitable fly media. Up to three microplates are then set on the scanner surface, and time-lapse images are acquired at appropriate intervals until the fly event is completed. A single scanner can monitor 288 or 1152 individuals in three 96-well or 384-well microplates, respectively for DIAMonDS. Because the well-size of 384-well microplate is too small to succeed in normal development and lifespan, we only use the 384-well microplate for measuring adult survivorships in the short term (within about 2 weeks) such as stress or drug resistance assays. Sapphire then automatically analyzes and detects the transition points of pupariation, eclosion, and death in the newly acquired time-lapse images (<xref ref-type="fig" rid="fig1">Figure 1B,C</xref>). Our system can simultaneously monitor multiple scanners with a single personal computer.</p><p>As positional bias and fluctuations in environmental factors such as ambient temperature and relative humidity (RH) might markedly reduce the reliability of our system, all experiments were conducted in a plant growth chamber (LPH-410NS) with automatic temperature and humidity regulation and additional USB fans (Appendix 6). The scan surface temperature was continuously recorded with button-sized temperature data loggers (NK Labs LLC, Cambridge, MA, USA). Temperatures widely varied among locations under external illumination on/off conditions possibly because of irregular and uneven irradiation. Thus, we acquired time-lapse images without external illumination to maintain a steady temperature (<xref ref-type="fig" rid="fig1s1">Figure 1—figure supplement 1</xref>).</p></sec><sec id="s2-2"><title>DIAMonDS software: Sapphire</title><p>Sapphire automatically determines the static-to-dynamic and dynamic-to-static phase changes for all flies according to the time-lapse images acquired by the aforementioned scanner system. The following four processes were implemented in Sapphire to enable automatic life event detection based on individual <italic>Drosophila</italic> images (<xref ref-type="fig" rid="fig1">Figure 1C</xref>):</p><list list-type="order"><list-item><p>Images of single animals were segregated by image processing (<xref ref-type="fig" rid="fig1">Figure 1C</xref>, Step 1), enabling the system to readily target individual flies.</p></list-item><list-item><p>Semantic segmentation was performed to capture each insect in each well (<xref ref-type="fig" rid="fig1">Figure 1C</xref>, Step 2). Recently, artificial intelligence techniques have substantially improved both image classification (<xref ref-type="bibr" rid="bib8">Goodfellow et al., 2016</xref>) and segmentation (<xref ref-type="bibr" rid="bib2">Badrinarayanan et al., 2017</xref>; <xref ref-type="bibr" rid="bib24">Ronneberger et al., 2015</xref>). Here, we designed a fully convolutional network (FCN) specifying larval and adult segmentation. The FCN has encoder-decoder architecture (<xref ref-type="fig" rid="fig1s2">Figure 1—figure supplement 2</xref>) comprising three blocks, each including a convolution layer with a 3 × 3 filter, up/down sampling layer with a 2 × 2 filter, and dropout layer with a 25% ratio. The encoder and decoder parts were mutually connected by two convolution layers with 3 × 3 filters. The convolution layers in the encoder and decoder were fitted with rectifier linear units. The inputs to the layers were applied by batch normalization. The output layer was also a convolution layer and included reshaping and softmax functions.</p></list-item></list><p>The annotation data were manually created for larval and adult <italic>Drosophila</italic> and increased by general data augmentation techniques such as vertical and horizontal flips, rotation, and luminance modulation (Materials and methods).</p><p>After training with augmented data, the segmentation inference was calculated as a probability. If it was &gt; 0.5, the system regarded it as the target region (animal body). If it was &lt; 0.5, the system treated it as background. Consequently, the system obtained binary images wherein the animal body corresponded to one and the background was described as 0. Semantic segmentation was applied to all individuals and every sequential population image.</p><p>All trainings and inferences were performed on a Linux PC (Ubuntu) with four GPUs (GTX 1080Ti). All scripts were written in Python using the deep learning libraries keras (v. 2.0.9) and tensorflow-gpu (v. 1.4.0).</p><list list-type="order"><list-item><p>The system converted the labeled data to time series data by subtracting every two consecutive labeled images (<xref ref-type="fig" rid="fig1">Figure 1C</xref>, Step 3). After signaling, the system applied the ChangeFinder (CF) algorithm developed to detect turning points (<xref ref-type="bibr" rid="bib30">Takeuchi and Yamanishi, 2006</xref>) and evaluated total individual animal activity from the central gravity distance of the segmented area between two consecutive images (<xref ref-type="video" rid="video1">Video 1</xref>).</p></list-item><list-item><p>The system automatically determined life event transitions with single-animal resolutions from the CF signals (<xref ref-type="fig" rid="fig1">Figure 1C</xref>, Step 4). Life event transitions were estimated based on the transition points from dynamic to static or vice-versa. These were designated the maximum points in the CF signals. Death and pupariation corresponded to maximum CF points reflecting dynamic-to-static phase changes. In contrast, eclosion was characterized as a maximum CF point corresponding to a static-to-dynamic change. After transition point determination, the system summarized the automatic detection results using various visualization styles (<xref ref-type="fig" rid="fig1">Figure 1C</xref>, Step five and <xref ref-type="fig" rid="fig1s3">Figure 1—figure supplement 3</xref>). All algorithms and visualization tools were user-friendly web applications developed with the Dash framework in Python (<xref ref-type="fig" rid="fig1s3">Figure 1—figure supplement 3</xref>).</p></list-item></list><media id="video1" mime-subtype="mp4" mimetype="video" xlink:href="elife-58630-video1.mp4"><label>Video 1.</label><caption><title>The estimated activity history of a single fly by Sapphire.</title></caption></media></sec><sec id="s2-3"><title>Pupariation and eclosion timing detection by DIAMonDS</title><p>Apparent dynamic-to-static and vice-versa phase changes occur at pupariation and eclosion (<xref ref-type="fig" rid="fig2">Figure 2A</xref>). We attempted to detect individual fly pupariation and eclosion with DIAMonDS to validate it. Newly hatched first-instar (L1) larvae were placed into 96-well microplates containing 100 µL well<sup>−1</sup> standard fly media (<xref ref-type="fig" rid="fig2s1">Figure 2—figure supplement 1</xref>). Three microplates were fixed to the scanner surface, and the scanner was placed inverted in the incubator to prevent fly media leakage. The scanner was powered on, and time-lapse scanning was performed with VueScan (Materials and methods) until all flies eclosed. Thence, time-lapse images were analyzed with Sapphire (<xref ref-type="fig" rid="fig2">Figure 2A,B</xref>).</p><fig-group><fig id="fig2" position="float"><label>Figure 2.</label><caption><title>Evaluation of DIAMonDS for automatic detection of individual fly pupariation and eclosion.</title><p>(<bold>A</bold>) Schematic representation of pupariation and eclosion. Drastic changes in dynamic-to-static and static-to-dynamic states occur at pupariation and eclosion, respectively. At late L3, larval activity increases and transitions from feeding to wandering behavior. Dotted circles indicate animal bodies. (<bold>B</bold>) Time-lapse imaging was conducted until all flies eclosed into adults. Individual pupariation and eclosion transition points were separately analyzed in Sapphire. Wandering L3 larva showing high activity immediately before pupariation. (<bold>C,D</bold>) Scatterplot analyses comparing data for pupariation (<bold>C</bold>) and eclosion (<bold>D</bold>) obtained by Sapphire and visual handling to validate accuracy. (<bold>E–G</bold>) Scatterplot between pupariation and eclosion timing of individual flies (<bold>E</bold>) and box plots of pupariation (<bold>F</bold>) and eclosion (<bold>G</bold>) timing in males (n = 122; green dots) and females (n = 118; magenta dots). Whiskers indicate minima and maxima (***p&lt;0.001; n.s., no significant difference; unpaired <italic>t-</italic>test).</p><p><supplementary-material id="fig2sdata1"><label>Figure 2—source data 1.</label><caption><title>Data of individual pupariation timing obtained by Sapphire and visual handling (for <xref ref-type="fig" rid="fig2">Figure 2C</xref> and <xref ref-type="fig" rid="fig2s2">Figure 2—figure supplement 2A</xref>).</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig2-data1-v1.xlsx"/></supplementary-material></p><p><supplementary-material id="fig2sdata2"><label>Figure 2—source data 2.</label><caption><title>Data of individual eclosion timing obtained by Sapphire and visual handling (for <xref ref-type="fig" rid="fig2">Figure 2D</xref> and <xref ref-type="fig" rid="fig2s2">Figure 2—figure supplement 2B</xref>).</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig2-data2-v1.xlsx"/></supplementary-material></p><p><supplementary-material id="fig2sdata3"><label>Figure 2—source data 3.</label><caption><title>Data for scatterplot between pupariation and eclosion timing of individual flies and for box plots of pupariation and eclosion timing in males and females (for <xref ref-type="fig" rid="fig2">Figure 2E–G</xref>).</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig2-data3-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig2-v1.tif"/></fig><fig id="fig2s1" position="float" specific-use="child-fig"><label>Figure 2—figure supplement 1.</label><caption><title>Effects of experimental conditions.</title><p>(<bold>A</bold>) Percent survival at each developmental stage (1 st instar (<bold>L1</bold>) larva, pupa, and adult stages) when a single embryo or L1 larva is installed in each well of a 96-well microplate. Averages with s.d. are shown (n = 6 each; ***p&lt;0.001; **p&lt;0.01; n.s., no significant difference; Student’s unpaired <italic>t</italic>-test). (<bold>B</bold>) Percent survival at each developmental stage (3rd instar (<bold>L3</bold>) larva, pupa, and adult stages) in 100 or 150 μL medium/well. Averages with s.d. are shown (n = 6 each;; ***p&lt;0.001; n.s., no significant difference; Student’s unpaired <italic>t</italic>-test).</p><p><supplementary-material id="fig2s1sdata1"><label>Figure 2—figure supplement 1—source data 1.</label><caption><title>Effects of experimental conditions.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig2-figsupp1-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig2-figsupp1-v1.tif"/></fig><fig id="fig2s2" position="float" specific-use="child-fig"><label>Figure 2—figure supplement 2.</label><caption><title>Residual plot analysis of pupariation and eclosion time points.</title><p>(<bold>A</bold>) Residual plots of pupariation corresponding to <xref ref-type="fig" rid="fig2">Figure 2C</xref>. (<bold>B</bold>) Residual plots of eclosion corresponding to <xref ref-type="fig" rid="fig2">Figure 2D</xref>.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig2-figsupp2-v1.tif"/></fig><fig id="fig2s3" position="float" specific-use="child-fig"><label>Figure 2—figure supplement 3.</label><caption><title>Validation of CF and TH methods.</title><p>(<bold>A–D</bold>) Scatterplot and residual plot of eclosion timing between Sapphire (CF method: <bold>A</bold> and <bold>B</bold>; TH method: <bold>C</bold> and <bold>D</bold>) and visual handling of the same image data. Here, we transferred P14 stage pupae to new microplates once during time-lapse image acquisition.</p><p><supplementary-material id="fig2s3sdata1"><label>Figure 2—figure supplement 3—source data 1.</label><caption><title>Validation of CF and TH methods.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig2-figsupp3-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig2-figsupp3-v1.tif"/></fig><fig id="fig2s4" position="float" specific-use="child-fig"><label>Figure 2—figure supplement 4.</label><caption><title>Validation of plate position effect.</title><p>(<bold>A</bold>) Image of plates used for pupariation and eclosion time-lapse acquisition in DIAMonDS. (<bold>B–D</bold>) Box plots of pupariation (<bold>B</bold>), eclosion (<bold>C</bold>), and pupal duration (<bold>D</bold>) in male (green dots) and female (magenta dots) flies. Number of flies analyzed is indicated in parentheses on each graph. Whiskers indicate minima and maxima (***p&lt;0.001; **p&lt;0.01; n.s., no significant difference; Student’s unpaired <italic>t</italic>-test).</p><p><supplementary-material id="fig2s4sdata1"><label>Figure 2—figure supplement 4—source data 1.</label><caption><title>Validation of plate position effect.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig2-figsupp4-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig2-figsupp4-v1.tif"/></fig><fig id="fig2s5" position="float" specific-use="child-fig"><label>Figure 2—figure supplement 5.</label><caption><title>Effect of plate well size on fly’s development.</title><p>(<bold>A–C</bold>) Box plots of pupariation (<bold>A</bold>), eclosion (<bold>B</bold>), and pupal duration (<bold>C</bold>) in male flies. Number of flies analyzed is indicated in parentheses on each graph. Whiskers indicate minima and maxima (***p&lt;0.001; **p&lt;0.01; n.s., no significant difference; one-way ANOVA followed by Dunnett’s multiple comparison test).</p><p><supplementary-material id="fig2s5sdata1"><label>Figure 2—figure supplement 5—source data 1.</label><caption><title>Effect of plate well size on fly’s development.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig2-figsupp5-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig2-figsupp5-v1.tif"/></fig></fig-group><p>The L1 larvae dove into the media until mid-L3 (~2 d). As time-lapse scanning could not detect larval movements here, this so-called feeding stage was designated as static. In contrast, the larvae typically left the media and moved around the well surface during late L3 (<xref ref-type="fig" rid="fig2">Figure 2A</xref>). This so-called wandering stage was designated as dynamic, as there were consecutive high-activity wandering larval signals (<xref ref-type="fig" rid="fig2">Figure 2B</xref>), and its duration was 12–24 hr. Thereafter, L3 larval activity gradually decreased, and pupariation followed. During the pupal stage (~100 hr), the activity was not detected in a static phase. The second signal wave activity was detected just after dynamic eclosion.</p><p>Sapphire independently and automatically detects maximum peaks at the pupariation and eclosion transition points using machine learning based on an FCN to detect larval and adult animals separately (<xref ref-type="fig" rid="fig1">Figures 1C</xref> and <xref ref-type="fig" rid="fig2">2B</xref>). To verify Sapphire's accuracy, we compared pupariation and eclosion timings analyzed by Sapphire and those manually detected (visual handling) from the same images. The Sapphire and visual handling values were nearly identical (<xref ref-type="fig" rid="fig2">Figure 2C,D</xref>), 73.8% on pupariation and 84.2% on eclosion were only a slight difference within ± 10 frames between them (<xref ref-type="fig" rid="fig2s2">Figure 2—figure supplement 2</xref>). Film surface contamination after long-term rearing in small wells might have accounted for the observed decrease in Sapphire detection accuracy. Therefore, to investigate whether Sapphire's detection accuracy improves in a more transparent state of the lid, flies were transferred to the new microplate just after the time that all flies pupated (P14 stage) and scanned time-lapse scanning of the plates. The experiment resulted in 94.7% of values from Sapphire showed nearly identical (within ± 10 frames) to visual handling values, indicating that Sapphire's accuracy was greatly improved relative to the experimental setup in which the same microplate was used both for pupariation and eclosion detections (<xref ref-type="fig" rid="fig2s3">Figure 2—figure supplement 3A,B</xref>).</p><p>Arbitral image sequences such as raw images and the segmentation images could be analyzed in Sapphire (see Appendix 8). Sapphire calculates the CF signal obtained from the subtraction of consecutive segmentation images as fully automated method (CF method). Sapphire determined the timing of life-event by applying just thresholding on the arbitral time series data specified by user (TH method). At first, threshold is automatically calculated as an average of maximum and minimum value of the signal (auto-TH) and the threshold is modifiable by hands depending on user’s demand (manual-TH). Accuracy of CF method and auto- and manual- TH method on raw image subtraction was quantified in (Appendix 8). We compared CF and TH using the same time-lapse image set (<xref ref-type="fig" rid="fig2s3">Figure 2—figure supplement 3</xref>). The output of CF was superior to that of TH, as the former is relatively more sensitive to phase shifts. Thus, Sapphire is functional and highly invaluable in automatic analyses.</p><p>The relationship between pupariation and eclosion determined by DIAMonDS clearly revealed sexual dimorphism during development (<xref ref-type="fig" rid="fig2">Figure 2E</xref>). On average, females eclosed 4 hr earlier than males. A previous study corroborated this observation (<xref ref-type="bibr" rid="bib3">Bainbridge and Bownes, 1981</xref>). The pupariation transition time points did not differ between sexes. Therefore, sexual dimorphism in the eclosion time points reflects the difference in pupal duration between sexes (<xref ref-type="fig" rid="fig2">Figure 2E–G</xref>). No significant differences were found between plates 1 and 3 used here, indicating a minimal scan surface positional effect in DIAMonDS during the detection of the pupariation and eclosion time points (<xref ref-type="fig" rid="fig2s4">Figure 2—figure supplement 4</xref>). Altogether, these results indicate that DIAMonDS is suitable for automatic measurement of both the pupariation and eclosion time points at high temporal resolution.</p><p>To understand the effect of chamber size on fly development, we used three different sizes of microplates (96-well, 48-well, and 24-well) contained normal fly media for measuring pupariation and eclosion. We observed that timings of pupariation and eclosion were slightly but significantly shorten both in the 48-well and 24-well conditions and the pupal duration might have the fewer effects of well-size, suggesting that the chamber size might affect fly’s development (<xref ref-type="fig" rid="fig2s5">Figure 2—figure supplement 5</xref>).</p></sec><sec id="s2-4"><title>DIAMonDS enables autonomic measurement of pupariation and eclosion timing at high temporal resolution for each individual</title><p>DIAMonDS showed excellent performance in large-scale pupariation timing analyses (<xref ref-type="fig" rid="fig3s1">Figure 3—figure supplement 1</xref>). To evaluate its performance, we explored whether two distinct genetic and environmental conditions affect larval development. First, we used larvae with delayed pupariation at 29°C (genotype: <italic>R29H01-GAL4</italic> &gt; <italic>UAS</italic> TeTxLC), in which <italic>tetanus toxin light chain</italic> (<italic>TeTxLC</italic>) impaired serotonergic SE0<sub>PG</sub> neuron activity (<xref ref-type="bibr" rid="bib27">Shimada-Niwa and Niwa, 2014</xref>). To evaluate the influences of initial larval age on DIAMonDS measurement accuracy, we used L2, early L3, and late L3 larvae in the microplate assays. DIAMonDS successfully detected pupariation delays in larvae of all ages (<xref ref-type="fig" rid="fig3">Figure 3A</xref>). Thus, DIAMonDS performance remains highly stable over a wide range of conditions.</p><fig-group><fig id="fig3" position="float"><label>Figure 3.</label><caption><title>DIAMonDS is suitable for phenotypic analyses during larval development.</title><p>(<bold>A</bold>) Box plot analysis of pupariation timing in flies with impaired ecdysteroid biosynthesis at 29°C (genotype: <italic>R29H01 &gt; TeTxLC; R29H01&gt;+</italic> as a control). Larval age (L2, early L3, and late L3) at start of measurement had negligible impact on DIAMonDS analysis accuracy. Y-axis indicates pupariation timing from start of experiment. Number of flies analyzed indicated in parentheses on the graph. Whiskers indicate minima and maxima (*p&lt;0.05; **p&lt;0.01; ***p&lt;0.001; n.s., no significant difference; multiple <italic>t</italic>-test). (<bold>B</bold>) Three 96-well microplates were subdivided into nine regions according to sucrose concentration (0.15–1 M) in media used for DIAMonDS. (<bold>C</bold>) Scatterplot between pupariation and eclosion timing in males and females. (<bold>D–F</bold>) Box plots of pupariation timing (<bold>D</bold>), eclosion timing (<bold>E</bold>), and pupal duration (<bold>F</bold>). Whiskers indicate minima and maxima (*p&lt;0.05; **p&lt;0.01; ***p&lt;0.001; n.s., no significant difference vs. standard diet group; one-way ANOVA followed by Dunnett’s multiple comparison test). Number of flies analyzed indicated in parentheses on the graph.</p><p><supplementary-material id="fig3sdata1"><label>Figure 3—source data 1.</label><caption><title>Box plot analysis of pupariation timing in flies with impaired ecdysteroid biosynthesis at 29°C (for <xref ref-type="fig" rid="fig3">Figure 3A</xref>).</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig3-data1-v1.xlsx"/></supplementary-material></p><p><supplementary-material id="fig3sdata2"><label>Figure 3—source data 2.</label><caption><title>Effect of sucrose concentration in media on pupariation and eclosion (for <xref ref-type="fig" rid="fig3">Figure 3C–F</xref>).</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig3-data2-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig3-v1.tif"/></fig><fig id="fig3s1" position="float" specific-use="child-fig"><label>Figure 3—figure supplement 1.</label><caption><title>Determination of large-scale pupariation timing using DIAMonDS.</title><p>(<bold>A,B</bold>) Scatterplot (<bold>A</bold>) and residual plot (<bold>B</bold>) between Sapphire (CF method) and manual analysis (n = 850).</p><p><supplementary-material id="fig3s1sdata1"><label>Figure 3—figure supplement 1—source data 1.</label><caption><title>Determination of large-scale pupariation timing using DIAMonDS.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig3-figsupp1-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig3-figsupp1-v1.tif"/></fig></fig-group><p>We also used DIAMonDS to clarify the relationship between sugar concentration and development in the <italic>w<sup>1118</sup></italic> fruit fly strain (<xref ref-type="fig" rid="fig3">Figure 3B–F</xref>). A previous report stated that <italic>Drosophila</italic> larvae that were administered a high-sugar diet presented a type 2 diabetes-like phenotype and developmental delay (<xref ref-type="bibr" rid="bib18">Musselman et al., 2011</xref>). L1 larvae were placed in wells containing normal to high-sugar concentrations, scanned by time-lapse imaging, and the pupariation and eclosion time points were detected by Sapphire. Both pupariation and eclosion were gradually delayed in a sugar concentration-dependent manner. Therefore, excess sugar adversely affects larval growth (<xref ref-type="fig" rid="fig3">Figure 3B–E</xref>). When we compared the pupariation and eclosion time points among individual larvae, the pupal durations were nearly constant regardless of sugar concentration. Thus, the sugar concentration determines the time spent as a larva until pupariation, but it does not influence the time spent as a pupa (<xref ref-type="fig" rid="fig3">Figure 3F</xref>). Interestingly, Northrop reported that prolongation of the pre-imago stage of <italic>D. melanogaster</italic> by yeast supplementation had no impact on pupal stage duration (<xref ref-type="bibr" rid="bib20">Northrop, 1917a</xref>; <xref ref-type="bibr" rid="bib21">Northrop, 1917b</xref>). The process by which pupal duration is determined may be independent of larval dietary intake. Overall, DIAMonDS is a powerful toolkit for detecting the pupariation and eclosion time points and discloses the effects of several endogenous and exogenous factors on individual fly development.</p></sec><sec id="s2-5"><title>Detection of individual adult death events by DIAMonDS</title><p>Adult death time points can be measured at high temporal resolution with DIAMonDS. This tool efficiently detects sudden shifts from a dynamic to a static phase. Depending on the objective, experiments are performed over a broad range of time scales extending to nearly 3 months. Small- and large-scale impact assessment targets may include mutant phenotype, environmental stress, and chemicals and drugs (<xref ref-type="bibr" rid="bib1">Afschar et al., 2016</xref>; <xref ref-type="bibr" rid="bib10">Harshman et al., 1999</xref>; <xref ref-type="bibr" rid="bib15">Lin et al., 1998</xref>; <xref ref-type="bibr" rid="bib22">Parkes et al., 1998</xref>; <xref ref-type="bibr" rid="bib23">Piper and Partridge, 2016</xref>; <xref ref-type="bibr" rid="bib32">Tsuda et al., 2010</xref>; <xref ref-type="bibr" rid="bib34">Ziehm et al., 2015</xref>). DIAMonDS may be implemented using 96- and 384-well microplates to accommodate various parameters in death timing detection. The 96-well type is used in long-term detection, whereas the 384-well plate is better suited for short-term (≤10 d) detection and high-throughput assays.</p><p>We collected time-lapse scanning images at 1 min intervals for adult flies (4 day post-eclosion) maintained under starvation conditions (70 µL 1% agar/water (w/v)/well) in order to optimize DIAMonDS for 384-well microplates (<xref ref-type="fig" rid="fig4">Figure 4A</xref>). After the image data series consisted of dying individual flies, death time points were determined manually (visual manipulation) and by Sapphire. Both procedures generated nearly identical survival curves and were highly correlated (R = 0.9913), indicating the reliability of Sapphire (<xref ref-type="fig" rid="fig4">Figure 4A–D</xref> and <xref ref-type="fig" rid="fig4s1">Figure 4—figure supplement 1</xref>). Next, we examined whether the well positions within a microplate influence the death time points. No significant differences were found between each plate or among the sub-areas within each plate (<xref ref-type="fig" rid="fig4">Figure 4E</xref> and <xref ref-type="fig" rid="fig4s2">Figure 4—figure supplement 2</xref>). We also evaluated adult <italic>w<sup>1118</sup></italic> fly starvation tolerance in 96-well microplates and obtained results similar to those acquired from 384-well microplates (<xref ref-type="fig" rid="fig4">Figure 4F</xref>). Next, we tried to test whether the DIAMonDS can effectively detect the death time points even in flies showed a very reduced amount of activity. As a hypoactive fly model, we used decapitated females who keep motor skills but hardly moved until their death (<xref ref-type="bibr" rid="bib6">Ejima and Griffith, 2008</xref>). DIAMonDS showed relatively good results that were comparable to the visual results although there was a tendency for the accuracy to reduce slightly in comparison with the case of wild-type flies (<xref ref-type="fig" rid="fig4s3">Figure 4—figure supplement 3</xref>). Altogether, these results indicate that DIAMonDS is highly effective at detecting fruit fly death events.</p><fig-group><fig id="fig4" position="float"><label>Figure 4.</label><caption><title>Evaluation of DIAMonDS for detection of death of individual adults.</title><p>(<bold>A</bold>) A 384-well microplate with flies prepared for DIAMonDS. (<bold>B</bold>) Survivorship curves in starvation condition plotted by Sapphire (red line) or visual handling (blue line) using the same data. (<bold>C,D</bold>) Scatterplot and residual plot analysis comparing Sapphire (CF method) and visual handling to validate accuracy (n = 382). (<bold>E,F</bold>) Survivorship curves for starvation resistance tests on adult male <italic>w<sup>1118</sup></italic> flies using three 384- (<bold>E</bold>) and three 96-well (<bold>F</bold>) microplates. Number of flies analyzed indicated in parentheses in each plate.</p><p><supplementary-material id="fig4sdata1"><label>Figure 4—source data 1.</label><caption><title>Evaluation of DIAMonDS for detection of death of individual adults.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig4-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig4-v1.tif"/></fig><fig id="fig4s1" position="float" specific-use="child-fig"><label>Figure 4—figure supplement 1.</label><caption><title>Semi-automatic TH method for Sapphire.</title><p>(<bold>A,B</bold>) Scatterplot (<bold>A</bold>) and residual plot (<bold>B</bold>) between Sapphire (TH method) and manual analysis (visual handling) to validate accuracy (n = 382). Results corresponding to <xref ref-type="fig" rid="fig4">Figure 4C,D</xref>.</p><p><supplementary-material id="fig4s1sdata1"><label>Figure 4—figure supplement 1—source data 1.</label><caption><title>Semi-automatic TH method for Sapphire.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig4-figsupp1-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig4-figsupp1-v1.tif"/></fig><fig id="fig4s2" position="float" specific-use="child-fig"><label>Figure 4—figure supplement 2.</label><caption><title>Validation of the effect of sub-area on 384-well microplate.</title><p>(<bold>A–C</bold>) Box plots subdivided in the same dataset are shown as images on the left side of graphs. (n.s., no significant difference; Student’s unpaired <italic>t</italic>-test). Image of plates used to detect death timing in DIAMonDS. Number of flies analyzed indicated in parentheses on the graph.</p><p><supplementary-material id="fig4s2sdata1"><label>Figure 4—figure supplement 2—source data 1.</label><caption><title>Validation of the effect of sub-area on 384-well microplate.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig4-figsupp2-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig4-figsupp2-v1.tif"/></fig><fig id="fig4s3" position="float" specific-use="child-fig"><label>Figure 4—figure supplement 3.</label><caption><title>Death timing detection of decapitated adult females using DIAMonDS.</title><p>(<bold>A,B</bold>) Scatterplot (<bold>A</bold>) and residual plot (<bold>B</bold>) between Sapphire (CF method) and manual analysis (n = 45). (<bold>C</bold>) Survivorship curves. Red and blue lines indicate results determined by Sapphire (CF method) and visual handling, respectively (n = 45).</p><p><supplementary-material id="fig4s3sdata1"><label>Figure 4—figure supplement 3—source data 1.</label><caption><title>Death timing detection of decapitated adult females using DIAMonDS.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig4-figsupp3-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig4-figsupp3-v1.tif"/></fig></fig-group></sec><sec id="s2-6"><title>DIAMonDS performs stress resistance assays with high temporal resolution</title><p>To assess the efficacy of DIAMonDS at evaluating fly survival under various stress conditions, we performed a starvation assay on male and female <italic>w<sup>1118</sup></italic> flies (<xref ref-type="fig" rid="fig5">Figure 5A</xref>). They presented sexual dimorphism in terms of starvation resistance. Moreover, the temporal resolution used here (15 min intervals) was higher than those reported in previous studies (<xref ref-type="fig" rid="fig5">Figure 5B</xref> and <xref ref-type="fig" rid="fig5s1">Figure 5—figure supplement 1A,B</xref>; <xref ref-type="bibr" rid="bib9">Grönke et al., 2010</xref>; <xref ref-type="bibr" rid="bib14">Li et al., 2018</xref>).</p><fig-group><fig id="fig5" position="float"><label>Figure 5.</label><caption><title>Adult survival curve detection by DIAMonDS.</title><p>(<bold>A,B</bold>) Starvation tolerance test using male and female <italic>w<sup>1118</sup></italic> flies (n = 192 each). Rows of males and females were alternately arranged in 384-well microplate (<bold>A</bold>). Representative male and female survivorship curves (<bold>B</bold>). (<bold>C,D</bold>) DDT resistance test on male <italic>w<sup>1118</sup></italic> flies (n = 48 each). A 384-well microplate with YS media containing DDT concentration series (0–0.1%). Forty-eight male flies were exposed to each concentration and subjected to DIAMonDS (<bold>C</bold>). Survivorship curves show concentration-dependent toxic effects of DDT (<bold>D</bold>). (<bold>E,F</bold>) Paraquat resistance test on male <italic>mth<sup>1</sup></italic> and <italic>w<sup>1118</sup></italic> flies (n = 32 each). A 384-well microplate containing media with paraquat (0, 5, 10, and 20 mM). Rows of <italic>mth<sup>1</sup></italic> and <italic>w<sup>1118</sup></italic> flies were alternately arranged in wells (<bold>E</bold>). Survivorship curves for <italic>mth<sup>1</sup></italic> mutants (solid lines) and <italic>w<sup>1118</sup></italic> flies (dotted lines) substantially differed at all paraquat concentrations (<bold>F</bold>).</p><p><supplementary-material id="fig5sdata1"><label>Figure 5—source data 1.</label><caption><title>Adult survival curve detection by DIAMonDS (for <xref ref-type="fig" rid="fig5">Figure 5</xref> and <xref ref-type="fig" rid="fig5s1">Figure 5—figure supplement 1</xref>).</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig5-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig5-v1.tif"/></fig><fig id="fig5s1" position="float" specific-use="child-fig"><label>Figure 5—figure supplement 1.</label><caption><title>Comparison between CH and TH methods for detecting death time points in DIAMonDS.</title><p>(<bold>A,B</bold>) Results corresponding to <xref ref-type="fig" rid="fig5">Figure 5A,B</xref>. (<bold>C,D</bold>) Results corresponding to <xref ref-type="fig" rid="fig5">Figure 5C,D</xref>. (<bold>A,C</bold>) Survivorship curves. Solid and dotted lines indicate results determined by CF and TH methods, respectively. (<bold>B,D</bold>) Example of analysis by Sapphire using TH and CF methods.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig5-figsupp1-v1.tif"/></fig></fig-group><p>We then subjected the flies to various concentrations of dichlorodiphenyltrichloroethane (DDT) to identify possible resistance (<xref ref-type="fig" rid="fig5">Figure 5C,D</xref>; <xref ref-type="bibr" rid="bib1">Afschar et al., 2016</xref>). To a 384-well microplate, we added media consisting of 5% (w/v) sucrose and 0.5% (w/v) yeast as described in Appendix 1. The 48 <italic>w<sup>1118</sup></italic> males in each well were exposed to 0, 0.005, 0.01, 0.05, or 0.1% DDT (<xref ref-type="fig" rid="fig5">Figure 5C</xref>). DIAMonDS showed distinct variance in DDT resistance even between only slightly differing DDT concentrations (<xref ref-type="fig" rid="fig5">Figure 5D</xref> and <xref ref-type="fig" rid="fig5s1">Figure 5—figure supplement 1C,D</xref>).</p><p>We also investigated whether DIAMonDS can detect mutant fly phenotypes in stress resistance assays. Flies with the loss-of-function mutation <italic>methuselah</italic> (<italic>mth</italic>) present extended lifespan and resistance to several stressors including paraquat (<xref ref-type="bibr" rid="bib15">Lin et al., 1998</xref>). To test whether DIAMonDS can discriminate <italic>mth<sup>1</sup></italic> mutant stress tolerance phenotypes, we backcrossed the <italic>mth<sup>1</sup></italic> mutant five times with <italic>w<sup>1118</sup></italic> and compared the responses of both types of males to different paraquat concentrations (<xref ref-type="fig" rid="fig5">Figure 5E,F</xref>). The <italic>mth<sup>1</sup></italic> mutant presented significantly greater resistance to several paraquat concentrations than <italic>w<sup>1118</sup></italic>. The results of this assay demonstrated that paraquat resistance could be detected in the <italic>mth<sup>1</sup></italic> mutant using lower paraquat concentrations than those tested in an earlier study (20 mM)(<xref ref-type="bibr" rid="bib15">Lin et al., 1998</xref>). Thus, DIAMonDS can readily identify optimal concentrations at high temporal resolution in drug resistance assays.</p></sec><sec id="s2-7"><title>Sequential detection of multiple life events (pupariation, eclosion, and lifespan) using DIAMonDS</title><p>DIAMonDS successfully measured lifespans for individual <italic>w<sup>1118</sup></italic> flies. For long-term analysis, flies must be transferred to new microplates. We performed sequential pupariation, eclosion, and lifespan measurements for individual <italic>w<sup>1118</sup></italic> as shown in <xref ref-type="fig" rid="fig6">Figure 6A–C</xref>. The mean lifespans calculated and survival curves plotted for individual males and females were consistent with those of previous reports (<xref ref-type="fig" rid="fig6">Figure 6C</xref>; <xref ref-type="bibr" rid="bib16">Liu et al., 2009</xref>; <xref ref-type="bibr" rid="bib25">Schriner et al., 2014</xref>; <xref ref-type="bibr" rid="bib29">Suh et al., 2008</xref>; <xref ref-type="bibr" rid="bib31">Trostnikov et al., 2019</xref>).</p><fig-group><fig id="fig6" position="float"><label>Figure 6.</label><caption><title>Tracing entire life events of individual flies by DIAMonDS.</title><p>(<bold>A</bold>) Schematic diagram showing detection of pupariation, eclosion, and death transition points for each individual in DIAMonDS. (<bold>B</bold>) Scatterplot between pupariation and eclosion timing for individual female (n = 59) and male (n = 75) flies. (<bold>C</bold>) Survivorship curves for adult female (n = 59) and male (n = 75) flies. (<bold>D–I</bold>) Pearson’s correlation scatter plots indicate relationships between larval and pupal duration (<bold>D,G</bold>), between larval duration and adult lifespan (<bold>E,H</bold>), and between pupal duration and adult lifespan (<bold>F,I</bold>). Data are separately presented for female (<bold>D–F</bold>, n = 59 each) and male (<bold>G–I</bold>, n = 75 each) flies.</p><p><supplementary-material id="fig6sdata1"><label>Figure 6—source data 1.</label><caption><title>Tracing entire life events of individual flies by DIAMonDS.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig6-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig6-v1.tif"/></fig><fig id="fig6s1" position="float" specific-use="child-fig"><label>Figure 6—figure supplement 1.</label><caption><title>Effect of plate well size on adult survival.</title><p>(<bold>A–C</bold>) Box plots of adult percent survival at 1 st, 2nd, 3rd, and 4th weeks in <italic>w<sup>1118</sup></italic> (<bold>A</bold>), <italic>Oregon-R</italic> (<bold>B</bold>), and <italic>Canton-S</italic> (<bold>C</bold>) male flies. Flies were reared in several plate well sizes (96-well, 48-well, and 24-well) and transferred to appropriate new plates every week or 2–3 days cycles. Twenty-four flies were selected randomly from each well of microplate and calculated percent survival at each time point. Whiskers indicate minima and maxima (***p&lt;0.001; **p&lt;0.01; *p&lt;0.05; n.s., no significant difference; one-way ANOVA followed by Dunnett’s multiple comparison test, n = 6 each).</p><p><supplementary-material id="fig6s1sdata1"><label>Figure 6—figure supplement 1—source data 1.</label><caption><title>Effect of plate well size on adult survival.</title></caption><media mime-subtype="xlsx" mimetype="application" xlink:href="elife-58630-fig6-figsupp1-data1-v1.xlsx"/></supplementary-material></p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-fig6-figsupp1-v1.tif"/></fig></fig-group><p>Several studies described the relationships between developmental time and adult lifespan among various species (<xref ref-type="bibr" rid="bib17">Marchionni et al., 2020</xref>). Certain reports showed that prolonging developmental duration by yeast supplementation did not affect lifespan (<xref ref-type="bibr" rid="bib12">Hunter, 1959</xref>; <xref ref-type="bibr" rid="bib21">Northrop, 1917b</xref>). However, few studies focused on the associations between developmental timing and adult lifespan in <italic>Drosophila</italic>. To establish whether developmental stages and adult lifespans are interdependent in individual flies, we analyzed the following relationships: larval and pupal duration (<xref ref-type="fig" rid="fig6">Figure 6D,G</xref>), larval duration and adult lifespan (<xref ref-type="fig" rid="fig6">Figure 6E,H</xref>), and pupal duration and adult lifespan (<xref ref-type="fig" rid="fig6">Figure 6F,I</xref>). No significant correlations between the data for these pairs of parameters in either sex (<xref ref-type="fig" rid="fig6">Figure 6D–I</xref>) and those reported in previous studies were found. As the flies had the same genetic background and were exposed to the same diet and environmental conditions throughout all their life stages, it was unlikely that their genotypes influenced the relationship between development time and lifespan, demonstrating that DIAMonDS can detect unique relationships between developmental time and lifespan under different intrinsic and extrinsic conditions.</p><p>In this study, we were unsuccessful at using DIAMonDS to run long-term lifespan assays on other wild type fruit fly strains such as <italic>Oregon-R</italic> and <italic>Canton-S</italic>. Lethality accidentally escalated because the rearing conditions deteriorated. For instance, water droplets condensed and coalesced on the plate surfaces. However, these errors might have reflected relative metabolic and/or genetic differences among fly strains. To find common optimum conditions for measuring the lifespan of other laboratory strains, we have tried to observe the viability of three strains (<italic>w<sup>1118</sup></italic>, <italic>Oregon-R,</italic> and <italic>Canton-S</italic>) in condition with several microplate well-size (96-well, 48-well, and 24-well) (<xref ref-type="fig" rid="fig6s1">Figure 6—figure supplement 1</xref>). The viabilities were measured at the time point at 1, 2, 3, and 4 weeks with once plate replacement a week. We observed that the reduced viability was not rescued by changing to bigger microplate-well size, and somewhat, increasing well-size might have harmful effects on the survival of aged flies (<xref ref-type="fig" rid="fig6s1">Figure 6—figure supplement 1A–C</xref>). We next tested the two different plate replacement cycles (once a week, or once 2–3 days) using Oregon-R and Canton-S in 96-well microplate. We observed a shorter plate replacement cycle could effectively improve the viability (<xref ref-type="fig" rid="fig6s1">Figure 6—figure supplement 1B,C</xref>). However, because plate replacement is required a lot of work time, it seems to be not suitable for the high-throughput experiments. Further optimization of the experimental conditions will be necessary to effectively use DIAMonDS to conduct lifespan tests on a wide range of fly strains.</p></sec></sec><sec id="s3" sec-type="discussion"><title>Discussion</title><p>In this study, we attempted to develop DIAMonDS as a new tool to analyze automatically and sequentially the transition time point in the growth and developmental multi-stage of individual flies and use the transition time points as a phenotype. We demonstrated that DIAMonDS determines <italic>Drosophila</italic> pupariation, eclosion, and death at high temporal resolution. Further, it can analyze the relationships among stages by sequentially detecting multiple life events in many individuals. Thus, DIAMonDS can help clarify the complex interactions among genetic and environmental factors throughout the <italic>Drosophila</italic> life cycle. DIAMonDS can also eliminate the constraint of long data acquisition and analysis time intervals, operate multiple scanners simultaneously, and facilitate high-throughput analysis. Overall, DIAMonDS substantially ameliorates <italic>Drosophila</italic> research endeavors compared to conventional manual counting methods.</p><p>DIAMonDS automatically detects time points from time-lapse images via the novel algorithm Sapphire. Our results indicated that relative to manual detection, DIAMonDS correctly detected 74–85% of the pupariation and eclosion and ~ 92% of the death events within ± 10 frames. Thus, DIAMonDS is fully functional both for preliminary experiments and large-scale screening. The output of Sapphire can guide the manual determination of exact values. Therefore, DIAMonDS can generate publishable high-quality data. Detection accuracy could be greatly improved by reducing noise in time-lapse image acquisition. Data quality can also be enhanced via the machine learning training step in Sapphire. Optimization of experimental conditions is an important initial prerequisite step for stable, highly reliable data acquisition.</p><p>Nevertheless, DIAMonDS has certain limitations. First, it is unsuitable for the analysis of insects with normal circadian rhythms as the flatbed scanners repeatedly emit light for imaging. Second, the confined well space used for insect rearing might adversely affect individual fly health and behavior. Third, this approach might be inappropriate for establishing the effects of volatile or unstable substances on flies. Fourth, the reliability of this system may be reduced as the surfaces of the microplate lids become dirty over time. Fifth, occasionally, an animal cannot be detected in the image by the existence of a blind area of scanning. The system is not greatly affected even if ‘off-camera’ occurs during an active state of an animal. But the accuracy of event detection might be slightly affected when ‘off-camera’ occurs just at the timing of the event shift. It could be reduced by increasing the spatial- or temporal-resolution to eliminate the blind-area of each well. These problems could be solved by further improvement in the system. For example, detection of the circadian rhythm might be achieved by image acquisition using infrared rays, and It seems that the use of large-wells might expect to reduce the adverse effects of rearing on small-wells.</p><p>To date, we successfully used DIAMonDS to analyze the normal lifespan of the <italic>w<sup>1118</sup></italic> fruit fly strain but not those of the wild-type <italic>Oregon-R</italic> and <italic>Canton-S</italic>. One reason for this constraint is the frequent occurrence of accidental death caused mainly by water droplet coalescence on the microplate wall surfaces. Differences between strains may be due to differences in genetic background or intestinal environment. The experimental setup will require further optimization to overcome these limitations in lifespan analysis by DIAMonDS.</p><p>Here, we reported a novel technique for measuring multiple life events and their transition time points in <italic>Drosophila</italic>. In principle, DIAMonDS can also determine life cycle phase shifts in other small animals, and we intend to expand its applicability in medical, agricultural, and ongoing biological research.</p></sec><sec id="s4" sec-type="materials|methods"><title>Materials and methods</title><table-wrap id="keyresource" position="anchor"><label>Key resources table</label><table frame="hsides" rules="groups"><thead><tr><th>Reagent type <break/>(species) or resource</th><th>Designation</th><th>Source or reference</th><th>Identifiers</th><th>Additional information</th></tr></thead><tbody><tr><td>Gene (<italic>D. melanogaster</italic> )</td><td><italic>mth<sup>1</sup></italic></td><td>Flybase</td><td>FBti0012557</td><td/></tr><tr><td>Strain, strain background (<italic>D. melanogaster</italic> )</td><td><italic>w<sup>1118</sup></italic></td><td>Kept in lab stock</td><td/><td/></tr><tr><td>Strain, strain background (<italic>D. melanogaster</italic> )</td><td><italic>Oregon-R</italic></td><td>Kept in lab stock</td><td/><td/></tr><tr><td>Strain, strain background (<italic>D. melanogaster</italic> )</td><td><italic>Canton-S</italic></td><td>Gift from Dr. Uemura</td><td/><td/></tr><tr><td>Genetic reagent (<italic>D. melanogaster</italic> )</td><td><italic>R29H01-GAL4</italic></td><td>Flybase</td><td>FBti0191124</td><td/></tr><tr><td>Genetic reagent (<italic>D. melanogaster</italic> )</td><td><italic>UAS-TeTxLC</italic></td><td>Flybase</td><td>FBtp0001264</td><td/></tr><tr><td valign="top">Software, algorithm</td><td valign="top">Sapphire</td><td valign="top"/><td valign="top"/><td><ext-link ext-link-type="uri" xlink:href="https://github.com/kanglab/Sapphire/tree/master">https://github.com/kanglab/Sapphire/tree/master</ext-link></td></tr><tr><td valign="top">Software, algorithm</td><td valign="top">VueScan</td><td valign="top"/><td valign="top"/><td><ext-link ext-link-type="uri" xlink:href="https://www.hamrick.com">https://www.hamrick.com</ext-link></td></tr><tr><td valign="top">Software, algorithm</td><td valign="top">Prism 8</td><td valign="top"/><td valign="top"/><td><ext-link ext-link-type="uri" xlink:href="https://www.graphpad.com/scientific-software/prism/">https://www.graphpad.com/scientific-software/prism/</ext-link></td></tr></tbody></table></table-wrap><sec id="s4-1"><title><italic>D. melanogaster</italic> stocks and rearing conditions</title><p>The wild-type strain used here was mainly <italic>w<sup>1118</sup>, Oregon-R,</italic> and <italic>Canton-S</italic>. The <italic>mth<sup>1</sup></italic> (BDSC #27896) mutant males were used in the paraquat resistance test after backcrossing six-fold with <italic>w<sup>1118</sup>. R29H01-GAL4</italic> (BDSC #47343) and <italic>UAS-TeTxLC</italic> (BDSC #28838) were obtained from the Bloomington <italic>Drosophila</italic> Stock Center, Bloomington, IN, USA. All fly strains were maintained on standard medium at 25°C (Appendix 1).</p><p>Most experiments were conducted in a plant growth chamber (LPH-410NS; NK System Co. Ltd., Nagoya, Japan) maintained at 25°C and 60% RH. For the experiment using <italic>R29H01-GAL4 &gt; UAS TeTxLC,</italic> the larvae were reared at 29°C to increase GAL4 activity.</p></sec><sec id="s4-2"><title>DIAMonDS hardware and layout</title><p>Detailed DIAMonDS hardware and layout are described in Appendix 6.</p></sec><sec id="s4-3"><title>Microplate preparation for DIAMonDS</title><p>Microplates with 96 or 384 wells were filled with standard fruit fly culture media (Appendix 1). A handmade acrylic lid was used for the 384-well microplate (Appendix 2). Titer stick film (Watson, Tokyo, Japan) was used for the 96-well microplate (Appendix 3). To determine the pupariation and eclosion timings, the film seal on the 96-well microplate was perforated with air holes (0.35 mm diameter; eight holes/well) over each well. For the stress resistance and lifespan tests, the 96-well microplate was sealed with film, which was then cut to form a cross shape over each well. Individual adult flies were transferred to each well without anesthesia. For the 384-well microplate, the flies were anesthetized with triethylamine and placed individually into each well (Appendix 4). The acrylic lid was then securely affixed to the microplate with screws and masking tape (Appendix 2).</p></sec><sec id="s4-4"><title>Time-lapse image acquisition</title><p>Three microplates were secured with glass slides to the flatbed scanner surface as described in Appendix 5. The scanner was then connected to a personal computer. ‘VueScan’ scanner software in the PC was launched, and time-lapse images were acquired at 1–15 min intervals (Appendix 6).</p></sec><sec id="s4-5"><title>Starvation and drug resistance test</title><p>For the drug resistance assay, the wells of a microplate were filled with yeast-sucrose medium containing the appropriate chemicals as shown in Appendix 1. For the starvation test, the wells of a microplate were filled with 1% (w/v) agar (Appendix 1). Virgin adult flies were collected under CO<sub>2</sub> anesthesia, stored in a vial with normal food for 3–5 days, placed individually into each microplate well, and subjected to time-lapse image acquisition.</p></sec><sec id="s4-6"><title>Pupariation and eclosion time point detection for the same individuals</title><p>To measure pupariation and eclosion timing, newly hatched L1 larvae (24–25 hr AEL) were used as the lethality was too high when embryos were used (<xref ref-type="fig" rid="fig2s1">Figure 2—figure supplement 1A</xref>). The large media volume in each well (150 µL) also increased lethality because the embryos suffocated when the media became very viscous. Therefore, we used 100 µL media for this approach (<xref ref-type="fig" rid="fig2s1">Figure 2—figure supplement 1B</xref>). L2 or L3 larvae were also used in the DIAMonDS experiments. After the larvae were loaded into the microplate wells, the microplate was covered with Titer stick film (Watson, Tokyo, Japan), inverted on a predetermined area of the flatbed scanner surface, and fastened with tape. The scanner was then inverted in the incubator to prevent liquefied culture medium from falling onto the film surface. Time-lapse scanning was then run in VueScan in the PC. Scanning was terminated when all individuals eclosed to adults. The time-lapse images were analyzed in Sapphire (<xref ref-type="fig" rid="fig1">Figure 1B,C</xref>).</p></sec><sec id="s4-7"><title>Pupariation, eclosion, and lifespan detection in identical individuals in DIAMonDS</title><p>Microplates were prepared with synchronized L1 larva (one/well), and images were acquired as previously described. Developmental stages for individuals were analyzed according to the images saved to the PC. After all individuals reached the P14 stage pupa, the pupae were transferred to the same well positions in a new microplate. The wells were sealed with new film, and scanning was resumed. After all flies completely eclosed, the individual adults were transferred to the same well positions in a new microplate, and scanning was restarted to measure individual lifespans. Adult flies were transferred weekly to new microplates until all flies died. The acquired images were then analyzed in Sapphire. Finally, we introduced the data obtained by Sapphire into the DIAMonDS analysis templates (<xref ref-type="supplementary-material" rid="supp1">Supplementary file 1</xref>) and calculated the time of each life-event (Appendix 7).</p></sec><sec id="s4-8"><title>Life event detection algorithm and software: Sapphire</title><p>The present system included an automated, high-accuracy life event detection algorithm and image and signal processing (<xref ref-type="fig" rid="fig1">Figure 1C</xref>). The software could be obtained from (<ext-link ext-link-type="uri" xlink:href="https://github.com/kanglab/Sapphire/tree/master">https://github.com/kanglab/Sapphire/tree/master</ext-link>; <xref ref-type="bibr" rid="bib26">Seong et al., 2020</xref>; copy archived at <ext-link ext-link-type="uri" xlink:href="https://github.com/elifesciences-publications/Sapphire">https://github.com/elifesciences-publications/Sapphire)</ext-link>. The contents in the address also describe the installation, license, and system requirements such as directory tree and external dependencies. Quantitative algorithm summary and robustness in various parameter spaces are described in Appendix 8.</p></sec><sec id="s4-9"><title>Image processing</title><p>The present system performed semantic segmentation via a deep neural network whose architecture is described in <xref ref-type="fig" rid="fig1s2">Figure 1—figure supplement 2</xref>. Sufficient annotation data increases inference accuracy in deep learning. For network training, handmade supervised data were prepared and applied to image data augmentation. For adult body segmentation in death detection, the annotation data for 178 adults were introduced and magnified up to 71,200 by general image data augmentation (vertical and horizontal flips, rotation, and luminance modulation). For adult body segmentation in pupariation and eclosion detection, annotation data for 300 adults and 5760 larvae (as distractors) were prepared and magnified by ≤ 60,000 and≤57,600, respectively. For larval body segmentation in pupariation and eclosion detection, annotation data for 1839 larvae and 183,900 augmented data were introduced to train the network. The present system detected rough outlines of the animal bodies (Appendix 8).</p></sec><sec id="s4-10"><title>Signal processing</title><p>In the present system, subtractions between consecutive segmentation images were converted to signals in CF, which is a change point detection algorithm (<xref ref-type="bibr" rid="bib30">Takeuchi and Yamanishi, 2006</xref>).</p><p>The CF signal was obtained as follows:</p><p>1. Considering the following AR model for time series data <inline-formula><mml:math id="inf1"><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:math></inline-formula>:<disp-formula id="equ1"><label>(1)</label><mml:math id="m1"><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:msub><mml:mrow><mml:mi>A</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi><mml:mo>-</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi><mml:mo>-</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:msub><mml:mrow><mml:mi>A</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi><mml:mo>-</mml:mo><mml:mn>2</mml:mn></mml:mrow></mml:msub><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi><mml:mo>-</mml:mo><mml:mn>2</mml:mn></mml:mrow></mml:msub><mml:mo>+</mml:mo><mml:mo>⋯</mml:mo></mml:math></disp-formula></p><p>2. Inference of parameters <inline-formula><mml:math id="inf2"><mml:mi>θ</mml:mi><mml:mo>=</mml:mo><mml:mo>(</mml:mo><mml:msub><mml:mrow><mml:mi>A</mml:mi></mml:mrow><mml:mrow><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mo>,</mml:mo><mml:mo>⋯</mml:mo><mml:mo>,</mml:mo><mml:msub><mml:mrow><mml:mi>A</mml:mi></mml:mrow><mml:mrow><mml:mi>k</mml:mi></mml:mrow></mml:msub><mml:mo>,</mml:mo><mml:mi>μ</mml:mi><mml:mo>,</mml:mo><mml:mi>σ</mml:mi><mml:mo>)</mml:mo></mml:math></inline-formula> by maximizing <italic>I</italic>:<disp-formula id="equ2"><label>(2)</label><mml:math id="m2"><mml:mi>I</mml:mi><mml:mo>=</mml:mo><mml:mrow><mml:msubsup><mml:mo>∑</mml:mo><mml:mrow><mml:mi>i</mml:mi><mml:mo>=</mml:mo><mml:mn>1</mml:mn></mml:mrow><mml:mrow><mml:mi>t</mml:mi></mml:mrow></mml:msubsup><mml:mrow><mml:msup><mml:mrow><mml:mfenced separators="|"><mml:mrow><mml:mn>1</mml:mn><mml:mo>-</mml:mo><mml:mi>r</mml:mi></mml:mrow></mml:mfenced></mml:mrow><mml:mrow><mml:mi>t</mml:mi><mml:mo>-</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msup></mml:mrow></mml:mrow><mml:mrow><mml:mrow><mml:mi mathvariant="normal">log</mml:mi></mml:mrow><mml:mo>⁡</mml:mo><mml:mrow><mml:mi>P</mml:mi><mml:mfenced separators="|"><mml:mrow><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi></mml:mrow></mml:msub><mml:mo>|</mml:mo><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi><mml:mo>-</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mo>,</mml:mo><mml:mi>θ</mml:mi></mml:mrow></mml:mfenced></mml:mrow></mml:mrow></mml:math></disp-formula></p><p>3. Calculation of scores:<disp-formula id="equ3"><label>(3)</label><mml:math id="m3"><mml:mi>S</mml:mi><mml:mi>c</mml:mi><mml:mi>o</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mfenced separators="|"><mml:mrow><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:mrow></mml:mfenced><mml:mo>=</mml:mo><mml:mo>-</mml:mo><mml:mrow><mml:mrow><mml:mi mathvariant="normal">log</mml:mi></mml:mrow><mml:mo>⁡</mml:mo><mml:mrow><mml:msub><mml:mrow><mml:mi>P</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi><mml:mo>-</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msub><mml:mfenced separators="|"><mml:mrow><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi></mml:mrow></mml:msub><mml:mo>|</mml:mo><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi><mml:mo>-</mml:mo><mml:mn>1</mml:mn></mml:mrow></mml:msub></mml:mrow></mml:mfenced></mml:mrow></mml:mrow></mml:math></disp-formula></p><p>4. Time averaging of scores:<disp-formula id="equ4"><label>(4)</label><mml:math id="m4"><mml:msub><mml:mrow><mml:mi>y</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi></mml:mrow></mml:msub><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:mn>1</mml:mn></mml:mrow><mml:mrow><mml:mi>T</mml:mi></mml:mrow></mml:mfrac><mml:mrow><mml:munderover><mml:mo movablelimits="false">∑</mml:mo><mml:mrow><mml:mi>i</mml:mi><mml:mo>=</mml:mo><mml:mi>t</mml:mi><mml:mo>-</mml:mo><mml:mi>T</mml:mi><mml:mo>+</mml:mo><mml:mn>1</mml:mn></mml:mrow><mml:mrow><mml:mi>t</mml:mi></mml:mrow></mml:munderover><mml:mrow><mml:mi>S</mml:mi><mml:mi>c</mml:mi><mml:mi>o</mml:mi><mml:mi>r</mml:mi><mml:mi>e</mml:mi><mml:mo>(</mml:mo><mml:msub><mml:mrow><mml:mi>x</mml:mi></mml:mrow><mml:mrow><mml:mi>i</mml:mi></mml:mrow></mml:msub><mml:mo>)</mml:mo></mml:mrow></mml:mrow></mml:math></disp-formula></p><p>5. Recalculating scores for <inline-formula><mml:math id="inf3"><mml:msub><mml:mrow><mml:mi>y</mml:mi></mml:mrow><mml:mrow><mml:mi>t</mml:mi></mml:mrow></mml:msub></mml:math></inline-formula>:</p><p>For death detection, the CF signal was calculated from the adult body segmentation and the death timing and determined as a maximum CF signal point capturing dynamic-to-static changes (Appendix 8). On the other hand, two CF signals were obtained from the adult and larval body segmentations in pupariation and eclosion detection. Pupariation is defined as the maximum dynamic-to-static transition point for larvae. Eclosion is defined as the maximum static-to-dynamic transition point for adults (Appendix 8). After time-lapse scanning, we can easily discriminate ‘out-of-event’, such as larval, and, pupal dead individuals. Sapphire can exclude ‘out-of-event’ wells by making the ‘black lists’ file (Appendix 7).</p></sec><sec id="s4-11"><title>Statistics</title><p>Data were analyzed, and graphs were plotted in GraphPad Prism v. 8 (GraphPad Software, San Diego, CA, USA). A student’s unpaired, two-tailed <italic>t</italic>-test was performed to compare differences between groups in each experiment and Dunnett's method of one-way ANOVA was used for multiple comparison test (***p&lt;0.001; **p&lt;0.01; *p&lt;0.05; n.s., no significant).</p></sec></sec></body><back><ack id="ack"><title>Acknowledgements</title><p>We are deeply grateful to Tadashi Uemura (Kyoto University) for comments, discussion and helpful supports. We thank Yuko Iijima, Eisuke Imura and Hsin Kuang Lin for their technical assistance. We are also grateful to Seino Masaki, Maki Otori, Mayu Kudo, Masaya Hata and Hiroki Watanabe for their technical support in image processing. I received generous support from Yoichi Shinkai (RIKEN CPR) and Shunsuke Ishii (RIKEN CPR).</p></ack><sec id="s5" sec-type="additional-information"><title>Additional information</title><fn-group content-type="competing-interest"><title>Competing interests</title><fn fn-type="COI-statement" id="conf1"><p>No competing interests declared</p></fn></fn-group><fn-group content-type="author-contribution"><title>Author contributions</title><fn fn-type="con" id="con1"><p>Co-last author (jointly supervised this work), Conceptualization, Data curation, Software, Formal analysis, Supervision, Funding acquisition, Validation, Investigation, Visualization, Methodology, Writing - original draft, Project administration, Writing - review and editing</p></fn><fn fn-type="con" id="con2"><p>Data curation, Software, Formal analysis, Validation, Investigation, Visualization, Methodology, Writing - original draft</p></fn><fn fn-type="con" id="con3"><p>Formal analysis, Validation, Investigation, Writing - review and editing</p></fn><fn fn-type="con" id="con4"><p>Funding acquisition, Investigation, Writing - review and editing</p></fn><fn fn-type="con" id="con5"><p>Co-last author (jointly supervised this work), Data curation, Software, Formal analysis, Supervision, Funding acquisition, Validation, Investigation, Visualization, Methodology, Writing - original draft, Project administration, Writing - review and editing</p></fn></fn-group><fn-group content-type="ethics-information"><title>Ethics</title><fn fn-type="other"><p>Animal experimentation: This study was performed in strict accordance with the recommendations in the Guide for the Care and Use of Laboratory Animals of the RIKEN Institute.</p></fn></fn-group></sec><sec id="s6" sec-type="supplementary-material"><title>Additional files</title><supplementary-material id="supp1"><label>Supplementary file 1.</label><caption><title>DIAMonDS analysis templates.</title></caption><media mime-subtype="zip" mimetype="application" xlink:href="elife-58630-supp1-v1.zip"/></supplementary-material><supplementary-material id="transrepform"><label>Transparent reporting form</label><media mime-subtype="docx" mimetype="application" xlink:href="elife-58630-transrepform-v1.docx"/></supplementary-material></sec><sec id="s7" sec-type="data-availability"><title>Data availability</title><p>To identify the phase change time points for each fly event, we have used the Sappire, our newly developed algorithm and web application. We have deposited the code of Sapphire in the GitHub (<ext-link ext-link-type="uri" xlink:href="https://github.com/kanglab/Sapphire/tree/master">https://github.com/kanglab/Sapphire/tree/master</ext-link> copy archived at <ext-link ext-link-type="uri" xlink:href="https://github.com/elifesciences-publications/Sapphire">https://github.com/elifesciences-publications/Sapphire</ext-link>). The all statistical analyses have used Prism 8 software.</p></sec><ref-list><title>References</title><ref id="bib1"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Afschar</surname> <given-names>S</given-names></name><name><surname>Toivonen</surname> <given-names>JM</given-names></name><name><surname>Hoffmann</surname> <given-names>JM</given-names></name><name><surname>Tain</surname> <given-names>LS</given-names></name><name><surname>Wieser</surname> <given-names>D</given-names></name><name><surname>Finlayson</surname> <given-names>AJ</given-names></name><name><surname>Driege</surname> <given-names>Y</given-names></name><name><surname>Alic</surname> <given-names>N</given-names></name><name><surname>Emran</surname> <given-names>S</given-names></name><name><surname>Stinn</surname> <given-names>J</given-names></name><name><surname>Froehlich</surname> <given-names>J</given-names></name><name><surname>Piper</surname> <given-names>MD</given-names></name><name><surname>Partridge</surname> <given-names>L</given-names></name></person-group><year iso-8601-date="2016">2016</year><article-title>Nuclear hormone receptor DHR96 mediates the resistance to xenobiotics but not the increased lifespan of insulin-mutant <italic>Drosophila</italic></article-title><source>PNAS</source><volume>113</volume><fpage>1321</fpage><lpage>1326</lpage><pub-id pub-id-type="doi">10.1073/pnas.1515137113</pub-id><pub-id pub-id-type="pmid">26787908</pub-id></element-citation></ref><ref id="bib2"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Badrinarayanan</surname> <given-names>V</given-names></name><name><surname>Kendall</surname> <given-names>A</given-names></name><name><surname>Cipolla</surname> <given-names>R</given-names></name></person-group><year iso-8601-date="2017">2017</year><article-title>SegNet: a deep convolutional Encoder-Decoder architecture for image segmentation</article-title><source>IEEE Transactions on Pattern Analysis and Machine Intelligence</source><volume>39</volume><fpage>2481</fpage><lpage>2495</lpage><pub-id pub-id-type="doi">10.1109/TPAMI.2016.2644615</pub-id><pub-id pub-id-type="pmid">28060704</pub-id></element-citation></ref><ref id="bib3"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Bainbridge</surname> <given-names>SP</given-names></name><name><surname>Bownes</surname> <given-names>M</given-names></name></person-group><year iso-8601-date="1981">1981</year><article-title>Staging the metamorphosis of <italic>Drosophila melanogaster</italic></article-title><source>Journal of Embryology and Experimental Morphology</source><volume>66</volume><fpage>57</fpage><lpage>80</lpage><pub-id pub-id-type="pmid">6802923</pub-id></element-citation></ref><ref id="bib4"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Buhler</surname> <given-names>K</given-names></name><name><surname>Clements</surname> <given-names>J</given-names></name><name><surname>Winant</surname> <given-names>M</given-names></name><name><surname>Bolckmans</surname> <given-names>L</given-names></name><name><surname>Vulsteke</surname> <given-names>V</given-names></name><name><surname>Callaerts</surname> <given-names>P</given-names></name></person-group><year iso-8601-date="2018">2018</year><article-title>Growth control through regulation of insulin signalling by nutrition-activated steroid hormone in <italic>Drosophila</italic></article-title><source>Development</source><volume>145</volume><elocation-id>dev165654</elocation-id><pub-id pub-id-type="doi">10.1242/dev.165654</pub-id><pub-id pub-id-type="pmid">30266830</pub-id></element-citation></ref><ref id="bib5"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Demay</surname> <given-names>Y</given-names></name><name><surname>Perochon</surname> <given-names>J</given-names></name><name><surname>Szuplewski</surname> <given-names>S</given-names></name><name><surname>Mignotte</surname> <given-names>B</given-names></name><name><surname>Gaumer</surname> <given-names>S</given-names></name></person-group><year iso-8601-date="2014">2014</year><article-title>The PERK pathway independently triggers apoptosis and a Rac1/Slpr/JNK/Dilp8 signaling favoring tissue homeostasis in a chronic ER stress <italic>Drosophila</italic> model</article-title><source>Cell Death &amp; Disease</source><volume>5</volume><elocation-id>e1452</elocation-id><pub-id pub-id-type="doi">10.1038/cddis.2014.403</pub-id><pub-id pub-id-type="pmid">25299777</pub-id></element-citation></ref><ref id="bib6"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Ejima</surname> <given-names>A</given-names></name><name><surname>Griffith</surname> <given-names>LC</given-names></name></person-group><year iso-8601-date="2008">2008</year><article-title>Courtship initiation is stimulated by acoustic signals in <italic>Drosophila melanogaster</italic></article-title><source>PLOS ONE</source><volume>3</volume><elocation-id>e3246</elocation-id><pub-id pub-id-type="doi">10.1371/journal.pone.0003246</pub-id><pub-id pub-id-type="pmid">18802468</pub-id></element-citation></ref><ref id="bib7"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Fuyama</surname> <given-names>Y</given-names></name></person-group><year iso-8601-date="1977">1977</year><article-title>Triethylamine: an anesthetic for <italic>Drosophila</italic> with prolonged effect</article-title><source>Drosphila Information Service</source><volume>52</volume><elocation-id>173</elocation-id></element-citation></ref><ref id="bib8"><element-citation publication-type="book"><person-group person-group-type="author"><name><surname>Goodfellow</surname> <given-names>I</given-names></name><name><surname>Bengio</surname> <given-names>Y</given-names></name><name><surname>Courville</surname> <given-names>A</given-names></name></person-group><year iso-8601-date="2016">2016</year><source>Deep Learning</source><publisher-name>The MIT Press</publisher-name></element-citation></ref><ref id="bib9"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Grönke</surname> <given-names>S</given-names></name><name><surname>Clarke</surname> <given-names>DF</given-names></name><name><surname>Broughton</surname> <given-names>S</given-names></name><name><surname>Andrews</surname> <given-names>TD</given-names></name><name><surname>Partridge</surname> <given-names>L</given-names></name></person-group><year iso-8601-date="2010">2010</year><article-title>Molecular evolution and functional characterization of <italic>Drosophila</italic> insulin-like peptides</article-title><source>PLOS Genetics</source><volume>6</volume><elocation-id>e1000857</elocation-id><pub-id pub-id-type="doi">10.1371/journal.pgen.1000857</pub-id><pub-id pub-id-type="pmid">20195512</pub-id></element-citation></ref><ref id="bib10"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Harshman</surname> <given-names>LG</given-names></name><name><surname>Moore</surname> <given-names>KM</given-names></name><name><surname>Sty</surname> <given-names>MA</given-names></name><name><surname>Magwire</surname> <given-names>MM</given-names></name></person-group><year iso-8601-date="1999">1999</year><article-title>Stress resistance and longevity in selected lines of <italic>Drosophila melanogaster</italic></article-title><source>Neurobiology of Aging</source><volume>20</volume><fpage>521</fpage><lpage>529</lpage><pub-id pub-id-type="doi">10.1016/S0197-4580(99)00091-3</pub-id><pub-id pub-id-type="pmid">10638525</pub-id></element-citation></ref><ref id="bib11"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Hironaka</surname> <given-names>KI</given-names></name><name><surname>Fujimoto</surname> <given-names>K</given-names></name><name><surname>Nishimura</surname> <given-names>T</given-names></name></person-group><year iso-8601-date="2019">2019</year><article-title>Optimal scaling of critical size for metamorphosis in the genus <italic>Drosophila</italic></article-title><source>iScience</source><volume>20</volume><fpage>348</fpage><lpage>358</lpage><pub-id pub-id-type="doi">10.1016/j.isci.2019.09.033</pub-id><pub-id pub-id-type="pmid">31610371</pub-id></element-citation></ref><ref id="bib12"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Hunter</surname> <given-names>PE</given-names></name></person-group><year iso-8601-date="1959">1959</year><article-title>Selection of <italic>Drosophila melanogaster</italic> for Length of Larval Period</article-title><source>Zeitschrift Fur Vererbungslehre</source><volume>90</volume><fpage>7</fpage><lpage>28</lpage><pub-id pub-id-type="doi">10.1007/BF00888570</pub-id><pub-id pub-id-type="pmid">13660242</pub-id></element-citation></ref><ref id="bib13"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Külshammer</surname> <given-names>E</given-names></name><name><surname>Mundorf</surname> <given-names>J</given-names></name><name><surname>Kilinc</surname> <given-names>M</given-names></name><name><surname>Frommolt</surname> <given-names>P</given-names></name><name><surname>Wagle</surname> <given-names>P</given-names></name><name><surname>Uhlirova</surname> <given-names>M</given-names></name></person-group><year iso-8601-date="2015">2015</year><article-title>Interplay among <italic>Drosophila</italic> transcription factors Ets21c, fos and Ftz-F1 drives JNK-mediated tumor malignancy</article-title><source>Disease Models &amp; Mechanisms</source><volume>8</volume><fpage>1279</fpage><lpage>1293</lpage><pub-id pub-id-type="doi">10.1242/dmm.020719</pub-id><pub-id pub-id-type="pmid">26398940</pub-id></element-citation></ref><ref id="bib14"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Li</surname> <given-names>P</given-names></name><name><surname>Huang</surname> <given-names>P</given-names></name><name><surname>Li</surname> <given-names>X</given-names></name><name><surname>Yin</surname> <given-names>D</given-names></name><name><surname>Ma</surname> <given-names>Z</given-names></name><name><surname>Wang</surname> <given-names>H</given-names></name><name><surname>Song</surname> <given-names>H</given-names></name></person-group><year iso-8601-date="2018">2018</year><article-title>Tankyrase mediates K63-Linked ubiquitination of JNK to confer stress tolerance and influence lifespan in <italic>Drosophila</italic></article-title><source>Cell Reports</source><volume>25</volume><fpage>437</fpage><lpage>448</lpage><pub-id pub-id-type="doi">10.1016/j.celrep.2018.09.036</pub-id><pub-id pub-id-type="pmid">30304683</pub-id></element-citation></ref><ref id="bib15"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Lin</surname> <given-names>YJ</given-names></name><name><surname>Seroude</surname> <given-names>L</given-names></name><name><surname>Benzer</surname> <given-names>S</given-names></name></person-group><year iso-8601-date="1998">1998</year><article-title>Extended life-span and stress resistance in the <italic>Drosophila</italic> mutant methuselah</article-title><source>Science</source><volume>282</volume><fpage>943</fpage><lpage>946</lpage><pub-id pub-id-type="doi">10.1126/science.282.5390.943</pub-id><pub-id pub-id-type="pmid">9794765</pub-id></element-citation></ref><ref id="bib16"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Liu</surname> <given-names>YL</given-names></name><name><surname>Lu</surname> <given-names>WC</given-names></name><name><surname>Brummel</surname> <given-names>TJ</given-names></name><name><surname>Yuh</surname> <given-names>CH</given-names></name><name><surname>Lin</surname> <given-names>PT</given-names></name><name><surname>Kao</surname> <given-names>TY</given-names></name><name><surname>Li</surname> <given-names>FY</given-names></name><name><surname>Liao</surname> <given-names>PC</given-names></name><name><surname>Benzer</surname> <given-names>S</given-names></name><name><surname>Wang</surname> <given-names>HD</given-names></name></person-group><year iso-8601-date="2009">2009</year><article-title>Reduced expression of <italic>alpha-1,2-mannosidase I</italic> extends lifespan in <italic>Drosophila melanogaster</italic> and <italic>Caenorhabditis elegans</italic></article-title><source>Aging Cell</source><volume>8</volume><fpage>370</fpage><lpage>379</lpage><pub-id pub-id-type="doi">10.1111/j.1474-9726.2009.00471.x</pub-id><pub-id pub-id-type="pmid">19302370</pub-id></element-citation></ref><ref id="bib17"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Marchionni</surname> <given-names>S</given-names></name><name><surname>Sell</surname> <given-names>C</given-names></name><name><surname>Lorenzini</surname> <given-names>A</given-names></name></person-group><year iso-8601-date="2020">2020</year><article-title>Development and longevity: cellular and molecular determinants - A Mini-Review</article-title><source>Gerontology</source><volume>66</volume><fpage>223</fpage><lpage>230</lpage><pub-id pub-id-type="doi">10.1159/000505327</pub-id><pub-id pub-id-type="pmid">32036369</pub-id></element-citation></ref><ref id="bib18"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Musselman</surname> <given-names>LP</given-names></name><name><surname>Fink</surname> <given-names>JL</given-names></name><name><surname>Narzinski</surname> <given-names>K</given-names></name><name><surname>Ramachandran</surname> <given-names>PV</given-names></name><name><surname>Hathiramani</surname> <given-names>SS</given-names></name><name><surname>Cagan</surname> <given-names>RL</given-names></name><name><surname>Baranski</surname> <given-names>TJ</given-names></name></person-group><year iso-8601-date="2011">2011</year><article-title>A high-sugar diet produces obesity and insulin resistance in wild-type <italic>Drosophila</italic></article-title><source>Disease Models &amp; Mechanisms</source><volume>4</volume><fpage>842</fpage><lpage>849</lpage><pub-id pub-id-type="doi">10.1242/dmm.007948</pub-id><pub-id pub-id-type="pmid">21719444</pub-id></element-citation></ref><ref id="bib19"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Nikhil</surname> <given-names>KL</given-names></name><name><surname>Ratna</surname> <given-names>K</given-names></name><name><surname>Sharma</surname> <given-names>VK</given-names></name></person-group><year iso-8601-date="2016">2016</year><article-title>Life-history traits of <italic>Drosophila melanogaster</italic> populations exhibiting early and late eclosion chronotypes</article-title><source>BMC Evolutionary Biology</source><volume>16</volume><elocation-id>46</elocation-id><pub-id pub-id-type="doi">10.1186/s12862-016-0622-3</pub-id><pub-id pub-id-type="pmid">26922082</pub-id></element-citation></ref><ref id="bib20"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Northrop</surname> <given-names>JH</given-names></name></person-group><year iso-8601-date="1917">1917a</year><article-title>The effect of prolongation of the period of growth on the total duration of life</article-title><source>Journal of Biological Chemistry</source><volume>32</volume><fpage>123</fpage><lpage>126</lpage></element-citation></ref><ref id="bib21"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Northrop</surname> <given-names>JH</given-names></name></person-group><year iso-8601-date="1917">1917b</year><article-title>The role of yeast in the nutrition of an insect <italic>Drosophila</italic></article-title><source>Journal of Biological Chemistry</source><volume>30</volume><fpage>1081</fpage><lpage>1187</lpage></element-citation></ref><ref id="bib22"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Parkes</surname> <given-names>TL</given-names></name><name><surname>Elia</surname> <given-names>AJ</given-names></name><name><surname>Dickinson</surname> <given-names>D</given-names></name><name><surname>Hilliker</surname> <given-names>AJ</given-names></name><name><surname>Phillips</surname> <given-names>JP</given-names></name><name><surname>Boulianne</surname> <given-names>GL</given-names></name></person-group><year iso-8601-date="1998">1998</year><article-title>Extension of <italic>Drosophila</italic> lifespan by overexpression of human SOD1 in motorneurons</article-title><source>Nature Genetics</source><volume>19</volume><fpage>171</fpage><lpage>174</lpage><pub-id pub-id-type="doi">10.1038/534</pub-id><pub-id pub-id-type="pmid">9620775</pub-id></element-citation></ref><ref id="bib23"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Piper</surname> <given-names>MD</given-names></name><name><surname>Partridge</surname> <given-names>L</given-names></name></person-group><year iso-8601-date="2016">2016</year><article-title>Protocols to study aging in <italic>Drosophila</italic></article-title><source>Methods in Molecular Biology</source><volume>1478</volume><fpage>291</fpage><lpage>302</lpage><pub-id pub-id-type="doi">10.1007/978-1-4939-6371-3_18</pub-id><pub-id pub-id-type="pmid">27730590</pub-id></element-citation></ref><ref id="bib24"><element-citation publication-type="book"><person-group person-group-type="author"><name><surname>Ronneberger</surname> <given-names>O</given-names></name><name><surname>Fischer</surname> <given-names>P</given-names></name><name><surname>Brox</surname> <given-names>T</given-names></name></person-group><year iso-8601-date="2015">2015</year><chapter-title>International Conference on Medical image computing and computer-assisted intervention</chapter-title><person-group person-group-type="editor"><name><surname>Navab</surname> <given-names>N</given-names></name><name><surname>Hornegger</surname> <given-names>J</given-names></name><name><surname>Wells</surname> <given-names>W</given-names></name><name><surname>Frangi</surname> <given-names>A</given-names></name></person-group><source>U-Net: Convolutional Networks for Biomedical Image Segmentation </source><publisher-name>Springer</publisher-name><fpage>234</fpage><lpage>241</lpage><pub-id pub-id-type="doi">10.1007/978-3-319-24574-4_28</pub-id></element-citation></ref><ref id="bib25"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Schriner</surname> <given-names>SE</given-names></name><name><surname>Kuramada</surname> <given-names>S</given-names></name><name><surname>Lopez</surname> <given-names>TE</given-names></name><name><surname>Truong</surname> <given-names>S</given-names></name><name><surname>Pham</surname> <given-names>A</given-names></name><name><surname>Jafari</surname> <given-names>M</given-names></name></person-group><year iso-8601-date="2014">2014</year><article-title>Extension of <italic>Drosophila</italic> lifespan by Cinnamon through a sex-specific dependence on the insulin receptor substrate chico</article-title><source>Experimental Gerontology</source><volume>60</volume><fpage>220</fpage><lpage>230</lpage><pub-id pub-id-type="doi">10.1016/j.exger.2014.09.019</pub-id><pub-id pub-id-type="pmid">25456850</pub-id></element-citation></ref><ref id="bib26"><element-citation publication-type="software"><person-group person-group-type="author"><name><surname>Seong</surname> <given-names>KH</given-names></name><name><surname>Matsumura</surname> <given-names>T</given-names></name><name><surname>Shimada-Niwa</surname> <given-names>Y</given-names></name><name><surname>Niwa</surname> <given-names>R</given-names></name><name><surname>Kang</surname> <given-names>S</given-names></name></person-group><year iso-8601-date="2020">2020</year><data-title>Sapphire</data-title><source>GitHub</source><version designator="2b05586">2b05586</version><ext-link ext-link-type="uri" xlink:href="https://github.com/kanglab/Sapphire/tree/master">https://github.com/kanglab/Sapphire/tree/master</ext-link></element-citation></ref><ref id="bib27"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Shimada-Niwa</surname> <given-names>Y</given-names></name><name><surname>Niwa</surname> <given-names>R</given-names></name></person-group><year iso-8601-date="2014">2014</year><article-title>Serotonergic neurons respond to nutrients and regulate the timing of steroid hormone biosynthesis in <italic>Drosophila</italic></article-title><source>Nature Communications</source><volume>5</volume><elocation-id>5778</elocation-id><pub-id pub-id-type="doi">10.1038/ncomms6778</pub-id><pub-id pub-id-type="pmid">25502946</pub-id></element-citation></ref><ref id="bib28"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Smith</surname> <given-names>HC</given-names></name><name><surname>Niewohner</surname> <given-names>DJ</given-names></name><name><surname>Dewey</surname> <given-names>GD</given-names></name><name><surname>Longo</surname> <given-names>AM</given-names></name><name><surname>Guy</surname> <given-names>TL</given-names></name><name><surname>Higgins</surname> <given-names>BR</given-names></name><name><surname>Daehling</surname> <given-names>SB</given-names></name><name><surname>Genrich</surname> <given-names>SC</given-names></name><name><surname>Wentworth</surname> <given-names>CD</given-names></name><name><surname>Durham Brooks</surname> <given-names>TL</given-names></name></person-group><year iso-8601-date="2014">2014</year><article-title>Using flatbed scanners to collect High-resolution Time-lapsed images of the Arabidopsis root gravitropic response</article-title><source>Journal of Visualized Experiments</source><volume>83</volume><elocation-id>50878</elocation-id><pub-id pub-id-type="doi">10.3791/50878</pub-id></element-citation></ref><ref id="bib29"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Suh</surname> <given-names>JM</given-names></name><name><surname>Stenesen</surname> <given-names>D</given-names></name><name><surname>Peters</surname> <given-names>JM</given-names></name><name><surname>Inoue</surname> <given-names>A</given-names></name><name><surname>Cade</surname> <given-names>A</given-names></name><name><surname>Graff</surname> <given-names>JM</given-names></name></person-group><year iso-8601-date="2008">2008</year><article-title>An RGS-containing sorting nexin <italic>controls Drosophila</italic> lifespan</article-title><source>PLOS ONE</source><volume>3</volume><elocation-id>e2152</elocation-id><pub-id pub-id-type="doi">10.1371/journal.pone.0002152</pub-id><pub-id pub-id-type="pmid">18478054</pub-id></element-citation></ref><ref id="bib30"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Takeuchi</surname> <given-names>J</given-names></name><name><surname>Yamanishi</surname> <given-names>K</given-names></name></person-group><year iso-8601-date="2006">2006</year><article-title>A unifying framework for detecting outliers and change points from time series</article-title><source>IEEE Transactions on Knowledge and Data Engineering</source><volume>18</volume><fpage>482</fpage><lpage>492</lpage><pub-id pub-id-type="doi">10.1109/TKDE.2006.1599387</pub-id></element-citation></ref><ref id="bib31"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Trostnikov</surname> <given-names>MV</given-names></name><name><surname>Roshina</surname> <given-names>NV</given-names></name><name><surname>Boldyrev</surname> <given-names>SV</given-names></name><name><surname>Veselkina</surname> <given-names>ER</given-names></name><name><surname>Zhuikov</surname> <given-names>AA</given-names></name><name><surname>Krementsova</surname> <given-names>AV</given-names></name><name><surname>Pasyukova</surname> <given-names>EG</given-names></name></person-group><year iso-8601-date="2019">2019</year><article-title>Disordered expression of shaggy, the <italic>Drosophila</italic> gene encoding a Serine-Threonine protein kinase GSK3, affects the lifespan in a transcript-, Stage-, and Tissue-Specific manner</article-title><source>International Journal of Molecular Sciences</source><volume>20</volume><elocation-id>2200</elocation-id><pub-id pub-id-type="doi">10.3390/ijms20092200</pub-id></element-citation></ref><ref id="bib32"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Tsuda</surname> <given-names>M</given-names></name><name><surname>Ootaka</surname> <given-names>R</given-names></name><name><surname>Ohkura</surname> <given-names>C</given-names></name><name><surname>Kishita</surname> <given-names>Y</given-names></name><name><surname>Seong</surname> <given-names>KH</given-names></name><name><surname>Matsuo</surname> <given-names>T</given-names></name><name><surname>Aigaki</surname> <given-names>T</given-names></name></person-group><year iso-8601-date="2010">2010</year><article-title>Loss of <italic>Trx-2</italic> enhances oxidative stress-dependent phenotypes in <italic>Drosophila</italic></article-title><source>FEBS Letters</source><volume>584</volume><fpage>3398</fpage><lpage>3401</lpage><pub-id pub-id-type="doi">10.1016/j.febslet.2010.06.034</pub-id><pub-id pub-id-type="pmid">20600005</pub-id></element-citation></ref><ref id="bib33"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Yun</surname> <given-names>HM</given-names></name><name><surname>Noh</surname> <given-names>S</given-names></name><name><surname>Hyun</surname> <given-names>S</given-names></name></person-group><year iso-8601-date="2017">2017</year><article-title>Minocycline treatment suppresses juvenile development and growth by attenuating insulin/TOR signaling in <italic>Drosophila</italic> animal model</article-title><source>Scientific Reports</source><volume>7</volume><elocation-id>44724</elocation-id><pub-id pub-id-type="doi">10.1038/srep44724</pub-id><pub-id pub-id-type="pmid">28317899</pub-id></element-citation></ref><ref id="bib34"><element-citation publication-type="journal"><person-group person-group-type="author"><name><surname>Ziehm</surname> <given-names>M</given-names></name><name><surname>Ivanov</surname> <given-names>DK</given-names></name><name><surname>Bhat</surname> <given-names>A</given-names></name><name><surname>Partridge</surname> <given-names>L</given-names></name><name><surname>Thornton</surname> <given-names>JM</given-names></name></person-group><year iso-8601-date="2015">2015</year><article-title>SurvCurv database and online survival analysis platform update: Fig. 1</article-title><source>Bioinformatics</source><volume>34</volume><fpage>3878</fpage><lpage>3880</lpage><pub-id pub-id-type="doi">10.1093/bioinformatics/btv463</pub-id></element-citation></ref></ref-list><app-group><app id="appendix-1"><title>Appendix 1</title><boxed-text><sec id="s8" sec-type="appendix"><title>Fly Media for DIAMonDs</title><sec id="s8-1"><title>1.1. Materials and reagents</title><p>Agar powder: WAKO 010–15815 (500 g)</p><p>Agarose L (Low melting type): WAKO 317–02282 (25 g)</p><p>D(+)-Glucose: WAKO 045–31167 (10 Kg)</p><p>Sucrose: WAKO 193–00025 (500 g)</p><p>Dry yeast: Beer Yeast Korea Inc Dry Yeast G2 (20 Kg)</p><p>Cornmeal: SUNNY MAIZE CO.,LTD. Corn grits No. 4M (25 Kg)</p><p>96-well microplate: TrueLine TR5003 96well culture plate</p><p>384-well microplate: Greiner Bio-One 781186 Clear Polystyrene 384 well Microplate</p><p>Titer stick film: WATOSON 547-KTS-HC</p><p>Fly rearing plastic vial: MKC-30 [small] (HIGH TECH LLC, Chiba, Japan)</p><p>Soft sponge plugs: COW 30t × 27⌀; (HIGH TECH LLC, Chiba, Japan)</p></sec><sec id="s8-2"><title>1.2. Standard fly medium</title><list list-type="bullet"><list-item><p>Ingredients</p><list list-type="simple"><list-item><p>Agar powder 21 grams</p></list-item><list-item><p>D(+)-Glucose 300 grams</p></list-item><list-item><p>Dry yeast 150 grams</p></list-item><list-item><p>Corn Grits 201 grams</p></list-item><list-item><p>Mili-Q water 3.5 liters</p></list-item><list-item><p>Propionic acid 10 milliliters</p></list-item></list></list-item><list-item><p>Instructions</p><list list-type="order"><list-item><p>Measure each material and mix all.</p></list-item><list-item><p>Stir well with heating by a table-top gas cooker until materials fully dissolved.</p></list-item><list-item><p>Autoclave the medium.</p></list-item><list-item><p>Cool down the medium up to 80°C</p></list-item><list-item><p>Add 10 ml propionic acid and mix well. (For fly rearing vial)</p></list-item><list-item><p>Dispense the medium into each vial (5 ml/vial).</p></list-item><list-item><p>Cool before plugging. (For preparation of DIAMonDS microplate with standard medium)</p></list-item><list-item><p>Dispense the medium into each well of 96-well microplate (add 170 µl for lifespan test or 100 µl for detection of pupariation and eclosion).</p></list-item></list></list-item></list></sec><sec id="s8-3"><title>1.3. Yeast-sucrose (YS) medium for DIAMonDS drug resistance test</title><p>We have used YS medium for drug resistance test of DIAMonDS. We found that addition of 0.5% of dry yeast in 5% sucrose media showed highest survival and flies kept a high survival rate at least 10 days in the well of 384-well microplate with the food condition (<xref ref-type="fig" rid="app1fig1">Appendix 1—figure 1</xref>), it seems to enough to the short-term test such as stress resistance and chemical toxicity test using 384-well microplate.</p><fig id="app1fig1" position="float"><label>Appendix 1—figure 1.</label><caption><title>Effect of yeast concentration in fly medium.</title><p>Survivorship curves for <italic>w<sup>1118</sup></italic> males under several yeast concentrations by using a 384-well microplate (n = 24 each).</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app1-fig1-v1.tif"/></fig><list list-type="bullet"><list-item><p>Ingredients</p><list list-type="simple"><list-item><p>Agarose L 7.5 grams</p></list-item><list-item><p>Sucrose 25 grams</p></list-item><list-item><p>Dry yeast 2.5 grams</p></list-item><list-item><p>Mili-Q water (up to 500 milliliters)</p></list-item><list-item><p>Propionic acid 1.5 milliliters</p></list-item></list></list-item><list-item><p>Instructions</p><list list-type="order"><list-item><p>Measure each material and mix all.</p></list-item><list-item><p>Autoclave the medium.</p></list-item><list-item><p>Cool down and keep the medium at 50°C by water bath.</p></list-item><list-item><p>Add 1.5 ml propionic acid and mix well.</p></list-item><list-item><p>Add appropriate volume of chemical drug and mix well.</p></list-item><list-item><p>Dispense the medium into each well (70 µl for 384-well and 170 µl for 96-well microplate).</p></list-item><list-item><p>Cool down and leave the plate until the medium surface is dry.</p></list-item></list></list-item></list></sec><sec id="s8-4"><title>1.4. Agar plate for starvation</title><list list-type="bullet"><list-item><p>Ingredients</p><list list-type="simple"><list-item><p>Agar powder five grams</p></list-item><list-item><p>Mili-Q water (up to 500 milliliters)</p></list-item></list></list-item><list-item><p>Instructions</p><list list-type="order"><list-item><p>Measure each material and mix all.</p></list-item><list-item><p>Autoclave the medium.</p></list-item><list-item><p>Cool down the medium up to 80°C</p></list-item><list-item><p>Dispense the medium into each well (70 µl for 384-well and 170 µl for 96-well microplate).</p></list-item><list-item><p>Cool down and leave the plate until the medium surface is dry</p></list-item></list></list-item></list></sec></sec></boxed-text></app><app id="appendix-2"><title>Appendix 2</title><boxed-text><sec id="s9" sec-type="appendix"><title>Lid for 384-well microplate</title><p>384-well microplate: Greiner Bio-One 781186 Clear Polystyrene 384 well Microplate</p><p>We have made a lid for 384-well microplate from an acrylic sheet (2 mm thick) as shown in <xref ref-type="fig" rid="app2fig1">Appendix 2—figure 1a</xref>. Holes (diameter = 0.7 mm) were drilled in each well position with an electric drill. The four corners were fixed by screws, and all edges were sealed by masking tape (<xref ref-type="fig" rid="app2fig1">Appendix 2—figure 1b</xref>).</p><fig id="app2fig1" position="float"><label>Appendix 2—figure 1.</label><caption><title>Lid design for 384-well microplate.</title><p>(a) A handmade acrylic lid for 384-well microplate. (b) Usage example of the lid. Red arrows indicate positions of the screw.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app2-fig1-v1.tif"/></fig></sec></boxed-text></app><app id="appendix-3"><title>Appendix 3</title><boxed-text><sec id="s10" sec-type="appendix"><title>Lid for 96-well microplate</title><p>96-well microplate: TrueLine TR5003 96well culture plate</p><p>Titer stick HC film: WATOSON 547-KTS-HC</p><sec id="s10-1"><title>3–1. To measure the developmental time points of pupariation and eclosion</title><p>The titer stick film is covered on the 96-well microplate. Then, the plate is sealed on the upper surface by microplate sealing titer stick film (547-KTS-HC, WATOSON bio lab), and make eight air holes (0.35 mm) on the film surface of each well by insect pin (No. 00).</p></sec><sec id="s10-2"><title>3–2. Stress resistance test and lifespan test</title><p>To enable transfer flies into the well in no anesthetized treatment, the cross-shaped cutting on film surfaces on each well is conducted by a sharp cutter after sealing the microplate by the film. Then, individual adults were transfers to each of the well by using a fly aspirator without the use of anesthetized treatment.</p></sec></sec></boxed-text></app><app id="appendix-4"><title>Appendix 4</title><boxed-text><sec id="s11" sec-type="appendix"><title>Anesthetized treatment</title><p>The use of anesthetics can reduce the labor dramatically for inserting individual flies in each well, especially in the case of a 384-well microplate. We tested two anesthetics, carbon dioxide and triethylamine (TEA, also called as FlyNap) (<xref ref-type="bibr" rid="bib7">Fuyama, 1977</xref>). Short exposure of CO2 (10, 30, and 60 s) or TEA (10, 20, 30 s) did not show a significant difference in comparison with no treated flies (<xref ref-type="fig" rid="app4fig1">Appendix 4—figure 1a and b</xref>). The narcotism by short exposure of TEA vapor continues for 30 min (<xref ref-type="bibr" rid="bib7">Fuyama, 1977</xref>). Therefore, we have been preferentially using TEA for the preparation of a fly plate.</p><fig id="app4fig1" position="float"><label>Appendix 4—figure 1.</label><caption><title>Effect of anesthetics on fly viability in starvation test of adult male flies using 384-well microplate.</title><p>(<bold>a</bold>) Effect of CO<sub>2</sub> anesthetic. (<bold>b</bold>) Effect of TEA anesthetic.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app4-fig1-v1.tif"/></fig></sec></boxed-text></app><app id="appendix-5"><title>Appendix 5</title><boxed-text><sec id="s12" sec-type="appendix"><title>Fixing the microplates on the scan surface of the scanner</title><p>To put microplates on the fixed position every time, glass slides (MATSUNAMI Glass, S-2215) were arranged and glued on the scan surface as shown in <xref ref-type="fig" rid="app5fig1">Appendix 5—figure 1a</xref> (red squares indicate positions of glass slides). The microplates were placed along the guide of slide glasses and sealed by masking tape (<xref ref-type="fig" rid="app5fig1">Appendix 5—figure 1b and c</xref>). To reduce the reflection during scanning, black painted sheet was put on the surface of a scanner reflector (<xref ref-type="fig" rid="app5fig1">Appendix 5—figure 1d</xref>).</p><fig id="app5fig1" position="float"><label>Appendix 5—figure 1.</label><caption><title>Fixing method of microplates on the scanner surface.</title><p>(<bold>a</bold>) Positions of glass slides (red squares). (<bold>b</bold>) Three microplates fit perfectly in the frame of glass slides. (<bold>c</bold>) Microplates are fixed tightly on the surface by masking tape. (<bold>d</bold>) A black painted sheet on the scanner reflector.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app5-fig1-v1.tif"/></fig></sec></boxed-text></app><app id="appendix-6"><title>Appendix 6</title><boxed-text><sec id="s13" sec-type="appendix"><title>Image acquisition by DIAMonDS</title><sec id="s13-1"><title>6.1. Equipments and a software</title><p>Rearing chamber: LPH-410NS (Nippon Medical and Chemical Instruments Co., Ltd., Japan)</p><p>USB Fan: BIGFAN 120U (TIMELY Co,Ltd., Japan)</p><p>USB Hub: 400-HUB035BK (SANWA SUPPLY Inc, Japan)</p><p>Scanner: EPSON GT-F740 (also called ‘Epson Perfection V370 Photo’)</p><p>Uninterruptible power supply (UPS): BY120S (OMRON Corporation, Japan)</p><p>PC: Mac mini (Late 2014) (APPLE Inc)</p><p>Scanner software: VueScan (Hamrick Software, USA, <ext-link ext-link-type="uri" xlink:href="https://www.hamrick.com">https://www.hamrick.com</ext-link>)</p></sec><sec id="s13-2"><title>6.2. Hardware layout of the DIAMonDS</title><p>We have set up the scanner system in the rearing chamber as shown in <xref ref-type="fig" rid="app6fig1">Appendix 6—figure 1</xref>. Multiple scanners are connected to a single PC (Mac mini, late 2014, Apple Inc). We have used an Uninterruptible power supply (UPS) (BY120S, OMRON) to reduce the risk of a blackout. To minimize temperature unevenness on the scan surface, multiple small USB-fan (d=12 cm) are installed and operated in the chamber. DIAMonDS could use any CCD flatbed scanner. We have preferentially used EPSON GT-F740.</p><fig id="app6fig1" position="float"><label>Appendix 6—figure 1.</label><caption><title>Equipment arrangement for DIAMonDS.</title><p>(<bold>a</bold>) An example of the layout for DIAMonDS. (<bold>b and c</bold>) The direction of installation of the scanner for measurement of death time point. The scanner should be installed in the normal direction or upside-down direction for measurement of death (<bold>b</bold>) or developmental timings (pupariation and eclosion) (<bold>c</bold>) respectively.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app6-fig1-v1.tif"/></fig><p>For the detection of individual death by DIAMonDS, the scanner is installed in the normal orientation (<xref ref-type="fig" rid="app6fig1">Appendix 6—figure 1b</xref>). The medium solidified with agar gradually becomes liquified due to the feeding behavior of larvae. It is a cause of unclearness of the lid surface, and increase data noise. To reduce it, the scanner is oriented upside-down direction for measurement of developmental timings of pupariation and eclosion by DIAMonDS as shown in <xref ref-type="fig" rid="app6fig1">Appendix 6—figure 1c</xref>.</p></sec><sec id="s13-3"><title>6.3. Rearing condition</title><p>All experiments were conducted in a Plant growth chamber (LPH-410NS) which was kept at 25°C and at relative 60% humidity. Heterogeneity of temperature on the scan surface might affect data quality. To avoid the problem, several small fans (BIGFAN 120U) were installed into the chamber and the average temperature difference between several positions on scanner were achieved less than 0.5°C in dark condition (<xref ref-type="fig" rid="fig1s1">Figure 1—figure supplement 1</xref>).</p></sec><sec id="s13-4"><title>6.4. Time-lapse image acquisition</title><p>To acquire the time-lapse image, we have used a scanner driver, ‘<bold>VueScan</bold>’ (Hamrick Software, USA, <ext-link ext-link-type="uri" xlink:href="https://www.hamrick.com">https://www.hamrick.com</ext-link>). The VueScan is able to capture images continuously at several interval timing using multiple units of scanners (<xref ref-type="bibr" rid="bib28">Smith et al., 2014</xref>). Using the VueScan, we performed time-lapse imaging as following protocol.</p></sec></sec><sec id="s14" sec-type="appendix"><title>Time-lapse image acquisition protocol</title><list list-type="order"><list-item><p>Create new folder for storing images. An example of a folder name is ‘<bold>20190707-Seong-w1118.pupariation-scanner1</bold>’ (‘<bold>date-researcher’s name-information of experiment-scanner number</bold>’).</p></list-item><list-item><p>Connect the scanner to the PC and <bold>turn on</bold> the scanner.</p></list-item><list-item><p>Open the <bold>VueScan</bold>.</p></list-item><list-item><p>If you already saved the ‘<bold>options…</bold>”, you can load the option which recorded previously used whole parameters for acquisition of images.</p></list-item><list-item><p>Press the ‘<bold>preview</bold>’ button, (press ‘<bold>cancel</bold>’ button after completion of the preview), and set a region of interest (ROI) on the previewed image.</p></list-item><list-item><p>Set parameters in each tab as shown in <xref ref-type="fig" rid="app6fig2">Appendix 6—figure 2</xref> and <xref ref-type="fig" rid="app6fig3">Appendix 6—figure 3</xref>. In the tab ‘Input’: we use ‘eight bit Gray’, and ‘150 dpi’ both as scan and preview resolutions. Press ‘Auto repeat’ drop-down box and choose repeat interval as shown in <xref ref-type="fig" rid="app6fig2">Appendix 6—figure 2b</xref>. Select the folder to save images. Input the JPEG file name like as ‘000001+.jpg’. In the tab ‘Color’: Input the appropriate values in ‘Black point (%)”, ‘white point (%)”, ‘Curve low’, and ‘Curve high’ to take a high contrast image. In the tab ‘Output’: confirm each parameter as shown in <xref ref-type="fig" rid="app6fig3">Appendix 6—figure 3b</xref>.</p></list-item><list-item><p>Press <bold>‘File’/”Save options…’</bold> and save the parameters as same folder name (e.g.: ‘20190707-Seong-w1118.pupariation-scanner1’).</p></list-item><list-item><p>Press ‘scan’ button.</p></list-item><list-item><p>(Option) To perform multiple scanners using one PC, repeat steps 1 to 8 for each scanner sequentially. Before the multiple scanner running, you need to replicate and assign the VueScan application for each scanner. Modify the application name of replicated each VueScan as like ‘VueScan-1’, ‘VueScan-2’... Then, open each VueScan application independently correspond to each scanner respectively.</p></list-item></list><fig id="app6fig2" position="float"><label>Appendix 6—figure 2.</label><caption><title>Parameters in the tabs.</title><p>Areas enclosed by the square is especially important. (<bold>a</bold>) ‘Input’ tab. (<bold>b</bold>) Drop-down box of ‘Auto repeat’. (<bold>c</bold>) ‘Crop’ tab. (<bold>d</bold>) ‘Filter’ tab.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app6-fig2-v1.tif"/></fig><fig id="app6fig3" position="float"><label>Appendix 6—figure 3.</label><caption><title>Parameters in the tabs.</title><p>Areas enclosed by the square is especially important. (<bold>a</bold>) ‘Color’ tab. (<bold>b</bold>) ‘Output’ tab. (<bold>c</bold>) ‘Prefs’ tab.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app6-fig3-v1.tif"/></fig></sec></boxed-text></app><app id="appendix-7"><title>Appendix 7</title><boxed-text><sec id="s15" sec-type="appendix"><title>Template for analysis of DIAMonDS</title><p>We have prepared templates for data analysis of results from the Sapphire. The Sapphire analyzes the time-lapse images and, as a result, determines the event changing point as the frame number. Next, we should input each values of data (‘Blacklists’, ‘Timestamp’, and ‘Event timings (auto)”) into the appropriate positions of the Excel templates. The procedure is following.</p><list list-type="order"><list-item><p>Download each data set (‘Blacklists’, ‘Timestamp’, and ‘Event timings (auto)”) from the Sapphire viewer (<xref ref-type="fig" rid="app7fig1">Appendix 7—figure 1</xref>).</p><list list-type="simple"><list-item><p>‘Blacklists’ contains the information of omitted wells from the analysis. We can select omitted wells in the main tab on the Sapphire viewer.</p></list-item><list-item><p>‘Timestamp’ is a list of date of each image.</p></list-item><list-item><p>‘Event timings (auto)’ is frame number list of each well calculated by Sapphire.</p></list-item></list></list-item><list-item><p>Copy and paste downloaded data lists into appropriate position on the template (<xref ref-type="fig" rid="app7fig2">Appendix 7—figure 2</xref> and <xref ref-type="fig" rid="app7fig3">Appendix 7—figure 3</xref>).</p></list-item><list-item><p>If necessary, input ‘M’ or ‘F’. You can separate the male (‘M’) and female (‘F’) using the sex information of each well (<xref ref-type="fig" rid="app7fig3">Appendix 7—figure 3</xref>).</p></list-item></list><fig id="app7fig1" position="float"><label>Appendix 7—figure 1.</label><caption><title>Sapphire viewer.</title><p>(<bold>a</bold>) 'Main’ tab. (<bold>b</bold>) ‘Data table’ tab. Red arrows indicated ‘Download’ button of each data lists.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app7-fig1-v1.tif"/></fig><fig id="app7fig2" position="float"><label>Appendix 7—figure 2.</label><caption><title>DIAMonDS analysis template: tabs for data input.</title><p>(<bold>a</bold>) Input data list calculated by Sapphire into ①. (<bold>b</bold>) Input ‘Blacklist’ downloaded from Sapphire into ②. (<bold>c</bold>) Input ‘Timestamp’ downloaded from Sapphire into ③.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app7-fig2-v1.tif"/></fig><fig id="app7fig3" position="float"><label>Appendix 7—figure 3.</label><caption><title>DIAMonDS analysis template: tabs for results.</title><p>(<bold>a</bold>) Input Sex (‘M’ or”F’) of each well into ①. (<bold>b</bold>) The Result is indicated in ②. (<bold>c</bold>) In ③, Results are separated two groups, male and female.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app7-fig3-v1.tif"/></fig></sec></boxed-text></app><app id="appendix-8"><title>Appendix 8</title><boxed-text><sec id="s16" sec-type="appendix"><title>Life-event detection algorithm and software: Sapphire</title><p>Present system provides automatic high-accurate life-event detection algorithm including the image processing and signal processing shown in <xref ref-type="fig" rid="fig1">Figure 1c</xref>. Following text describes quantitative summary and robustness of the algorithm in various parameter spaces.</p><sec id="s16-1"><title>8.1. Data augmentation for network training</title><p>Present system performed the semantic segmentation through the deep neural network whose architecture is described in <xref ref-type="fig" rid="fig1s2">Figure 1—figure supplement 2b</xref>. Generally, sufficient number of annotation data leads to more accurate inference in deep learning. Two training datasets were prepared for the training of neural network. Both of training datasets include original images obtained by DIAMonDS at different conditions, and binary images labeled on animal-body by hand. First training dataset has original and labeled images of adults, and it was applied to the training of network for death-detection. Second training datsaset consists of adult- and larva-images and their binary labels. Larva images in the training data were employed to the traning of network for detection of pupariation. Not only adult but also larva images as distractors were applied to the training of the network for eclosion (<xref ref-type="table" rid="app8table1">Appendix 8—table 1</xref>). The number of training data was magnified by general data augmentation technique (‘<italic>Image processing</italic>’ in main text).</p><table-wrap id="app8table1" position="float"><label>Appendix 8—table 1.</label><caption><title>Data augmentation for training of FCN designed for animal body segmentation.</title><p>Note that the system was trained by only two datasets.</p></caption><table frame="hsides" rules="groups"><thead><tr><th/><th>Training data</th><th colspan="2">Training data 2</th></tr><tr><th>Target event</th><th>Death</th><th colspan="2">Pupariation/Eclosion</th></tr></thead><tbody><tr><td>Target animal in segmentation</td><td>Adult</td><td>Adult</td><td>Larva</td></tr><tr><td>No. of annotation data</td><td>178 adults</td><td>300 adults</td><td>No adult</td></tr><tr><td/><td/><td>5760 larva (distractor)</td><td>1839 larva</td></tr><tr><td>No. of augmented data</td><td>71,200 adult</td><td>60,000 adults</td><td>183,900 larva</td></tr><tr><td/><td/><td>57,600 larva (distractor)</td><td/></tr></tbody></table></table-wrap></sec><sec id="s16-2"><title>8.2. Animal body segmentation</title><p>Present system could detect rough outline of animal body (<xref ref-type="fig" rid="app8fig1">Appendix 8-figure 1</xref>).</p><fig id="app8fig1" position="float"><label>Appendix 8—figure 1.</label><caption><title>Example of segmentation for pupa (<bold>a</bold>), larva (<bold>b</bold>), adult in dataset 1 (<bold>c</bold>), and dataset 2 (<bold>d</bold>).</title><p>Note that the segmentation correctly captured the animal body in the images obtained by different imaging condition (<bold>c and d</bold>), and correctly ‘ignored’ pupa (<bold>a</bold>).</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app8-fig1-v1.tif"/></fig><p>In some cases, segmentation errors still appeared. The errors in segmentation could be improved by the increase of annotation data for training of network. In other word, present system showed high performance even though datasets shown in the manuscript were obtained through several imaging condition as well as the number of annotation data was small. In consistent imaging condition (same shape and size of well, plate number, and so on), the system will robustly detect entire life-event. Additional annotation data for every experiment might be also effective in order to promote network training. In other word, present algorithm could reach sufficient accuracy if an appropriate signal processing was applied on the image data even with rough segmentation.</p></sec><sec id="s16-3"><title>8.3. Robustness of detection for CF parameters</title><p>In the present system, subtraction between consecutive segmentation images were converted to ChangeFinder (CF) signal which is one of change point detection algorithms1 (see Materials and methods).</p><p>For the death detection, the system calculates the CF signal from adult body segmentation (<xref ref-type="fig" rid="app8fig2">Appendix 8—figure 2a</xref>). For the pupariation and eclosion detections, two CF signals were calculated from adult and larva segmentations, respectively (<xref ref-type="fig" rid="app8fig2">Appendix 8—figure 2b</xref>).</p><fig id="app8fig2" position="float"><label>Appendix 8—figure 2.</label><caption><title>Example of signalization from image data and detection of death (<bold>a</bold>) and pupariation-eclosion (<bold>b</bold>).</title><p>In (<bold>a</bold>), each panel indicates signals obtained as (<italic>top</italic>) luminance at every time steps, (<italic>second panel</italic>) subtraction of luminance between consecutive raw images, (<italic>third panel</italic>) subtraction between consecutive labeled images obtained by larva segmentation, and (<italic>bottom</italic>) ChangeFinder signal calculated by Label diff. Black horizontal lines indicate thresholds for detection of event timing. Red vertical line indicates the manually-detected event timings (pupariation), and yellow vertical lines are automatically-detected event timings (see <italic>supplementary text</italic>). In (<bold>b</bold>), almost same organization with (<bold>a</bold>) except both signals of larva and adult are included for detection of pupariation and eclosion.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app8-fig2-v1.tif"/></fig><p>In the present system, the timing of life-event transitions is determined as the maximum point of corresponding CF scores (‘Max-CF’).</p><p>To evaluate robustness of detection, we compared several detection methods. Most simple way is just thresholding of the activity signal without change point detection such as CF. We calculated two types of signal from difference between consecutive images. One is the luminance difference (‘Luminance diff.’) obtained by subtraction between raw images, and another one is the subtraction between segmentation images before the CF (‘Seg. diff.’). Threshold for event timing were calculated as total average of the signals (‘auto’) and manual tuning (‘manual’). In comparison of these event detection methods, max-CF exhibited high accuracy in almost all datasets (<xref ref-type="table" rid="app8table2">Appendix 8—table 2</xref>).</p><table-wrap id="app8table2" position="float"><label>Appendix 8—table 2.</label><caption><title>Summary of consistency between automatic and manual detections of pupariation (a), eclosion (b), and death (c).</title><p>The consistency was evaluated as the ratio of individuals whose detected frame differences between the algorithm and human expert were less than 5% for entire frame. Columns indicates different dataset and rows corresponds different detection method for comparison. Consistencies were described as the ratio and the number. The cells with &gt;= 90% consistency were labeled by two asterisks, and one asterisk corresponds the cells equal or greater than 80%, and less than 90%. Note that the total numbers of animal were different depending on dataset because of the elimination of some individuals that could not had the events.</p></caption><table frame="hsides" rules="groups"><thead><tr><th colspan="4">Pupariation</th></tr></thead><tbody><tr><td/><td>Dataset 1 <break/>(allevent)</td><td>Dataset 2 <break/>(160416)</td><td>Dataset 3 <break/>(180223)</td></tr><tr><td>Luminance diff. thre (auto)</td><td>36.6% <break/>(102/279)</td><td>0.0% <break/>(0/255)</td><td>37.4% <break/>(92/246)</td></tr><tr><td>Luminance diff. thre (manual)</td><td>78.5% <break/>(219/279)</td><td>39.6% <break/>(101/255)</td><td>39.0% <break/>(96/246)</td></tr><tr><td>Segmentation diff. thre (auto)</td><td>96.4%** <break/>(269/279)</td><td>82.4%* <break/>(210/255)</td><td>94.7%** <break/>(233/246)</td></tr><tr><td>Segmentation diff. thre (manual)</td><td>96.8%** <break/>(270/279)</td><td>91.8%** <break/>(234/255)</td><td>96.3%** <break/>(237/246)</td></tr><tr><td>Maximum point of CF signal</td><td>97.5%** <break/>(271/279)</td><td>96.1%** <break/>(245/255)</td><td>92.3%** <break/>(227/246)</td></tr><tr><th colspan="4">Eclosion</th></tr><tr><td/><td>Dataset 1 <break/>(allevent)</td><td>Dataset 2 <break/>(160416)</td><td>Dataset 3 <break/>(180223)</td></tr><tr><td>Luminance diff. thre (auto)</td><td>14.6% <break/>(34/233)</td><td>0.0% <break/>(0/241)</td><td>98.8%** <break/>(161/163)</td></tr><tr><td>Luminance diff. thre (manual)</td><td>60.1% <break/>(140/233)</td><td>2.9% <break/>(7/241)</td><td>98.8%** <break/>(161/163)</td></tr><tr><td>Segmentation diff. thre (auto)</td><td>82.0%* <break/>(191/233)</td><td>95.9%** <break/>(231/241)</td><td>99.4%** <break/>(162/163)</td></tr><tr><td>Segmentation diff. thre (manual)</td><td>85.4%** <break/>(199/233)</td><td>97.1%** <break/>(234/241)</td><td>99.4%** <break/>(162/163)</td></tr><tr><td>Maximum point of CF signal</td><td>86.3%* <break/>(201/233)</td><td>97.5%** <break/>(235/241)</td><td>99.4%** <break/>(162/163)</td></tr><tr><th colspan="4">Death</th></tr><tr><td/><td>Dataset 1 <break/>(150625)</td><td>Dataset 2 <break/>(171013)</td><td>Dataset 3 <break/>(180223)</td></tr><tr><td>Luminance diff. thre (auto)</td><td>62.0% <break/>(237/382)</td><td>97.9%** <break/>(281/287)</td><td>10.3% <break/>(14/136)</td></tr><tr><td>Luminance diff. thre (manual)</td><td>94.0%** <break/>(359/382)</td><td>97.9%** <break/>(281/287)</td><td>10.3% <break/>(14/136)</td></tr><tr><td>Segmentation diff. thre (auto)</td><td>76.4% <break/>(292/382)</td><td>97.2%** <break/>(279/287)</td><td>99.3%** <break/>(135/136)</td></tr><tr><td>Segmentation diff. thre (manual)</td><td>93.5%** <break/>(357/382)</td><td>97.6%** <break/>(280/287)</td><td>100.0%** <break/>(136/136)</td></tr><tr><td>Maximum point of CF signal</td><td>94.8%** <break/>(362/382)</td><td>93.4%** <break/>(268/287)</td><td>98.5%** <break/>(134/136)</td></tr></tbody></table></table-wrap><p>CF has two parameters, <italic>r</italic> and T. The <italic>r</italic> is a discounting rate and <italic>T</italic> is the length of a time window for averaging. We examined in robustness of detection accuracy for these two parameters in max-CF. For all event target and all datasets, max-CF demonstrated high-accuracy in wide range of the parameter, even the accuracy is relatively sensitive for discounting <italic>r</italic> than smoothing <italic>T</italic> (<xref ref-type="fig" rid="app8fig3">Appendix 8—figure 3</xref>–<xref ref-type="fig" rid="app8fig5">5</xref>).</p><fig id="app8fig3" position="float"><label>Appendix 8—figure 3.</label><caption><title>Robustness of automatic detection system for ChangeFinder parameters at pupariation detection.</title><p>Each panel shows 5% consistency as heatmap for <italic>T</italic> (x-axis) and <italic>r</italic> (y-axis) of ChangeFinder’s parameter. Panels are placed for different datasets (column) and color-scales (row).</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app8-fig3-v1.tif"/></fig><p>Present system used <italic>r</italic> = 0.003 except death detection in the datasets 1 (150626). In the data, <italic>r</italic> = 0.009 because the datasets has significantly few images.</p></sec><sec id="s16-4"><title>8.4. Application of the algorithm</title><p>The system captures the animal body and its trajectory. Therefore, one could estimate behavioral history and total activity of individual <italic>Drosophila</italic> by displaying of trajectory and its summation in a well. (<xref ref-type="video" rid="video1">Video 1</xref>).</p><p>In addition, the system could demonstrate dynamic visualization of life-event transitions of <italic>Drosophila</italic> population (<xref ref-type="video" rid="app8video1">Appendix 8—video 1</xref>).</p><media id="app8video1" mime-subtype="mp4" mimetype="video" xlink:href="elife-58630-fig1-v1.mp4"><label>Appendix 8—video 1.</label><caption><title>Example of sequential detection of pupariation and eclosion by Sapphire.</title></caption></media><p>Through the visualization, the users could easily recognize timing differences between populations they were bled on different plates.</p><fig id="app8fig4" position="float"><label>Appendix 8—figure 4.</label><caption><title>Robustness of automatic detection system for ChangeFinder parameters at eclosion detection.</title><p>Each panel shows 5% consistency as heatmap for <italic>T</italic> (x-axis) and <italic>r</italic> (y-axis) of ChangeFinder’s parameter. Panels are placed for different datasets (column) and color-scales (row).</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app8-fig4-v1.tif"/></fig><fig id="app8fig5" position="float"><label>Appendix 8—figure 5.</label><caption><title>Robustness of automatic detection system for ChangeFinder parameters at death detection.</title><p>Each panel shows 5% consistency as heatmap for <italic>T</italic> (x-axis) and <italic>r</italic> (y-axis) of ChangeFinder’s parameter. Panels are placed for different datasets (column) and color-scales (row). Most right column (dataset 3, 180223) is same dataset in the <xref ref-type="fig" rid="app8fig3">Appendix 8—figures 3</xref> and <xref ref-type="fig" rid="app8fig4">4</xref>.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-app8-fig5-v1.tif"/></fig></sec></sec></boxed-text></app></app-group></back><sub-article article-type="decision-letter" id="sa1"><front-stub><article-id pub-id-type="doi">10.7554/eLife.58630.sa1</article-id><title-group><article-title>Decision letter</article-title></title-group><contrib-group><contrib contrib-type="editor"><name><surname>Bellen</surname><given-names>Hugo J</given-names></name><role>Reviewing Editor</role><aff><institution>Baylor College of Medicine</institution><country>United States</country></aff></contrib></contrib-group><contrib-group><contrib contrib-type="reviewer"><name><surname>Andrews</surname><given-names>Jonathan</given-names> </name><role>Reviewer</role><aff><institution>BCM</institution><country>United States</country></aff></contrib><contrib contrib-type="reviewer"><name><surname>O'Connor</surname><given-names>Michael B</given-names></name><role>Reviewer</role><aff><institution>University of Minnesota</institution><country>United States</country></aff></contrib></contrib-group></front-stub><body><boxed-text><p>In the interests of transparency, eLife publishes the most substantive revision requests and the accompanying author responses.</p></boxed-text><p><bold>Acceptance summary:</bold></p><p>We believe that the monitoring assay that the authors here developed will be useful in many fly labs and anticipate that this work will impact the research of very different types of fly research.</p><p><bold>Decision letter after peer review:</bold></p><p>Thank you for submitting your article &quot;The <italic>Drosophila</italic> Individual Activity Monitoring and Detection System (DIAMonDS)&quot; for consideration by <italic>eLife</italic>. Your article has been reviewed by two peer reviewers, and the evaluation has been overseen by a Reviewing Editor and K VijayRaghavan as the Senior Editor. The following individuals involved in review of your submission have agreed to reveal their identity: Jonathan Andrews (Reviewer #1); Michael B O'Connor (Reviewer #2).</p><p>The reviewers have discussed the reviews with one another and the Reviewing Editor has drafted this decision to help you prepare a revised submission.</p><p>As the editors have judged that your manuscript is of interest, but as described below that additional experiments are required before it is published, we would like to draw your attention to changes in our revision policy that we have made in response to COVID-19 (https://elifesciences.org/articles/57162). First, because many researchers have temporarily lost access to the labs, we will give authors as much time as they need to submit revised manuscripts. We are also offering, if you choose, to post the manuscript to bioRxiv (if it is not already there) along with this decision letter and a formal designation that the manuscript is &quot;in revision at <italic>eLife</italic>&quot;. Please let us know if you would like to pursue this option. (If your work is more suitable for medRxiv, you will need to post the preprint yourself, as the mechanisms for us to do so are still in development.)</p><p>We encourage you to carefully read the critiques and address all the issues that are listed below.</p><p><italic>Reviewer #1:</italic></p><p>The paper entitled ‘The <italic>Drosophila</italic> Individual Activity Monitoring and Detection System (DIAMonDS)’ highlights a new detection/tracking system which utilizes a flatbed CCD scanner to track and identify multiple life cycle events (pupariation, eclosion, and death) using a newly developed algorithm. In support of this novel monitoring system, the authors provide multiple examples of the tracking system in action, including analysis of larval and adult movement and the detection of pupariation and eclosion at a high temporal resolution. The authors also provide several examples of more complex experiments which can be accomplished in a high-throughput manner using DIAMonDS, including lifespan and stress resistance assays. As described, this system would provide a researcher with an automated tool for measuring the timing of multiple major developmental milestones in <italic>Drosophila</italic> development – essentially allowing for more accurate and less labor intensive observation.</p><p>While DIAMonDS is certainly valuable in its current incarnation, the authors do note a number of worrying limitations which I believe should be resolved prior to publication, and there are several areas of the manuscript where I believe more detail is warranted.</p><p>1) As DIAMonDS detects changes between the static and active phases in the <italic>Drosophila</italic> lifecycle through changes in motion, it is essential that the authors demonstrate (or provide an explanation of) how they discriminate between less motile stages of development (or death) and normal cessation of motion while alive, such as in grooming or sleep behavior in the adult.</p><p>2) Similar to critique #1, this type of motion detection may not be as effective in animals with some form of locomotor defect. An additional experiment demonstrating that DIAMonDS can reliably detect and classify larvae or adults with reduced locomotion is prudent to demonstrate that it can work, even if the flies are impaired in some way.</p><p>3) It is currently unclear how the DIAMonDS system handles events that occur &quot;off-camera&quot;, as can be observed in frame 77-79 of Video 1. This may be a potential sources of error during tracking – for example, if a larvae crawls into an area where it is not observed and pupates, or if an animal dies out of view.</p><p>4) It is unclear how (or if) the system would discriminate between pupation and a dead larvae. A failure to account for this could easily result in a false-positive for pupation.</p><p>5) Paragraph four subsection “Pupariation and eclosion timing detection by DIAMonDS”: I was unable to locate a description of the semi-automatic (TH) methods presented here in the Materials and methods section.</p><p>6) The inability of the methods described in the manuscript to handle <italic>Oregon-R</italic> or <italic>Canton-S</italic> strains significantly limits the usefulness of the system. A set of optimal conditions for common laboratory strains should be included with the manuscript.</p><p>7) As admitted by the authors, the size of the wells may adversely affect fly health. It would be worthwhile to see a comparison between the smaller chambers and a larger chamber, so as to allow for future users of the system to make more informed decisions about how to implement it.</p><p><italic>Reviewer #2:</italic></p><p>The manuscript by Seong et al. describes the development of a sophisticated activity monitoring system that is able to determine with, great accuracy, the timing of major life stage transitions during <italic>Drosophila</italic> development. Specifically, the system relies on time lapse imaging and A.I. based learning to pinpoint three transitions: (1) larval to pupal, (2) pupal to adult, (3) adult to death. The basic principle is to establish the location of a larva, pupa or adult at each time point within either a 96 or 384 well plate and then determine if it has changed at the next time point. Since larva and adults are motile and pupa and dead flies are not then it is conceptually easy to distinguish the stage transition through location changes by monitoring location changes. The authors demonstrate that the system works, at least for the <italic>W1118</italic> genetic background, and is able to replicate known developmental characteristics such as the fact the females typically eclose a few hours before males and that the timing of the larval to pupal transition is diet (sugar) sensitive. They also demonstrate that it can be used to establish Kaplan-Meier lifespan curves which are capable of distinguishing environmental effects on adult lifespan such as the presence of DDT or paraquat in the food. Overall this system appears to have great potential for quantitatively measuring a number of developmental parameters that are presently very tedious to determine manually and are therefore not amenable to high throughput procedures that are needed for genetic and drug screening.</p><p>I do not feel competent to comment on the software development and AI procedures used to train the system other than to say that they appear to work quite reliably as long as the optics are not disturbed. Herein lies the biggest disappointment.</p><p>1) The authors conclude their Results section by saying that they cannot reliably measure lifespan in common strains such as <italic>Oregon-R</italic> and <italic>Canton-S</italic> because of accidental death effects due to such issues as water condensation in the wells and also due to blockage of the optical light path by the spread of food particles and feces on the well lid that obscures detection of the fly's position during imaging. The authors say that additional refinements of the system will be needed to overcome these challenges for adult lifespan analysis. I wonder, however, if the authors have tried something as simple as replacing the lid of the microtiter dish at some frequency during the lifespan measurements. I recognize that the entire chamber will need to be immersed in a CO<sub>2</sub> chamber or cooled to knock the flies out and that this may influence the lifespan kinetics, but have the authors attempted anything like this as a work around to the degenerating light path and water accumulation issues during aging studies?</p><p>Despite this drawback, I think the system still has significant utility for assaying environmental and genetic effects on larval to pupa and pupal to adult transitions and this makes it is worth communicating to the <italic>Drosophila</italic> research community.</p></body></sub-article><sub-article article-type="reply" id="sa2"><front-stub><article-id pub-id-type="doi">10.7554/eLife.58630.sa2</article-id><title-group><article-title>Author response</article-title></title-group></front-stub><body><disp-quote content-type="editor-comment"><p>Reviewer #1:</p><p>[…]</p><p>1) As DIAMonDS detects changes between the static and active phases in the <italic>Drosophila</italic> lifecycle through changes in motion, it is essential that the authors demonstrate (or provide an explanation of) how they discriminate between less motile stages of development (or death) and normal cessation of motion while alive, such as in grooming or sleep behavior in the adult.</p></disp-quote><p>Thank you for the reviewer’s critical critique. After the segmentation by deep neural network, Sapphire obtained the ChangeFinder (CF) signal which characterized change points. The CF signal includes both long- and short-time scale factors and a change point is determined as the maximum point showing significantly distinct change and the longest stationary state after the change. Therefore, transient changes from dynamic to static state such as sleep could be effectively ignored by the process because the CF signal is often much smaller than the one of fatal cessation like a death and pupariation (please see <xref ref-type="fig" rid="sa2fig1">Author response image 1</xref>).</p><p>The time scale parameters of CF calculation were optimized for the detection depending on the total number and interval between frames. However, robustness of detection was guaranteed in wide range of the parameters and it does not require fine-tuning (see Appendix 8—figure 3-5).</p><fig id="sa2fig1"><label>Author response image 1.</label><caption><title>Conceptual figure of activity signal (upper panel) and ChangeFinder (CF) signal (lower panel).</title><p>Temporal cessation of <italic>Drosophila</italic> behaviour like a sleep showed relatively low CF score than the long-time cessation such as death. So, the present system could correctly capture the event as a maximum point of CF score. NB. All the signals were idealized for understanding.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-resp-fig1-v1.tif"/></fig><disp-quote content-type="editor-comment"><p>2) Similar to critique #1, this type of motion detection may not be as effective in animals with some form of locomotor defect. An additional experiment demonstrating that DIAMonDS can reliably detect and classify larvae or adults with reduced locomotion is prudent to demonstrate that it can work, even if the flies are impaired in some way.</p></disp-quote><p>As the reviewer mentioned, rich locomotor activity is desirable for robust detection in the present system. However, the present algorithm can determine fatal cessation even the larval locomotion during alive is less motile because the CF signal of fatal cessation is typically higher than the ones of insufficient locomotor activity (<xref ref-type="fig" rid="sa2fig2">Author response image 2</xref>). Of course, the system could not detect the individual which shows extremely low signal or completely loss the event, that is, the target event did not occur due to fly impairment.</p><p>As treatment for the cases, the system could make users rapidly identify and access such the individuals visually by monitoring consequent images of animal body segmentation. Furthermore, the flies without target event could be easily eliminated, for example, the individual that could not reach the eclosion after pupariation could be excluded from survival ratio of adult <italic>Drosophila</italic> by just editing csv file named as “Blacklists” in Sapphire (see Appendix 7).</p><p>To demonstrate the performance of the DIAMonDS in the case of hypoactive flies, we used decapitated females which show stationary status throughout their life. DIAMonDS effectively detected their death time points that were comparable to the detection by visual handling, indicating that the DIAMonDS shows good performance even in such low active situations. We have added the data in Figure 4—figure supplement 3 and the following description in the main text.</p><p>“Next, we tried to test whether the DIAMonDS can effectively detect the death time points even in flies showed a very reduced amount of activity. As a hypoactive fly model, we used decapitated females who keep motor skills but hardly moved until their death (Ejima and Griffith, 2008). DIAMonDS showed relatively good results that were comparable to the visual results although there was a tendency for the accuracy to reduce slightly in comparison with the case of wild-type flies (Figure 4—figure supplement 3).”</p><fig id="sa2fig2"><label>Author response image 2.</label><caption><title>Conceptual figure of high and low activity.</title><p>Upper panels indicates activity signal and lower plans are CF values. In low activity animal, both signal shows relatively low intensity, however, the maximum point still indicates continuous cessation which corresponds to death. NB. All the signals were idealised for understanding.</p></caption><graphic mime-subtype="tiff" mimetype="image" xlink:href="elife-58630-resp-fig2-v1.tif"/></fig><disp-quote content-type="editor-comment"><p>3) It is currently unclear how the DIAMonDS system handles events that occur &quot;off-camera&quot;, as can be observed in frame 77-79 of Video 1. This may be a potential sources of error during tracking – for example, if a larvae crawls into an area where it is not observed and pupates, or if an animal dies out of view.</p></disp-quote><p>Invisibility including off-camera as far as it is temporal could be ignored in the system by the same reason as the answers for critique 1 and 2. However, as reviewer #1 mentioned, in some cases, if the event, such as pupariation and death, occurs out-of-camera-frame, there is a possibility that the accuracy of detection will slightly affect. In order to reduce the errors, a shorter time-lapse interval and adjusting the amount of food in the wells to eliminate blind spots could be effective. Therefore, we have added the following description in the Discussion.</p><p>&quot;Fifth, occasionally, an animal cannot be detected in the image by the existence of a blind area of scanning. The system is not greatly affected even if &quot;off-camera&quot; occurs during an active state of an animal. But the accuracy of event detection might be slightly affected when &quot;off-camera&quot; occurs just at the timing of the event shift. It could be reduced by increasing the spatial- or temporal-resolution to eliminate the blind-area of each well.&quot;</p><disp-quote content-type="editor-comment"><p>4) It is unclear how (or if) the system would discriminate between pupation and a dead larvae. A failure to account for this could easily result in a false-positive for pupation.</p></disp-quote><p>As the reviewer mentioned, the system could not discriminate between pupariation and dead larvae when it monitored only pupariation at a glance. If the system continued monitoring after pupariation, the system could discriminate by the referring of CF signal corresponding to “eclosion” because it is a proof of the larva was not dead. However, dead larvae can easily be discriminate after finishing time-lapse scanning and could be manually excluded by making the “Blacklists” file in Sapphire analysis.</p><p>We would like to add the following description in Materials and methods section:</p><p>“After time-lapse scanning, we can easily discriminate “out-of-event”, such as larval, and, pupal dead individuals. Sapphire can exclude “out-of-event” wells by making the “Blacklists” file (Appendix 7).”</p><disp-quote content-type="editor-comment"><p>5) Paragraph four subsection “Pupariation and eclosion timing detection by DIAMonDS”: I was unable to locate a description of the semi-automatic (TH) methods presented here in the Materials and methods section.</p></disp-quote><p>We apologize our incomplete information and incorrect reference for semiautomatic (TH) method which was explained not in “Materials and methods” but in “Appendix 8”.</p><p>We rewrote the sentence in the main text as follows:</p><p>“Arbitral image sequences such as raw images and the segmentation images could be analyzed in Sapphire (see Appendix 8). Sapphire calculates the CF signal obtained from the subtraction of consecutive segmentation images as fully automated method (CF method). Sapphire determined the timing of life-event by applying just thresholding on the arbitral time series data specified by user (TH method). At first, threshold is automatically calculated as an average of maximum and minimum value of the signal (auto-TH) and the threshold is modifiable by hands depending on user’s demand (manual-TH). Accuracy of CF method and auto- and manual-TH method on raw image subtraction was quantified in (Appendix 8).”</p><disp-quote content-type="editor-comment"><p>6) The inability of the methods described in the manuscript to handle Oregon-R or Canton-S strains significantly limits the usefulness of the system. A set of optimal conditions for common laboratory strains should be included with the manuscript.</p></disp-quote><p>We appreciate this comment. To find optimal conditions for common laboratory strains, we tried to measure the survival of <italic>Oregon-R</italic>, <italic>Canton-S</italic>, and <italic>w1118</italic> strains in different well-size and plate replacement cycle. We observed that the survival of flies was improved by replacing the microplate every 2-3 days per week. On the other hand, the bigger well-size did not improve the viability.</p><p>We would like to add the results as Figure 6—figure supplement 1 and describe as follows in the main text:</p><p>“To find common optimum conditions for measuring the lifespan of other laboratory strains, we have tried to observe the viability of three strains (<italic>w1118</italic>, <italic>Oregon-R,</italic> and <italic>Canton-S</italic>) in condition with several microplate well-size (96-well, 48-well, and 24-well) (Figure 6—figure supplement 1). The viabilities were measured at the time point at 1st, 2nd, 3rd, and 4th weeks with once plate replacement a week. We observed that the reduced viability was not rescued by changing to bigger microplate-well size, and somewhat, increasing well-size might have harmful effects on the survival of aged flies (Figure 6—figure supplement 1A-C). We next tested the two different plate replacement cycles (once a week, or once 2-3 days) using <italic>Oregon-R</italic> and <italic>Canton-S</italic> in 96-well microplate. We observed a shorter plate replacement cycle could effectively improve the viability (Figure 6—figure supplement 1B,C). However, because plate replacement is required a lot of work time, it seems to be not suitable for the high-throughput experiments. Further optimization of the experimental conditions will be necessary to effectively use DIAMonDS to conduct lifespan tests on a wide range of fly strains.”</p><disp-quote content-type="editor-comment"><p>7) As admitted by the authors, the size of the wells may adversely affect fly health. It would be worthwhile to see a comparison between the smaller chambers and a larger chamber, so as to allow for future users of the system to make more informed decisions about how to implement it.</p></disp-quote><p>We appreciate this comment. We tried to use different size of microplates (96well, 48-well, and 24-well) for measuring the pupariation and eclosion. We observed that timings of pupariation and eclosion were slightly but significantly shorten both in the 48-well and 24-well conditions and the pupal duration might have the fewer effects of well-size (Figure 2—figure supplement 5).</p><p>We would like to add the results as Figure 2—figure supplement 5 and describe as follows in the main text:</p><p>“To understand the effect of chamber size on fly development, we used three different sizes of microplates (96-well, 48-well, and 24-well) contained normal fly media for measuring pupariation and eclosion. We observed that timings of pupariation and eclosion were slightly but significantly shorten both in the 48well and 24-well conditions and the pupal duration might have the fewer effects of well-size, suggesting that the chamber size might affect fly’s development (Figure 2—figure supplement 5).”</p><disp-quote content-type="editor-comment"><p>Reviewer #2:</p><p>[…]</p><p>1) The authors conclude their Results section by saying that they cannot reliably measure lifespan in common strains such as Oregon-R and Canton-S because of accidental death effects due to such issues as water condensation in the wells and also due to blockage of the optical light path by the spread of food particles and feces on the well lid that obscures detection of the fly's position during imaging. The authors say that additional refinements of the system will be needed to overcome these challenges for adult lifespan analysis. I wonder, however, if the authors have tried something as simple as replacing the lid of the microtiter dish at some frequency during the lifespan measurements. I recognize that the entire chamber will need to be immersed in a CO<sub>2</sub> chamber or cooled to knock the flies out and that this may influence the lifespan kinetics, but have the authors attempted anything like this as a work around to the degenerating light path and water accumulation issues during aging studies?</p></disp-quote><p>We appreciate this supportive comment. As mentioned in reply to the point #7 of reviewer #1, to find optimum condition for lifespan analysis, we tested a well-size effect on survivorship of adult fly strains. The result indicated that adult survival did not improve increasing the well-size of the microplate and rather reduced in <italic>Oregon-R</italic> and <italic>Canton-S</italic> strain at 3rd and 4th weeks. We also tried to measure the percent survival of <italic>Oregon-R</italic> and <italic>Canton-S</italic> strains in different plate replacement cycle conditions. We observed that the survival of flies was significantly improved by replacing the microplate every 2-3 days per week in comparison with the once a week replacing cycle. We added the new figures and sentences as described in reply to the pojnt #7 of reviewer #1.</p><p>As mentioned by reviewer #2, anesthetizing such as CO<sub>2</sub> and cooling the body might influence the lifespan. Therefore, we did not use any anesthetizing treatment for lifespan experiments. We used a fly aspirator and transferred the living flies directly in the wells of the microplate. This is mentioned at Appendix 3.</p></body></sub-article></article>