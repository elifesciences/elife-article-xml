<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE article PUBLIC "-//NLM//DTD JATS (Z39.96) Journal Archiving and Interchange DTD v1.1d3 20150301//EN"  "JATS-archivearticle1.dtd"><article xmlns:xlink="http://www.w3.org/1999/xlink" article-type="research-article" dtd-version="1.1d3"><front><journal-meta><journal-id journal-id-type="nlm-ta">elife</journal-id><journal-id journal-id-type="publisher-id">eLife</journal-id><journal-title-group><journal-title>eLife</journal-title></journal-title-group><issn publication-format="electronic">2050-084X</issn><publisher><publisher-name>eLife Sciences Publications, Ltd</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="publisher-id">76534</article-id><article-id pub-id-type="doi">10.7554/eLife.76534</article-id><article-categories><subj-group subj-group-type="display-channel"><subject>Tools and Resources</subject></subj-group><subj-group subj-group-type="heading"><subject>Cell Biology</subject></subj-group><subj-group subj-group-type="heading"><subject>Neuroscience</subject></subj-group></article-categories><title-group><article-title>A scalable and modular automated pipeline for stitching of large electron microscopy datasets</article-title></title-group><contrib-group><contrib contrib-type="author" corresp="yes" id="author-254246"><name><surname>Mahalingam</surname><given-names>Gayathri</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="corresp" rid="cor1">*</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-254245"><name><surname>Torres</surname><given-names>Russel</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-2876-4382</contrib-id><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-265712"><name><surname>Kapner</surname><given-names>Daniel</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-28200"><name><surname>Trautman</surname><given-names>Eric T</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0001-8588-0569</contrib-id><xref ref-type="aff" rid="aff2">2</xref><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-265713"><name><surname>Fliss</surname><given-names>Tim</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-140632"><name><surname>Seshamani</surname><given-names>Shamishtaa</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-265714"><name><surname>Perlman</surname><given-names>Eric</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0001-5542-1302</contrib-id><xref ref-type="aff" rid="aff3">3</xref><xref ref-type="fn" rid="conf2"/></contrib><contrib contrib-type="author" id="author-265709"><name><surname>Young</surname><given-names>Rob</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-265710"><name><surname>Kinn</surname><given-names>Samuel</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-53087"><name><surname>Buchanan</surname><given-names>JoAnn</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-254244"><name><surname>Takeno</surname><given-names>Marc M</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-8384-7500</contrib-id><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-265711"><name><surname>Yin</surname><given-names>Wenjing</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-136118"><name><surname>Bumbarger</surname><given-names>Daniel J</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-111055"><name><surname>Gwinn</surname><given-names>Ryder P</given-names></name><xref ref-type="aff" rid="aff4">4</xref><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-85330"><name><surname>Nyhus</surname><given-names>Julie</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-214850"><name><surname>Lein</surname><given-names>Ed</given-names></name><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-53088"><name><surname>Smith</surname><given-names>Steven J</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-2290-8701</contrib-id><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-4315"><name><surname>Reid</surname><given-names>R Clay</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-8697-6797</contrib-id><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-181656"><name><surname>Khairy</surname><given-names>Khaled A</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-9274-5928</contrib-id><xref ref-type="aff" rid="aff5">5</xref><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-19822"><name><surname>Saalfeld</surname><given-names>Stephan</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-4106-1761</contrib-id><xref ref-type="aff" rid="aff6">6</xref><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" id="author-140148"><name><surname>Collman</surname><given-names>Forrest</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0002-0280-7022</contrib-id><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><contrib contrib-type="author" corresp="yes" id="author-264772"><name><surname>Macarico da Costa</surname><given-names>Nuno</given-names></name><contrib-id contrib-id-type="orcid">http://orcid.org/0000-0003-2001-4568</contrib-id><xref ref-type="aff" rid="aff1">1</xref><xref ref-type="corresp" rid="cor2">*</xref><xref ref-type="other" rid="par-1"/><xref ref-type="fn" rid="conf1"/></contrib><aff id="aff1"><institution>Allen Institute for Brain Science</institution>, <addr-line><named-content content-type="city">Seattle</named-content></addr-line>, <country>United States</country></aff><aff id="aff2"><institution content-type="dept">Scientific Computing</institution>, <institution>Janelia Research Campus</institution>, <addr-line><named-content content-type="city">Ashburn</named-content></addr-line>, <country>United States</country></aff><aff id="aff3"><institution>Yikes LLC</institution>, <addr-line><named-content content-type="city">Baltimore</named-content></addr-line>, <country>United States</country></aff><aff id="aff4"><institution content-type="dept">Epilepsy Surgery and Functional Neurosurgery</institution>, <institution>Swedish Neuroscience Institute</institution>, <addr-line><named-content content-type="city">Seattle</named-content></addr-line>, <country>United States</country></aff><aff id="aff5"><institution>St. Jude Children's Research Hospital</institution>, <addr-line><named-content content-type="city">Memphis</named-content></addr-line>, <country>United States</country></aff><aff id="aff6"><institution content-type="dept">Saalfeld Lab</institution>, <institution>Janelia Research Campus</institution>, <addr-line><named-content content-type="city">Ashburn</named-content></addr-line>, <country>United States</country></aff></contrib-group><contrib-group content-type="section"><contrib contrib-type="editor" id="author-15498"><name><surname>Cardona</surname><given-names>Albert</given-names></name><role>Reviewing editor</role><aff><institution>University of Cambridge</institution>, <country>United Kingdom</country></aff></contrib></contrib-group><author-notes><corresp id="cor1"><label>*</label>For correspondence: <email>gayathrim@alleninstitute.org</email> (GM);</corresp><corresp id="cor2"><label>*</label>For correspondence: <email>nunod@alleninstitute.org</email> (NM);</corresp></author-notes><pub-date date-type="pub" publication-format="electronic"><day>26</day><month>07</month><year>2022</year></pub-date><volume>11</volume><elocation-id>e76534</elocation-id><history><date date-type="received"><day>20</day><month>12</month><year>2021</year></date><date date-type="accepted"><day>10</day><month>07</month><year>2022</year></date></history><permissions><copyright-statement>Â© 2022, Mahalingam et al</copyright-statement><copyright-year>2022</copyright-year><copyright-holder>Mahalingam et al</copyright-holder><license xlink:href="http://creativecommons.org/licenses/by/4.0/"><license-p>This article is distributed under the terms of the <ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution License</ext-link> permitting unrestricted use and redistribution provided that the original author and source are credited.</license-p></license></permissions><self-uri content-type="pdf" xlink:href="elife-76534-v1.pdf"/><abstract><p>Serial-section electronmicroscopy (ssEM) is themethod of choice for studyingmacroscopic biological samples at extremely high resolution in three dimensions. In the nervous system, nanometer-scale images are necessary to reconstruct dense neural wiring diagrams in the brain, so called connectomes. In order to use this data, consisting of up to 10<sup>8</sup> individual EM images, it must be assembled into a volume, requiring seamless 2D stitching from each physical section followed by 3D alignment of the stitched sections. The high throughput of ssEM necessitates 2D stitching to be done at the pace of imaging, which currently produces tens of terabytes per day. To achieve this, we present a modular volume assembly software pipeline ASAP (Assembly Stitching and Alignment Pipeline) that is scalable to datasets containing petabytes of data and parallelized to work in a distributed computational environment. The pipeline is built on top of the Render (27) services used in the volume assembly of the brain of adult Drosophilamelanogaster (30). It achieves high throughput by operating on themeta-data and transformations of each image stored in a database, thus eliminating the need to render intermediate output. ASAP ismodular, allowing for easy incorporation of new algorithms without significant changes in the workflow. The entire software pipeline includes a complete set of tools for stitching, automated quality control, 3D section alignment, and final rendering of the assembled volume to disk. ASAP has been deployed for continuous stitching of several large-scale datasets of the mouse visual cortex and human brain samples including one cubic millimeter of mouse visual cortex (28; 8) at speeds that exceed imaging. The pipeline also has multi-channel processing capabilities and can be applied to fluorescence and multi-modal datasets like array tomography.</p></abstract><kwd-group kwd-group-type="research-organism"><title>Research organism</title><kwd>Human</kwd><kwd>Mouse</kwd></kwd-group><funding-group><award-group id="par-1"><funding-source><institution-wrap><institution>IARPA</institution></institution-wrap></funding-source><award-id>D16PC00004</award-id><principal-award-recipient><name><surname>Mahalingam</surname><given-names>Gayathri</given-names></name><name><surname>Torres</surname><given-names>Russel</given-names></name><name><surname>Kapner</surname><given-names>Daniel</given-names></name><name><surname>Fliss</surname><given-names>Tim</given-names></name><name><surname>Seshamani</surname><given-names>Shamishtaa</given-names></name><name><surname>Young</surname><given-names>Rob</given-names></name><name><surname>Kinn</surname><given-names>Samuel</given-names></name><name><surname>Buchanan</surname><given-names>JoAnn</given-names></name><name><surname>Takeno</surname><given-names>Marc M</given-names></name><name><surname>Yin</surname><given-names>Wenjing</given-names></name><name><surname>Bumbarger</surname><given-names>Daniel J</given-names></name><name><surname>Reid</surname><given-names>R Clay</given-names></name><name><surname>Collman</surname><given-names>Forrest</given-names></name><name><surname>Macarico da Costa</surname><given-names>Nuno</given-names></name></principal-award-recipient></award-group><funding-statement>The funders had no role in study design and interpretation, or the decision to submit the work for publication.</funding-statement></funding-group></article-meta></front><back><sec id="s1" sec-type="additional-information"><title>Additional information</title><fn-group content-type="competing-interest"><title>Competing interest</title><fn fn-type="conflict" id="conf2"><p>Eric Perlman, has a competing interest in Yikes LLC.</p></fn><fn fn-type="conflict" id="conf1"><p>The other authors declare that no competing interests exist.</p></fn></fn-group><fn-group content-type="ethics-information"><title>Ethics</title><fn fn-type="other"><p>Animal experimentation: All procedures were carried out in accordance with Institutional Animal Care and Use Committee approval at the Allen Institute for Brain Science with protocol numbers 1503, 1801 and 1808</p></fn><fn fn-type="other"><p>Human subjects: Human surgical specimen was obtained from local hospital in collaboration with local neurosurgeon. The sample collection was approved by the Western Institutional Review Board (Protocol # SNI 0405). Patient provided informed consent and experimental procedures were approved by hospital institute review boards before commencing the study.</p></fn></fn-group></sec><sec id="s2" sec-type="supplementary-material"><title>Additional Files</title><sec id="s3" sec-type="data-availability"><title>Data availability</title><p>The current manuscript describes is a software infrastructure resource that is being made publicly available. The manuscript is not a data generation manuscript. Nevertheless, one of the datasets used is already publicly available on https://www.microns-explorer.org/cortical-mm3#em-imagery  with available imagery and segmentation (https://tinyurl.com/cortical-mm3).Moreover cloud-volume (https://github.com/seung-lab/cloud-volume) can be used to programmatically download EM imagery from either Amazon or Google with the cloud paths described below. The imagery was reconstructed in two portions, referred to internally by their nicknames 'minnie65' and 'minnie35' reflecting their relative portions of the total data. The two portions are aligned across an interruption in sectioning.minnie65:AWS Bucket: precomputed://https://bossdb-open-data.s3.amazonaws.com/iarpa_microns/minnie/minnie65/emGoogle Bucket: precomputed://https://storage.googleapis.com/iarpa_microns/minnie/minnie65/emminnie35:AWS Bucket: precomputed://https://bossdb-open-data.s3.amazonaws.com/iarpa_microns/minnie/minnie35/emGoogle Bucket: precomputed://https://storage.googleapis.com/iarpa_microns/minnie/minnie35/emWe have also made available in Dryad raw data of the remaining datasets https://doi.org/10.5061/dryad.qjq2bvqhr</p><p>The following datasets were generated:</p><p><element-citation id="dataset1" publication-type="data" specific-use="isSupplementedBy"><person-group person-group-type="author"><collab>Macarico  da Costa N</collab><collab>Mahalingam G</collab><collab>Torres R</collab><collab>Buchanan J</collab><collab>Takeno M</collab><collab>Yin W</collab><collab>Bumbarger D</collab><collab>Collman F</collab><collab>Reid R</collab></person-group><year iso-8601-date="2022">2022</year><source>ASAP-TEM-sample</source><ext-link ext-link-type="uri" xlink:href="https://dx.doi.org/10.5061/dryad.qjq2bvqhr">https://dx.doi.org/10.5061/dryad.qjq2bvqhr</ext-link><comment>Dryad Digital Repository, doi:10.5061/dryad.qjq2bvqhr</comment></element-citation></p><p>The following previously published datasets were used:</p><p><element-citation id="dataset2" publication-type="data" specific-use="references"><person-group person-group-type="author"><collab>Consortium</collab><collab>Mic</collab><collab>Alexander Bae</collab><collab>J</collab><collab>Baptiste</collab><collab>M</collab><collab>Bodor</collab><collab>AL</collab><collab>Brittain</collab><collab>D</collab><collab>Buchanan</collab><collab>J</collab><collab>Bumbarger</collab><collab>DJ</collab><collab>Castro</collab><collab>MA</collab><collab>Celii</collab><collab>B</collab><collab>Cobos</collab><collab>E</collab><collab>et al</collab></person-group><year iso-8601-date="2021">2021</year><source>MICrONS multi-area dataset</source><ext-link ext-link-type="uri" xlink:href="www.microns-explorer.org">www.microns-explorer.org</ext-link><comment>https://doi.org/10.1101/2021.07.28.454025</comment></element-citation></p></sec><supplementary-material><ext-link xlink:href="elife-76534-supp-v1.zip">Download zip</ext-link><p>Any figures and tables for this article are included in the PDF. The zip folder contains additional supplemental files.</p></supplementary-material></sec></back></article>